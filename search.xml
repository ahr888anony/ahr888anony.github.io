<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>使用hexo遇到的坑</title>
    <url>/2023/08/31/%E4%BD%BF%E7%94%A8hexo%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<p>在初次使用hexo时，遇到一系列问题。现在开启这篇文章记录之。</p>
<span id="more"></span>
<h2 id="git提交用户与git登陆用户不一致问题">1.
git提交用户与git登陆用户不一致问题</h2>
<p>在实际操作时，发现GitHub提交项目的用户仍为之前<code>git config --global</code>设置的用户及邮箱，并没有采用<code>git config --local</code>设置或<code>_config.yml</code>文件中配置的参数，实际登陆用户为<code>--local</code>设置的那个，采用的ssh密钥也是这个用户。</p>
<p>其中<code>_config.yml</code>的相关配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@xxx.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">user01</span></span><br><span class="line">  <span class="attr">email:</span> <span class="string">email01@xxx.com</span></span><br></pre></td></tr></table></figure>
<p>出现的问题如图：</p>
<p><img src="用户修复.png"></p>
<p>上图框中的用户名是问题修复后的，修复前为其他用户。</p>
<p>问题产生的原因是hexo在第一次部署后会记录用户相关参数，保存在了<code>.deploy_git</code>文件中，之后一直延续之，故不论后续怎么修正都仍然采用的之前保留的用户。</p>
<p>解决办法是在添加局域用户名后，删除本项目的<code>.deploy_git</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">rm</span> -rf .deploy_git</span><br></pre></td></tr></table></figure>
<p>然后重新部署即可。</p>
<h2 id="typora与hexo的图片引用地址不一致问题">2.
typora与hexo的图片引用地址不一致问题</h2>
<p>在显示上面那张图片时存在hexo图片不显示的问题：</p>
<p>图片保存地址为：</p>
<p><code>source/_posts/&#123;文稿名称对应的资源文件夹&#125;/&#123;引用图片&#125;</code></p>
<p>在typora中的相对位置需要指定图片文件的上层目录才可以引用、即需要指定：</p>
<p><code>![](&#123;文稿名称对应的资源文件夹&#125;/&#123;引用图片&#125;)</code></p>
<p>才可显示。</p>
<p>而hexo按照教程（ <a href="https://hexo.io/docs/asset-folders#Embedding-an-image-using-markdown">资源文件夹</a>）设置后，不需要指定<code>&#123;文稿名称对应的资源文件夹&#125;</code>。</p>
<p>在知乎上找到了<a href="https://zhuanlan.zhihu.com/p/542101567">解决方案</a>。需要更改</p>
<p><code>node_modules</code> --&gt; <code>hexo-asset-image</code> --&gt;
<code>index.js</code></p>
<p>第58行的代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, config.<span class="property">root</span> + link + src);</span><br></pre></td></tr></table></figure>
<p>改为：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, src);</span><br></pre></td></tr></table></figure>
<p>最后在<code>*.md</code>文件中引用图片时还是需要指定没有<code>.md</code>文件名命名的文件夹作为索引路径，即：</p>
<p><code>![](&#123;文件名&#125;/&#123;图片&#125;)</code></p>
<p>然后执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>
<p>即可在本地浏览器看到正确的图片。</p>
<h2 id="hexo每次部署后均需要重新配置自定义域名">3.
hexo每次部署后均需要重新配置自定义域名</h2>
<p>在每次新写文章之后，执行了：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>
<p>结果发现GitHub上的项目历史commit记录丢失，且在<code>Settings -&gt; Pages -&gt; Custom domain</code>中配置的自定义域名也丢失，需要再次配置才能访问。</p>
<p>估计是先执行了<code>clean</code>操作的原因。</p>
<p>本文完成后，再次尝试部署，这回在部署前不<code>clean</code>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure>
<p>访问网页发现仍然出现域名解析丢失的问题，GitHub上的用户自定义域名又变为了空白。</p>
<p>出现该问题的原因是域名解析的操作是在GitHub上进行的，在<code>Custom domain</code>中绑定用户自定义域名后，会在GitHub项目库根目录上生成一个名为<code>CNAME</code>的文件，该文件中有域名信息、本地没有。如果在本地执行部署，自然不会有该文件、从而强制推送到远端时会导致远端的该文件丢失。</p>
<p>解决办法为在本地hexo博客的<code>source</code>文件夹下新建一个<code>CNAME</code>文件，写入自己的域名，再次部署即可。</p>
<h2 id="更改主题">4. 更改主题</h2>
<p>由于想给hexo博客增加一个访问量统计功能，找到的介绍均提到主题目录下还存在其他文件，但是我上面根据官网默认安装的在<code>themes</code>文件夹下是没有东西的，故需要安装以进一步增加统计功能。</p>
<p>查询到更改（或沿用默认的<code>landscape</code>）主题的方法很简单，直接在官网<a href="https://hexo.io/themes/">主题</a>页面上查找到自己喜欢的，进入其GitHub项目直接克隆到本地的<code>blog/themes/</code>文件夹下即可，即：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/blog/themes</span><br><span class="line">$ git <span class="built_in">clone</span> xxx</span><br></pre></td></tr></table></figure>
<p>由于本地采用了多个git账户，为了进行区分，在<code>~/.ssh/config</code>文件中分别配置了不同用户的ssh密钥，在克隆项目时需要指定用户，假定配置的为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host git_a</span><br><span class="line">  HostName github.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_a</span><br><span class="line">  IdentitiesOnly <span class="built_in">yes</span></span><br><span class="line">  ProxyCommand nc -X 5 -x 127.0.0.1:port_a %h %p</span><br><span class="line"></span><br><span class="line">Host git_b</span><br><span class="line">  HostName github.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_b</span><br><span class="line">  IdentitiesOnly <span class="built_in">yes</span></span><br><span class="line">  ProxyCommand nc -X 5 -x 127.0.0.1:port_b %h %p</span><br></pre></td></tr></table></figure>
<p>上述的代理端口有差别是为了区分两个用户的流量。假定我们使用的是<code>git_b</code>账户，克隆的是<a href="https://github.com/hpcslag/hexo-theme-morgan">Morgan</a>主题，则需要对地址进行修正，先进入<code>~/blog</code>目录（即博客根目录），执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@git_b:hpcslag/hexo-theme-morgan.git themes/tocas-ui-morgan</span><br></pre></td></tr></table></figure>
<p>即将<code>hexo-theme-morgan.git</code>克隆到<code>~/blog/themes/tocas-ui-morgan</code>文件夹。</p>
<p>在实际使用的时候发现该主题不是很好看，且对不蒜子统计不是很友好，决定改为使用最广泛的<a href="https://github.com/iissnan/hexo-theme-next">nexT</a>主题，当然个人感觉默认的<a href="https://github.com/hexojs/hexo-theme-landscape">landscape</a>也挺不错。鉴于很多人说<code>netT</code>功能多、可拓展性强、对搜索引擎的支持更好，且其GitHub的star数量为hexo主题类最多的，故采用之。</p>
<p>执行克隆操作安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@git_b:iissnan/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure>
<p>考虑到next使用有点复杂，考虑后续使用之。暂时仍然使用默认的landscape主题。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>加密市场的市场因子</title>
    <url>/2023/09/14/%E5%8A%A0%E5%AF%86%E5%B8%82%E5%9C%BA%E7%9A%84%E5%B8%82%E5%9C%BA%E5%9B%A0%E5%AD%90/</url>
    <content><![CDATA[<p>本文首先分析全加密市场收益率的一般特征，进而按照一定的筛选规则对数据进行过滤，然后分等权重与市值加权两种情况、组建各市值排名下的市场组合，将各组合的收益率联合比特币一起进行相关性分析，最后得出市场因子的可能代理形式。</p>
<span id="more"></span>
<h2 id="全市场情况">全市场情况</h2>
<p>本节主要侧重分析收益率的情况。先分析了全市场的日收益率情况，然后为后续研究进行一定的数据过滤，最后进行了异常值处理。</p>
<p>阅读本节，有助于了解加密市场的整体情况。</p>
<h3 id="收益率描述">收益率描述</h3>
<p>本文的数据来源于<a href="https://coinmarketcap.com">coinmarketcap</a>，截止到2023-09-14日，该网站上收录了超过9000种以USD计价的数字货币。</p>
<p>对于0价格、本文将其视为空缺数据、替换为<code>np.nan</code>、然后采用向下填充方式补齐。</p>
<p>收益率有两种计算方式，价格涨幅与对数价格差。</p>
<p>价格涨幅收益率计算如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq1}
rtn_t=(close_t-close_{t-1})/close_{t-1}
\end{equation}\]</span></p>
<p>上式中的<span class="math inline">\(t\)</span>为第t个交易日。</p>
<p>对数收益率计算如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq2}
logRtn_t=log(close_t)-log(close_{t-1})
\end{equation}\]</span></p>
<p>对数收益率与价格涨幅收益率两者的转换关系为：</p>
<p><span class="math display">\[\begin{equation}\label{eq3}
rtn_t=e^{logRtn_t}-1
\end{equation}\]</span></p>
<p>计算前进行了如下处理，初步避免异常值：</p>
<blockquote>
<ol type="1">
<li>将收盘价为0的情况替换为空值<code>np.nan</code>，避免出现无穷大收益率；</li>
<li>采用向下填充的方法填补收盘价空值。</li>
</ol>
</blockquote>
<h3 id="价格涨幅收益率">价格涨幅收益率</h3>
<p>我们可以看看如果不进行任何处理的所有币种（共9064个币种）的日收益率（共4812个交易日）描述情况，见下表：</p>
<blockquote>
<p><font size="2"><em>价格涨幅收益率描述表</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">rtn</td>
<td style="text-align: right;">6.35182e+06</td>
<td style="text-align: right;">276334</td>
<td style="text-align: right;">5.1249e+08</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.26464e+12</td>
</tr>
</tbody>
</table>
<p>上表中count指总共的有效样本数（空值不算在内）。</p>
<p>收益率均值达到276334的原因是处在75%之外的异常值产生了巨大影响，其中位数及四分位均处在合理范围内。</p>
<p>由于收益率的计算采用了价格的增幅法、而非对数价格差，故而收益率会呈现出正负不对称的现象、特别是在异常值区间，即上表中的最小收益率仅约-1（对应1日几乎归零、投资者完全亏损），而最大值为1.26464e+12。</p>
<p>我们来看看天量级的最大收益率是怎么产生的。</p>
<p>找到收益率最大值，发现为<code>BBUNNY</code>于<code>2023-08-05</code>日出现，该币种前一交易日（<code>2023-08-04</code>）的收盘价为<code>$8.200000e-13</code>，而<code>2023-08-05</code>日收盘价为<code>$1.037006</code>，涨幅惊人、不过该日的交易量仅仅为<code>$0.18</code>。如此之低的交易量，实在是不具有真实交易的潜在可能性。</p>
<p>收益率最小值，出现在<code>2023-08-06</code>的<code>LEET</code>币，该币种前一日（<code>2023-08-05</code>）的收盘价为<code>$1.541654</code>而次日的收盘价为<code>$1.755000e-11</code>，该日的交易量仅为<code>$260.1</code>，与最大收益率的<code>BBUNNY</code>一样交易量实在是太低。</p>
<h3 id="对数收益率">对数收益率</h3>
<p>如果采用对数价格差法计算，则最大最小收益率会相当，如下表：</p>
<blockquote>
<p><font size="2"><em>对数收益率描述表</em></font></p>
</blockquote>
<table style="width:100%;">
<colgroup>
<col style="width: 10%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">logRtn</td>
<td style="text-align: right;">6.35182e+06</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.231</td>
<td style="text-align: right;">-25.199</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">27.866</td>
</tr>
</tbody>
</table>
<p>可见此时最大最小值差距不大、正负收益率基本对称。</p>
<p>不过采用对数价格差计算的收益率在计算横截面（cross-section）的投资组合时，会产生很复杂的可加性问题（可参见石川博士在知乎的回答，见<a href="https://www.zhihu.com/question/30113132/answer/431786548">这里</a>），不如简单收益率简洁方便。故本文在进行投资组合处采用价格涨幅法计算收益率。</p>
<p>如果不对收益率中存在的异常值进行适当的处理，会对后续研究造成巨大的影响、得出错误结论。</p>
<p>出于涨跌对称的考虑，对异常值处理时选用对数收益率更方便。做投资组合时再根据<span class="math inline">\(\eqref{eq3}\)</span>式转换回价格涨幅收益率。</p>
<h3 id="投资组合构建">投资组合构建</h3>
<p>我们先阐述一下投资组合的构建方法，防止后续进行数据过滤、异常值处理时有数据丢失或错误修改引起错误。</p>
<p>为了规避天量级的异常收益率，我们需要对数据进行一定的过滤，过滤后真正有效的收益率是次期收益率<span class="math inline">\(rtn\_1\)</span>或次期对数收益率<span class="math inline">\(logRtn\_1\)</span>，这是因为我们构建投资组合时用到的筛选值为当期值、但筛选后的效果只有在次期才能体现。</p>
<p>真实的投资必须考虑不能有未来数据，故需要用上一交易周期的数据进行筛选，然后持有到当前交易周期的收盘。由于此时有些币种可能已经不在新筛选出的数据范围内了，故在过滤前需要先计算出每个币（如下文所述的重名、多名现象，对应唯一的cmc_id且唯一symbol才是一个币实体）的次期收益率<span class="math inline">\(rtn\_1\)</span>或次期对数收益率<span class="math inline">\(logRtn\_1\)</span>。</p>
<p>用次期收益率<span class="math inline">\(rtn\_1\)</span>构建投资组合（进行时间上的<code>shift</code>），就不会有未来数据和数据缺失的问题。</p>
<p>即投资组合构建方式为：用上一期的其他变量进行投资组合筛选、用当期收益率计算投资收益。</p>
<h3 id="交易量市值过滤">交易量市值过滤</h3>
<h4 id="规则">规则</h4>
<p>将交易量低、市值低的币种过滤掉。制定如下规则：</p>
<blockquote>
<ol type="1">
<li>日交易量需要不少于<span class="math inline">\(\$10^5\)</span>；</li>
<li>市值不少于<span class="math inline">\(\$10^6\)</span>；</li>
</ol>
</blockquote>
<p>进行筛选。上述筛选会将早期不符合条件的比特币也过滤掉，这是正常的。</p>
<h4 id="重名及多名现象">重名及多名现象</h4>
<p>筛选后剩下的symbol数有2360个、cmc_id（cmc给的唯一id）有2444个，说明有多个不同币种存在简称相同的现象；</p>
<p>在cmc_id固定后对symbol进行二次分组后，发现有2446个币，说明有2个币具有多个symbol简称！</p>
<p>对应的为<code>id=1720</code>的<code>IOTA</code>、其还有另一个名字<code>MIOTA</code>，两者价格、市值、交易量完全一样。</p>
<p>另一个具有两个symbol简称的是<code>EURC</code>，它的另一个名称为<code>EUROC</code>，对应在不同交易所或链上的名称，两者之间只存在微小的差异。</p>
<h4 id="过滤后的收益率">过滤后的收益率</h4>
<p>此时收益率情况见下表：</p>
<blockquote>
<p><font size="2"><em>过滤后的收益率情况</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 6%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">rtn</td>
<td style="text-align: right;">1.44167e+06</td>
<td style="text-align: right;">0.031</td>
<td style="text-align: right;">16.763</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">15695.5</td>
</tr>
</tbody>
</table>
<p>可见虽然样本数量显著下降，但是异常值仍然存在。</p>
<p>我们再次检查最大最小值出现的情况。</p>
<p>出现上表中最大收益率的有<code>UNI</code>（需要注意cmc收录有很多简称均为<code>UNI</code>的币，本处对应的为<code>id=4307</code>的<code>UNICORN Token</code>），对应的时间在<code>2022-10-21</code>，该币种前日（<code>2022-10-20</code>）的收盘价为<code>$0.000038</code>、成交量仅<code>$3.38</code>，而收益率异常日（<code>2022-10-21</code>）的收盘价约为<code>$0.598153</code>、交易量达到<code>$210829.03</code>；</p>
<p>最小值对应的有<code>WSPP</code>（对应的<code>id=10841</code>，<code>BSC</code>链上的<code>Wolf Safe Poor People</code>币），对应日期为<code>2021-09-13</code>、该日价格为<code>$8.398000e-11</code>、交易量<code>$128837.54</code>，发现该币种<code>2021-09-12</code>日的收盘价为<code>$0</code>、交易量<code>$126266.08</code>（注意不是近似，而真的是0，同时其交易量不为0！该币种早期有很多0价格），如开篇所述、我们将其视为空并用上个有效价格替换处理，故处理后<code>2021-09-12</code>日的收盘价为<code>$0.000295</code>（实际对应<code>2021-07-20</code>日收盘价）。</p>
<p>由于过滤导致数据集变小，次期收益率能保证投资组合时数据不丢失，次期收益率情况见下表：</p>
<blockquote>
<p><font size="2"><em>过滤后的次期收益率情况</em></font></p>
</blockquote>
<table style="width:100%;">
<colgroup>
<col style="width: 9%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">rtn_1</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
</tbody>
</table>
<p>可见异常值情况也存在。</p>
<h3 id="市值排名过滤">市值排名过滤</h3>
<p>按照市值排名进行过滤，是一种截面（cross-section）过滤，指的是只保留截面上市值排名靠前的币种，如果某个交易日数据量不足排名数、则选用当日的全量数据。</p>
<h4 id="全量数据的排名">全量数据的排名</h4>
<p>首先，我们选用全量数据进行观察。</p>
<p>我们作出排名前100、前300、前500、前1000、前2000及全量数据的次期收益率描述情况。</p>
<blockquote>
<p><font size="2"><em>全量数据、市值排名筛选的次期收益率<span class="math inline">\(rtn\_1\)</span>情况</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 18%">
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">top_100</td>
<td style="text-align: right;">347371</td>
<td style="text-align: right;">25.877</td>
<td style="text-align: right;">15247.5</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.035</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">8.98659e+06</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300</td>
<td style="text-align: right;">861227</td>
<td style="text-align: right;">10.567</td>
<td style="text-align: right;">9683.94</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.037</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">8.98659e+06</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500</td>
<td style="text-align: right;">1.28833e+06</td>
<td style="text-align: right;">7.067</td>
<td style="text-align: right;">7917.66</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.038</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">8.98659e+06</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000</td>
<td style="text-align: right;">2.19656e+06</td>
<td style="text-align: right;">4.152</td>
<td style="text-align: right;">6063.72</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.038</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">8.98659e+06</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000</td>
<td style="text-align: right;">3.34636e+06</td>
<td style="text-align: right;">6.786</td>
<td style="text-align: right;">8582.5</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.037</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.031</td>
<td style="text-align: right;">1.2867e+07</td>
</tr>
<tr class="even">
<td style="text-align: left;">all</td>
<td style="text-align: right;">6.35182e+06</td>
<td style="text-align: right;">276334</td>
<td style="text-align: right;">5.1249e+08</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.26464e+12</td>
</tr>
</tbody>
</table>
<p>可见单纯进行市值排名过滤，不能起到过滤掉异常收益率的效果。</p>
<h4 id="过滤数据的排名">过滤数据的排名</h4>
<p>本小节是对已经采用交易量市值过滤规则后的数据进行排名，然后筛选排名靠前的数据。</p>
<p>仍然作出排名前100、前300、前500、前1000、前2000及全量数据的次期收益率描述情况，如下表：</p>
<blockquote>
<p><font size="2"><em>筛选后数据、市值排名筛选的次期收益率<span class="math inline">\(rtn\_1\)</span>情况</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 12%">
<col style="width: 21%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">top_100</td>
<td style="text-align: right;">246308</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.083</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.029</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">3.556</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300</td>
<td style="text-align: right;">668131</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.532</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500</td>
<td style="text-align: right;">938668</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.454</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000</td>
<td style="text-align: right;">1.39848e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.425</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="even">
<td style="text-align: left;">all</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
</tbody>
</table>
<p>可见如想进一步处理异常值，需要额外的办法。</p>
<h3 id="异常值处理">异常值处理</h3>
<p>对异常值的任何处理，都可能造成模型与研究结论的改变，需要谨慎使用。</p>
<p>异常值的常用处理办法有放缩法、mad法、均值-方差法三种，这三种方法应该对异常上涨和异常下跌平等的处理，故应该处理次期对数收益率<span class="math inline">\(logRtn\_1\)</span>。由于加密市场收益率异常值对均值方差影响太大，故均值-方差法不适用，本文不进行讨论。</p>
<p>缩放法的参数为0.02，即将次期对数收益率处在分位数<span class="math inline">\([0, 0.02]\)</span>和<span class="math inline">\([0.98, 1]\)</span>的用临界值<span class="math inline">\(logRtn\_1_{0.02}\)</span>和<span class="math inline">\(logRtn\_1_{0.98}\)</span>代替。完成缩放后，按照<span class="math inline">\(\eqref{eq3}\)</span>得出处理后的次期收益率<span class="math inline">\(rtn\_1\)</span>。</p>
<p>mad（中位数绝对值离差的中位数）的计算如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq4}
mad=median(abs(X-median(X)))
\end{equation}\]</span></p>
<p>异常值判断及处理标准为：超过中位数3个mad值的<span class="math inline">\(logRtn\_1\)</span>视为异常，用<span class="math inline">\(median\pm 3*mad\)</span>替换。</p>
<p>处理完之后也需要转换为次期收益率<span class="math inline">\(rtn\_1\)</span>。</p>
<p>对异常值进行处理后的次期收益率情况见下表：</p>
<blockquote>
<p><font size="2"><em>各排名组及各异常值处理后的次期收益率<span class="math inline">\(rtn\_1\)</span>情况</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">top_100_raw</td>
<td style="text-align: right;">246308</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.083</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.029</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">3.556</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_100_win</td>
<td style="text-align: right;">246308</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.069</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.029</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_100_mad</td>
<td style="text-align: right;">246308</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">-0.514</td>
<td style="text-align: right;">-0.028</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300_raw</td>
<td style="text-align: right;">668131</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.532</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_300_win</td>
<td style="text-align: right;">668131</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.071</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300_mad</td>
<td style="text-align: right;">668131</td>
<td style="text-align: right;">-0.003</td>
<td style="text-align: right;">0.059</td>
<td style="text-align: right;">-0.566</td>
<td style="text-align: right;">-0.032</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500_raw</td>
<td style="text-align: right;">938668</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.454</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_500_win</td>
<td style="text-align: right;">938668</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500_mad</td>
<td style="text-align: right;">938668</td>
<td style="text-align: right;">-0.003</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">-0.572</td>
<td style="text-align: right;">-0.032</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000_raw</td>
<td style="text-align: right;">1.39848e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.425</td>
<td style="text-align: right;">-0.999</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_1000_win</td>
<td style="text-align: right;">1.39848e+06</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.071</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000_mad</td>
<td style="text-align: right;">1.39848e+06</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">-0.572</td>
<td style="text-align: right;">-0.033</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000_raw</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_2000_win</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000_mad</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">-0.572</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">all_raw</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">427.365</td>
</tr>
<tr class="odd">
<td style="text-align: left;">all_win</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">-0.663</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">1.448</td>
</tr>
<tr class="even">
<td style="text-align: left;">all_mad</td>
<td style="text-align: right;">1.44094e+06</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">-0.572</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.026</td>
<td style="text-align: right;">0.485</td>
</tr>
</tbody>
</table>
<blockquote>
<p>上表中处理方法名称后缀<code>_raw</code>代表未经处理的数据、后缀<code>_win</code>代表缩放法处理的数据、后缀<code>_mad</code>代表mad法处理的数据。</p>
</blockquote>
<p>可见两种处理方法对比，mad对异常值的处理效果更好，不过也意味着更失真，因为加密市场的日涨幅超过10倍是较常见的事情。如果需要研究更准确的投资组合、或者极限抗压情况，则不应该进行收益率异常值处理。</p>
<p>接下来，我们用分缩放法处理、mad法处理、没进行异常值处理3种数据集，应用到市场组合中，观察异常值处理是否合理。</p>
<h2 id="市场组合构建">市场组合构建</h2>
<p>我们利用上述处理过的收益率来进行市场投资组合，以构建加密市场因子。本节分等权重与市值加权两种情况讨论。</p>
<p>等权重加权会加大市值小的币种权重，有潜在暴涨的可能性，对于很多投机者来说，这意味着机会，故本节也兼顾讨论。市值加权更能反应整体市场情况，反应了整个市场可以容纳的资金情况下的表现。</p>
<h3 id="等权重加权">等权重加权</h3>
<p>所谓的等权重加权就是，在每一个交易日，将所有非空值的币种收益率（实际是次期收益率）取均值，也即对收益率取截面平均。如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq5}
rtn_{eq}^t=\sum_{j}^{N^t} \frac{1}{N^t}*rtn_j^t
\end{equation}\]</span></p>
<p>上式中的<span class="math inline">\(t\)</span>为第t个交易日，<span class="math inline">\(j\)</span>为截面上（第t个交易日内）收益率非空的第j个币种，<span class="math inline">\(N^t\)</span>为第t个交易日、收益率非空的币种总数。</p>
<h4 id="含经过异常值处理的数据情况">含经过异常值处理的数据情况</h4>
<p>如上计算的等权重加权收益率描述统计情况见下表：</p>
<blockquote>
<p><font size="2"><em>等权重加权下，各排名组及各异常值处理方式的收益率描述情况</em>
</font></p>
</blockquote>
<table style="width:100%;">
<colgroup>
<col style="width: 18%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">count</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">std</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">25%</th>
<th style="text-align: right;">50%</th>
<th style="text-align: right;">75%</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">top_100_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_100_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_100_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_300_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_300_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.02</td>
<td style="text-align: right;">-0</td>
<td style="text-align: right;">0.018</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.662</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_500_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_500_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_1000_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_1000_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.017</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.662</td>
</tr>
<tr class="even">
<td style="text-align: left;">top_2000_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="odd">
<td style="text-align: left;">top_2000_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">all_raw</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.017</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">1.662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">all_win</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.485</td>
</tr>
<tr class="even">
<td style="text-align: left;">all_mad</td>
<td style="text-align: right;">3641</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">-0.491</td>
<td style="text-align: right;">-0.019</td>
<td style="text-align: right;">-0.001</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.485</td>
</tr>
</tbody>
</table>
<blockquote>
<p>上表中的后缀<code>_raw</code>代表未经处理的数据、后缀<code>_win</code>代表缩放法处理的数据、后缀<code>_mad</code>代表mad法处理的数据。</p>
</blockquote>
<p>从上表可见各排名截断下，均值、中位数、标准差均是
<code>raw &gt; win &gt; mad</code>。</p>
<h4 id="对收益率进行异常值处理不合理">对收益率进行异常值处理不合理</h4>
<p>仅仅作出汇总统计表很不直观，且考虑到各组净值的量级差异太大不便直接对比观察，故作出对数净值图，如下：</p>
<figure>
<img src="等权重加权对数净值走势图.jpg" alt="等权重加权对数净值走势图">
<figcaption aria-hidden="true">等权重加权对数净值走势图</figcaption>
</figure>
<p>发现仍然不能很好的观察区分，因而按照排名数进行分组对比。</p>
<p>排名前100的对数净值走势对比如下：</p>
<figure>
<img src="前100等权重加权对数净值走势图.jpg" alt="前100等权重加权对数净值走势图">
<figcaption aria-hidden="true">前100等权重加权对数净值走势图</figcaption>
</figure>
<p>前300如下：</p>
<figure>
<img src="前300等权重加权对数净值走势图.jpg" alt="前300等权重加权对数净值走势图">
<figcaption aria-hidden="true">前300等权重加权对数净值走势图</figcaption>
</figure>
<p>前500：</p>
<figure>
<img src="前500等权重加权对数净值走势图.jpg" alt="前500等权重加权对数净值走势图">
<figcaption aria-hidden="true">前500等权重加权对数净值走势图</figcaption>
</figure>
<p>前1000：</p>
<figure>
<img src="前1000等权重加权对数净值走势图.jpg" alt="前1000等权重加权对数净值走势图">
<figcaption aria-hidden="true">前1000等权重加权对数净值走势图</figcaption>
</figure>
<p>前2000：</p>
<figure>
<img src="前2000等权重加权对数净值走势图.jpg" alt="前2000等权重加权对数净值走势图">
<figcaption aria-hidden="true">前2000等权重加权对数净值走势图</figcaption>
</figure>
<p>全数据：</p>
<figure>
<img src="全数据等权重加权对数净值走势图.jpg" alt="全数据等权重加权对数净值走势图">
<figcaption aria-hidden="true">全数据等权重加权对数净值走势图</figcaption>
</figure>
<p>可见进行收益率异常值处理会导致投资组合结果严重失真。后续研究只采用没有进行收益率异常值处理的数据，并去掉后缀<code>_raw</code>。</p>
<h4 id="等权重加权的表现">等权重加权的表现</h4>
<p>后续不采用收益率异常值处理过的数据进行投资组合研究。各排名组合的对比走势图如下：</p>
<figure>
<img src="各排名等权重加权对数净值.jpg" alt="各排名等权重加权对数净值">
<figcaption aria-hidden="true">各排名等权重加权对数净值</figcaption>
</figure>
<p>可见在等权重加权下，全量数据（经过市值、交易量过滤）投资组合表现最好，且排名选择的范围越大越好、即用来作为组合的排名数越大收益越高。</p>
<p>加入了比特币作为对比的净值分段走势如下：</p>
<figure>
<img src="等权重加权各组净值分年走势.jpg" alt="等权重加权各组净值分年走势">
<figcaption aria-hidden="true">等权重加权各组净值分年走势</figcaption>
</figure>
<p>可见通过等权重加权方式构建的投资组合与比特币的走势具有很强的相关性，各市值排名组合的表现好于比特币，这意味着加密市场具有很好的投资机会可供挖掘。</p>
<p>我们作出各投资组合与比特币收益率之间的相关性，如下：</p>
<figure>
<img src="等权重加权下各排名组合及btc的相关性.jpg" alt="等权重加权下各排名组合及btc的相关性">
<figcaption aria-hidden="true">等权重加权下各排名组合及btc的相关性</figcaption>
</figure>
<p>从相关性数值上证明了btc与各组合间具有很强的相关性。</p>
<p>市值排名前300、500、1000、2000及不进行市值排名过滤的组合效果差别不大。</p>
<h3 id="市值加权">市值加权</h3>
<p>由于市值的限制，我们实际上应用等权重加权进行投资组合的可能性很低，市值排名越靠后的币种的资金容量越有限，较大资金不太容易买卖。故市值加权更具有可投资性。</p>
<p>某一交易日<span class="math inline">\(t\)</span>的截面上，市值加权收益率的计算如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq6}
rtn_{mkt}^t=\sum_{i}^{N^{t-1}}
\frac{mkt_i^{t-1}}{\sum_{i}^{N^{t-1}}mkt_i^{t-1}}*rtn_i^t
\end{equation}\]</span></p>
<p>上式中<span class="math inline">\(N^{t-1}\)</span>代表的上一交易日结束时的币种数量。市值<span class="math inline">\(mkt\)</span>与收益率<span class="math inline">\(rtn\)</span>之间有1期的偏差，即利用上一期的市值进行加权获得当期的收益率。</p>
<p>市值加权各组的对数净值表现如下：</p>
<figure>
<img src="市值加权对数净值走势图.jpg" alt="市值加权对数净值走势图">
<figcaption aria-hidden="true">市值加权对数净值走势图</figcaption>
</figure>
<p>对数净值走势非常接近。作出净值分段时序图，如下：</p>
<figure>
<img src="市值加权各组净值分年走势.jpg" alt="市值加权各组净值分年走势">
<figcaption aria-hidden="true">市值加权各组净值分年走势</figcaption>
</figure>
<p>收益率相关性热图如下：</p>
<figure>
<img src="市值加权下各排名组合及btc的相关性.jpg" alt="市值加权下各排名组合及btc的相关性">
<figcaption aria-hidden="true">市值加权下各排名组合及btc的相关性</figcaption>
</figure>
<p>可见市值加权下，各排名组合的相关性非常高、接近1，且都与btc的相关性高达0.96以上。</p>
<p>市值排名前100、300、500、1000、2000及不进行市值排名过滤的组合效果差别不大，均可作为市场因子的代理。</p>
<h4 id="剔除btc的市场组合">剔除BTC的市场组合</h4>
<p>上文讨论了市值加权下各排名组合的相关性情况，可以看出在加密市场中，btc也是一个很好的市场因子代理变量。即然比特币可以作为市场代理，那么加密市场除了比特币之外的其他币种的组合又是什么样子呢？我们将btc从投资组合中剔除，观察不包含btc的市值加权组合情况，并将它们与btc进行对比。</p>
<p>首先作出对数净值走势，如下：</p>
<figure>
<img src="不含btc的各排名市值加权及btc对数净值走势.jpg" alt="不含btc的各排名市值加权及btc对数净值走势">
<figcaption aria-hidden="true">不含btc的各排名市值加权及btc对数净值走势</figcaption>
</figure>
<p>分段走势：</p>
<figure>
<img src="不含btc的各排名市值加权及btc净值分段.jpg" alt="不含btc的各排名市值加权及btc净值分段">
<figcaption aria-hidden="true">不含btc的各排名市值加权及btc净值分段</figcaption>
</figure>
<p>相关性热图：</p>
<figure>
<img src="不含btc的各排名市值加权及btc相关性.jpg" alt="不含btc的各排名市值加权及btc相关性">
<figcaption aria-hidden="true">不含btc的各排名市值加权及btc相关性</figcaption>
</figure>
<p>由净值及相关性可见，除去btc后的各组间的相关性仍然很高，且收益率与btc具有较高的正相关性。</p>
<p>这与人们普遍感觉到的加密市场同涨同跌的现象很符合。</p>
<h2 id="总结">总结</h2>
<h3 id="本文回顾">本文回顾</h3>
<p>本文进行了如下工作：</p>
<ol type="1">
<li>分析了全加密市场的收益率情况，列举了一些异常收益率的情况；</li>
<li>进行了市值与交易量过滤，将交易量及市值过低的币种去掉，得出了市值排名前100、300、500、1000、2000及全量数据（进行了交易量、市值过滤）的潜在投资组合数据集，且尝试进行收益率的异常值处理；</li>
<li>在等权重加权下，发现处理后的数据与原数据组合表现的差异很大，故不能对收益率进行异常值处理；</li>
<li>进行了等权重加权构建市场组合，发现除排名前100之外的其他组合之间的相关性非常高、接近1；加上btc之后，发现所有投资组合之间的正相关性很高，且选用的排名越大、相较于btc的表现越好；</li>
<li>进行了市值加权构建市场组合，发现各排名组合之间的相关性非常高，且均与btc具有很高的相关性，故可以将比特币作为市场代理变量；</li>
<li>进一步将比特币从市值加权投资组合中剔除，发现各排名组合之间的相关性仍然很高，且仍与btc具有较高的正相关性。</li>
</ol>
<h3 id="重要结论">重要结论</h3>
<p>本文说明比特币本身就可以作为全加密市场、市场因子的很好代理。</p>
<p>如需进一步精确，采用市值排名前300、500、1000、2000或全量数据作为市场因子代理的效果差不多。</p>
<h3 id="声明">声明</h3>
<p>本文涉及到很多技术细节，略显乏味，希望能供对加密市场感兴趣的研究人员参考，不构成投资建议。</p>
<p>谢谢阅读！</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>加密货币</tag>
        <tag>因子投资</tag>
        <tag>bitcoin</tag>
      </tags>
  </entry>
  <entry>
    <title>pycharm重装打不开的问题</title>
    <url>/2023/09/19/pycharm%E9%87%8D%E8%A3%85%E6%89%93%E4%B8%8D%E5%BC%80%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>安装过<code>BetterIntelliJ</code>破解插件，使用的mac
m1电脑，重装最新版pycharm专业版后不能打开。</p>
<span id="more"></span>
<h2 id="背景介绍">背景介绍</h2>
<p>之前贪便宜，安装过pycharm破解版，由于其一直报错、且经常不明原因的崩溃，故想升级系统、购买正版的证书。</p>
<p>在网上一查，发现之前安装的破解程序居然有病毒！！考虑到本人Mac中保存着很多重要文件，有点后怕。由于直接安装了、没有先对<code>BetterIntelliJ</code>插件进行卸载，导致重装后，mac
m1始终不能正常打开pycharm，弹出一个带有脏字的错误的弹窗。</p>
<p>网上找了很久，才最终解决该问题。</p>
<h2 id="解决办法">解决办法</h2>
<p>首先在<code>访达 -&gt; 应用程序</code>中找到新安装的<code>PyCharm</code>，右击选择<code>显示包内容</code>进入<code>Contents -&gt; MacOS</code>找到可运行的<code>pycharm</code>程序，双击打开，弹出终端程序自动运行，会显示出具体的错误。</p>
<p>通过终端显示的日志，可见是由于<code>BetterIntelliJ</code>导致的，<code>PyCharm</code>在运行前会运行一个叫<code>pycharm.vmoptions</code>的配置文件，按照目录找到该文件，打开可见里面就是指定了运行上述插件。我的是在<code>~/Library/Application Support/JetBrains/PyCharm2023.2</code>里面，删除之：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/Library/Application\ Support/JetBrains/PyCharm2023.2</span><br><span class="line"><span class="built_in">rm</span> -rf pycharm.vmoptions</span><br><span class="line"><span class="built_in">rm</span> -rf plugins/BetterIntelliJ</span><br></pre></td></tr></table></figure>
<p>然后在用户根目录下找到<code>BetterIntelliJ</code>插件，该插件为隐藏文件，如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">ls</span> -a</span><br><span class="line"><span class="built_in">rm</span> -rf .betterIntelliJ</span><br></pre></td></tr></table></figure>
<p>上面的最后一行文件名我有些记不清了，大概是这样的名字。按照上述方法肯定可以找到。</p>
<p>然后重启<code>PyCharm</code>即可跳到正常激活页面。</p>
<p>激活后发现新版本功能多了好多，花了钱的就是好。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>PyCharm</tag>
      </tags>
  </entry>
  <entry>
    <title>由比特币已实现价格进行的一些推理</title>
    <url>/2023/09/25/%E7%94%B1%E6%AF%94%E7%89%B9%E5%B8%81%E5%B7%B2%E5%AE%9E%E7%8E%B0%E4%BB%B7%E6%A0%BC%E8%BF%9B%E8%A1%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8E%A8%E7%90%86/</url>
    <content><![CDATA[<p>本文首先介绍了一些比特币早期价格的历史；接着分析了比特币对数价格（<span class="math inline">\(logP\)</span>）与对数供给量（<span class="math inline">\(logS\)</span>）可能的一些回归关系；然后总结了历史上的3次减半规律；进而对总结的规律进行极值建模；最后运用汇总的规律及构建的模型，对下一次减半周期几个极值（最低价、减半价、最高价）和对应的时间范围进行了一些推测。</p>
<span id="more"></span>
<h2 id="引言">引言</h2>
<p>比特币神话般的价格涨幅，一直是投资界引人入胜的故事。那么，比特币早期价格是怎样的呢？本文第一部分简要回顾了一些btc交易的早期历史。</p>
<p>在做出比特币历史对数价格曲线后，忍不住会有对它进行回归建模的冲动，本文第二部分即尝试了这方面的工作。</p>
<p>4年的减半周期，对比特币价格有很重大的影响，这似乎成了加密投资圈的共识。那么，减半是否有某些定量的规律呢？本文第三部分分析了过去3次减半，汇总了一些重要的统计值，归纳出了一些规律。</p>
<p>在得出了历史减半规律后，本文第四部分对两个重要的极值进行了建模。</p>
<p>有了价格拟合模型、减半规律以及极值模型后，本文在第五部分对即将到来的新减半周期进行一些合理的推测，推算了下一轮减半周期的几个重要价格及对应的大致时间情况。</p>
<p>当然，限于样本量少及其他随机因素，本文只是对可能存在的一些规律的简单猜测，动机仅为了好玩，不构成投资建议。</p>
<h2 id="比特币早期价格">比特币早期价格</h2>
<p>本文先从比特币交易价格说起。</p>
<p>比特币诞生于2009-01-03，已知最早的价格，是由比特币第二位开发者<a href="https://twitter.com/marttimalmi?s=21&amp;t=r1CX6-KmGvZWwI5I3aeLNQ">Martti
Malmi</a>（网名Sirius）在2009-10-12发起的，他用5050个比特币换到了<span class="math inline">\(\$5.02\)</span>，每个比特币价格约为<span class="math inline">\(\$0.000994\)</span>，不足十分之一美分。可以参见推特（<a href="https://twitter.com/marttimalmi/status/423455561703624704?s=61&amp;t=jVERnELxYp8IK7gfE_8KnA">Martti
Malmi发起第一笔比特币兑美元交易</a>），对应的区块链交易记录（<a href="https://www.blockchain.com/explorer/transactions/btc/7dff938918f07619abd38e4510890396b1cef4fbeca154fb7aafba8843295ea2">首个价格交易记录</a>）。</p>
<p>不过这个事件知道的人不太多，更广为人知的是<a href="https://en.bitcoinwiki.org/wiki/Laszlo_Hanyecz">比特币披萨事件</a>。</p>
<p>2010-05-18，美国弗罗里达州的程序员Laszlo Hanyecz在<a href="https://bitcointalk.org">比特币论坛</a>上发布了一篇名为<a href="https://bitcointalk.org/index.php?topic=137.0"><code>Pizza for bitcoins?</code></a>的帖子，他想用1万个比特币购买价值约25美元的2个披萨，折合每个比特币<span class="math inline">\(\$0.0025\)</span>。经过4天多的时间，他证实了该交易已经顺利完成。这是人们第一次可以用比特币购买真实商品，这个事件被比特币爱好者纪念，从此每年的5月22日成为“比特币披萨节”。</p>
<p>其实在比特币披萨事件之前，已经有了一个名为<a href="https://en.bitcoin.it/wiki/Bitcoin_Market"><code>bitcoinmarket.com</code></a>的比特币交易网站。</p>
<p>该网站由<a href="https://bitcointalk.org/index.php?action=profile;u=24">dwdollar</a>开发建立，参见比特币论坛<a href="https://bitcointalk.org/index.php?topic=20.0">相关帖子</a>。2010-03-16，该网站开始用真实的美元交易比特币，dwdollar将比特币的初始价格定在<span class="math inline">\(\$0.0067/BC\)</span>。次日（2010-03-17）正式上线，有4人开始在线交易比特币，开始交易的价格大概为<a href="https://www.cryptohopper.com/blog/what-was-the-first-crypto-exchange-449"><span class="math inline">\(\$0.003\)</span></a>。该网站主要利用PayPal进行交易，由于欺诈的盛行，Paypal于2011-06-04停止了对<code>bitcoinmarket</code>的支持，导致了用户转向其他交易所，其中最著名的就是<a href="https://en.wikipedia.org/wiki/Mt._Gox"><code>Mt.Gox</code></a>，该网站于2010-07-18出现在比特币论坛，<a href="https://bitcointalk.org/index.php?topic=444.0">见此处</a>。</p>
<p>关于早期价格的情况不太好追溯，好在<a href="https://coinmarketcap.com/currencies/bitcoin/">coinmarketcap</a>上收录了自2010-07-13日以来的比特币价格数据，本篇文章的讨论便是基于这些数据进行。</p>
<p>本文重点讨论的是比特币的价格及周期，首先讨论比特币价格的某种可能回归。</p>
<blockquote>
<p>说明：本文数据截止到2023-09-24日。</p>
</blockquote>
<h2 id="比特币的价格模型">比特币的价格模型</h2>
<h3 id="对数价格与对数供给量">对数价格与对数供给量</h3>
<p>比特币价格的波动范围很大，为了直观全面的观察其趋势，可以采用对数价格作图，如下：</p>
<figure>
<img src="20100713-20230924比特币对数价格时序图.jpg" alt="比特币对数价格时序图">
<figcaption aria-hidden="true">比特币对数价格时序图</figcaption>
</figure>
<p>直观上，比特币对数价格似乎符合某种函数的拟合。<a href="https://www.lookintobitcoin.com/charts/bitcoin-rainbow-chart/">比特币彩虹图</a>就是比特币对数价格与上线天数的某种回归。</p>
<p>比特币先后经历了3次减半，分别是2012-11-28、2016-07-09、2020-05-11。<a href="https://buybitcoinworldwide.com/halving/">据预测</a>，下一次减半日期大概在2024-04-16。</p>
<p>比特币每次减半之后，每个区块的产量会减半，最终比特币的数量约为21,000,000（实际略少于此值）。比特币历史总产量对数图如下：</p>
<figure>
<img src="20100713-20230924比特币对数供给量时序图.jpg" alt="比特币对数供给量图">
<figcaption aria-hidden="true">比特币对数供给量图</figcaption>
</figure>
<p>由上图可见，比特币的对数价格与对数总供给量之间具有相似的趋势，可以猜测比特币对数价格（<span class="math inline">\(logP\)</span>）是对数总供给量（<span class="math inline">\(logS\)</span>）的某种可解析函数。</p>
<h3 id="对数供给量多项式模型">对数供给量多项式模型</h3>
<p>本文在拟合前，有一个期望的极限，即：</p>
<blockquote>
<p>如比特币最终趋于稳定，并取代了美元成为本位币。则按照目前美元m2总量约<a href="https://zh.tradingeconomics.com/united-states/money-supply-m2">20.9万亿</a>折算，比特币的价格将接近100万美元/BTC。</p>
</blockquote>
<p>符合上述预期的拟合才是合理的。</p>
<p>由于可解析函数可以进行泰勒展开，故可用<span class="math inline">\(logS\)</span>的多项式展开来拟合<span class="math inline">\(logP\)</span>： <span class="math display">\[\begin{equation}\label{eq1}
logP=\sum_{i=0}^{n}\alpha_i(logS)^i
\end{equation}\]</span>
其中n为多项式的最高阶，是待定参数。毫无疑问随着n的增大，可以拟合得越好，本文假定n为较小的整数（10以内）。</p>
<p>n=1的拟合情况如下：</p>
<figure>
<img src="230924-比特币对数价格1阶拟合.jpg" alt="比特币对数价格1阶拟合">
<figcaption aria-hidden="true">比特币对数价格1阶拟合</figcaption>
</figure>
<p>可见拟合的效果很好，<span class="math inline">\(R^2\)</span>达到0.91，其中<span class="math inline">\(R^2\)</span>的定义如下： <span class="math display">\[\begin{equation}\label{eq2}
R^2=1-\frac{SS_{res}}{SS_{tot}}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}\label{eq3}
SS_{tot}=\sum_i(y_i-\bar{y})^2
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}\label{eq4}
SS_{res}=\sum_i(y_i-f_i)^2
\end{equation}\]</span></p>
<p><span class="math inline">\(f_i\)</span>为函数拟合的相应值。</p>
<p>由上图可知，一阶拟合下的回归关系为： <span class="math display">\[\begin{equation}\label{eq5}
logP=-131.5+8.4*logS
\end{equation}\]</span>
如果比特币对数价格与对数供给量符合上述的1阶拟合，则根据拟合，最终比特币价格约为<span class="math inline">\(\$26,974.33\)</span>，这似乎不让人满意。</p>
<p>n=2的拟合如下：</p>
<figure>
<img src="230924-比特币对数价格2阶拟合.jpg" alt="比特币对数价格2阶拟合">
<figcaption aria-hidden="true">比特币对数价格2阶拟合</figcaption>
</figure>
<p><span class="math inline">\(R^2\)</span>高达0.94，拟合结果如下：
<span class="math display">\[\begin{equation}\label{eq6}
\begin{aligned}
logP=&amp;750.85-101.07*logS+\\&amp;3.39*logS^2
\end{aligned}
\end{equation}\]</span></p>
<p>如果2阶拟合满足，则比特币最终价格约为<span class="math inline">\(\$70,070.92\)</span>。</p>
<p>n=3时，拟合效果如下：</p>
<figure>
<img src="230924-比特币对数价格3阶拟合.jpg" alt="比特币对数价格3阶拟合">
<figcaption aria-hidden="true">比特币对数价格3阶拟合</figcaption>
</figure>
<p><span class="math inline">\(R^2\)</span>为0.95，此时的拟合关系为：
<span class="math display">\[\begin{equation}\label{eq7}
\begin{aligned}
logP=&amp;-16643.2+3153.22*logS-\\&amp;199.43*logS^2+4.21*logS^3
\end{aligned}
\end{equation}\]</span></p>
<p>3阶的比特币最终预测价格为<span class="math inline">\(\$151,235.78\)</span>。</p>
<p>可见参数越多，<span class="math inline">\(R^2\)</span>越高，拟合效果越好，但也越可能是过拟合。</p>
<p>尝试到6阶，发现这种情况下的比特币最终价格预测最高，为<span class="math inline">\(\$954,987.44\)</span>，接近1百万美元。如果比特币能够替换美元的地位，其理论价格应该差不多为1百万美元。</p>
<p>6阶拟合的曲线如下：</p>
<figure>
<img src="230924-比特币对数价格6阶拟合.jpg" alt="比特币对数价格6阶拟合">
<figcaption aria-hidden="true">比特币对数价格6阶拟合</figcaption>
</figure>
<p>上图中的拟合公式如下： <span class="math display">\[\begin{equation}\label{eq8}
\begin{aligned}
logP=&amp;26.27*logS^6-2.52e3*logS^5+\\&amp;1.0e5*logS^4-2.14e6*logS^3+\\&amp;2.56e7*logS^2-1.63e8*logS+\\&amp;4.34e8
\end{aligned}
\end{equation}\]</span></p>
<p>其中系数采用了科学记数法，<span class="math inline">\(1.0e5\)</span>代表<span class="math inline">\(1.0\times10^5\)</span>。采用6阶拟合，我们可以做出未来的价格预期曲线，如下：</p>
<figure>
<img src="230924比特币对数价格6阶拟合未来走势.jpg" alt="比特币对数价格6阶拟合未来走势">
<figcaption aria-hidden="true">比特币对数价格6阶拟合未来走势</figcaption>
</figure>
<p>由上述拟合可见，目前比特币还处在较早期的阶段，其价格尚未到达趋于稳定的时候。大约在2042年之后，比特币价格会开始逐渐趋于稳定。</p>
<p>需要指出的是：</p>
<blockquote>
<ol type="1">
<li>影响比特币价格的因素可能有很多，本文只是对其中可能的一种进行了回归分析，可能有失偏颇；</li>
<li>多项式拟合的参数会对样本很敏感，随着未来价格的大幅变大或变小，再次拟合的曲线肯定会相应的变化。</li>
</ol>
</blockquote>
<p><strong>值得一提的是，按照对数供给量的多项式拟合，随着时间推移，比特币的供给量会趋于定值（具体为自2140年后不再减半），从而价格也会趋于某个定值。这与比特币创始的初衷相吻合，即按照当前价值不变的美元（实质上就是总美元M2量限定在约20万亿水平上）计算，最终比特币的价格会收敛，正如比特币的热爱者预期该价格会收敛于1百万美元/BTC那样。</strong></p>
<p><strong>之前的模型，如<a href="https://bitcointalk.org/index.php?topic=831547.0">彩虹图</a>所预言的价格（或对数价格）会以某种形式单调增长、直至永远，又如<a href="https://twitter.com/100trillionusd?s=21&amp;t=I28yqKWNbjQZue_4ZlkrLw">planB</a>的<a href="https://medium.com/@100trillionUSD/modeling-bitcoins-value-with-scarcity-91fa0fc03e25">S2F</a>预言的每轮减半价格涨幅约10倍。这些理论，均认为比特币价格会近乎无限上涨，显然与实际情况有悖。</strong></p>
<p><strong>本文与他们的结论不同，按照本文的拟合，比特币按当前美元价值计算，是存在极限价格的</strong>。</p>
<p>由于比特币的总供给量随着时间推移基本上是确定的，上述回归自然是对未来价格的一种预测。</p>
<p>更详细的推测需要参考重要的时间节点及牛熊涨跌幅等规律，故本文接下来分析比特币减半周期，再进行价格区间及时间跨度相关的推测。</p>
<h2 id="比特币周期">比特币周期</h2>
<p>为了划分出减半周期的阶段，需要先观察价格在逐年的表现，再根据表现划分出牛熊周期。</p>
<h3 id="逐年走势">逐年走势</h3>
<blockquote>
<p><font color="red">注：本小节只是想从价格逐年走势图分析牛熊大致区间，读者可以选择跳过，不影响后续阅读。后续需要对照行情可参考此节。</font></p>
</blockquote>
<p>每3年汇在一张图中，做出逐年的价格走势及基本统计指标，如下：</p>
<p>2010.7.13--2012.12.31价格走势：</p>
<figure>
<img src="20100713-20121231_btc_price.jpg" alt="10-12年BTC价格走势">
<figcaption aria-hidden="true">10-12年BTC价格走势</figcaption>
</figure>
<blockquote>
<p><font size="2"><em>注意上图中左上第一张为全3年时间段的价格走势，后续3张为逐年走势，下同。</em></font></p>
</blockquote>
<p>2013.01.01-2015.12.31价格走势：</p>
<figure>
<img src="20130101-20151231_btc_price.jpg" alt="13-16年btc价格">
<figcaption aria-hidden="true">13-16年btc价格</figcaption>
</figure>
<p>2016.01.01-2018.12.31价格走势：</p>
<figure>
<img src="20160101-20181231_btc_price.jpg" alt="16-18年btc走势">
<figcaption aria-hidden="true">16-18年btc走势</figcaption>
</figure>
<p>2019.01.01-2021.12.31走势：</p>
<figure>
<img src="20190101-20211231_btc_price.jpg" alt="19-21年btc价格走势">
<figcaption aria-hidden="true">19-21年btc价格走势</figcaption>
</figure>
<p>2022.01.01-2023.09.16走势：</p>
<figure>
<img src="20220101-20230916_btc_price.jpg" alt="22-23年btc价格走势">
<figcaption aria-hidden="true">22-23年btc价格走势</figcaption>
</figure>
<p>减半对应的牛熊周期一般需要经历完整的<code>盘整 -&gt; 启动 -&gt; 牛市 -&gt; 崩盘 -&gt; 熊市 -&gt; 盘整</code>过程。依照大约4年的周期，比特币历史减半周期大致可如下划分：</p>
<blockquote>
<ol type="1">
<li>2010.07.13 - 2015.05.01，对应2012.11.28日第一次减半的行情；</li>
<li>2015.01.01 - 2019.05.01，对应2016.07.09日第二次减半的行情；</li>
<li>2018.11.01 - 2023.03.01，对应2020.05.11日第三次减半的行情；</li>
<li>2022.10.01 -
今，对应约2024.04.16日第四次减半的行情，持续时间未知。</li>
</ol>
</blockquote>
<p>上述划分有重叠，是为了观察牛市启动前的最低价前和本轮周期最大回撤后的情况。</p>
<p>当然，上述划分不一定合理，毕竟23年之后的行情还没结束。</p>
<h3 id="减半周期">减半周期</h3>
<h4 id="四轮减半周期走势情况">四轮减半周期走势情况</h4>
<p>有了上面的划分，可以对应的做出每轮减半走势的图。</p>
<p>2010.07.13 - 2015.05.01第一轮走势：</p>
<figure>
<img src="第一轮牛熊比特币价格走势图.jpg" alt="第一轮牛熊比特币价格走势图">
<figcaption aria-hidden="true">第一轮牛熊比特币价格走势图</figcaption>
</figure>
<blockquote>
<p><font size="2" color="red"><em>注意：上图中的最大回撤出现在减半之前，不是后续讨论的减半后最大回撤。</em></font></p>
</blockquote>
<p>2015.01.01 - 2019.05.01第二轮走势：</p>
<figure>
<img src="第二轮牛熊比特币价格走势图.jpg" alt="第二轮牛熊比特币价格走势图">
<figcaption aria-hidden="true">第二轮牛熊比特币价格走势图</figcaption>
</figure>
<p>2018.11.01 - 2023.03.01第三轮走势：</p>
<figure>
<img src="第三轮牛熊比特币价格走势图.jpg" alt="第三轮牛熊比特币价格走势图">
<figcaption aria-hidden="true">第三轮牛熊比特币价格走势图</figcaption>
</figure>
<p>2022.10.01 - 今第四轮走势：</p>
<figure>
<img src="第四轮牛熊比特币价格走势图.jpg" alt="第四轮牛熊比特币价格走势图">
<figcaption aria-hidden="true">第四轮牛熊比特币价格走势图</figcaption>
</figure>
<h4 id="减半周期规律总结">减半周期规律总结</h4>
<p>本文定义如下一些概念：</p>
<blockquote>
<ul>
<li>行情启动：上一轮回撤的最低价格为行情启动价，该日为行情启动日，第一次减半也采用减半前的最大回撤作为行情启动点；</li>
<li>最高涨幅：本轮减半之后的最高价与行情启动价之比；</li>
<li>盘整期：在上一轮牛市结束后的最低价到本轮减半的最高价之间，持续时间最长的回视最高价（阻力位）对应的时间段；</li>
<li>牛市：衡量的为减半行情中的牛市，定义为盘整期结束到本轮最高价之间的时间段，类似2011年的上涨不在本定义内；</li>
<li>熊市：衡量的减半行情后的熊市，定义为本轮减半后，最高价到最大回撤之间的时间段；</li>
<li>最大回撤：指的是本轮减半后的最大回撤，即从减半后最高价到最低价的跌幅。</li>
</ul>
</blockquote>
<p>可以总结每轮牛熊的统计值，如下表：</p>
<blockquote>
<p><font size="2"><em>各减半周期统计总结表</em></font></p>
</blockquote>
<table>
<colgroup>
<col style="width: 26%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">第一轮减半</th>
<th style="text-align: center;">第二轮减半</th>
<th style="text-align: center;">第三轮减半</th>
<th style="text-align: center;">第四轮减半</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">减半日</td>
<td style="text-align: center;">2012-11-28</td>
<td style="text-align: center;">2016-07-09</td>
<td style="text-align: center;">2020-05-11</td>
<td style="text-align: center;">2024-04-16</td>
</tr>
<tr class="even">
<td style="text-align: center;">减半价</td>
<td style="text-align: center;">12.377</td>
<td style="text-align: center;">650.96</td>
<td style="text-align: center;">8601.796</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">减半预测价</td>
<td style="text-align: center;">33.736</td>
<td style="text-align: center;">1399.326</td>
<td style="text-align: center;">12895.33</td>
<td style="text-align: center;">76458.321</td>
</tr>
<tr class="even">
<td style="text-align: center;">减半预测真实价格比</td>
<td style="text-align: center;">2.726</td>
<td style="text-align: center;">2.15</td>
<td style="text-align: center;">1.499</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">行情启动日</td>
<td style="text-align: center;">2011-11-18</td>
<td style="text-align: center;">2015-01-14</td>
<td style="text-align: center;">2018-12-15</td>
<td style="text-align: center;">2022-11-21</td>
</tr>
<tr class="even">
<td style="text-align: center;">启动时距减半天数</td>
<td style="text-align: center;">376</td>
<td style="text-align: center;">542</td>
<td style="text-align: center;">513</td>
<td style="text-align: center;">512</td>
</tr>
<tr class="odd">
<td style="text-align: center;">启动价格</td>
<td style="text-align: center;">2.051</td>
<td style="text-align: center;">178.103</td>
<td style="text-align: center;">3236.762</td>
<td style="text-align: center;">15787.284</td>
</tr>
<tr class="even">
<td style="text-align: center;">盘整开始日</td>
<td style="text-align: center;">2011-12-05</td>
<td style="text-align: center;">2016-06-04</td>
<td style="text-align: center;">2019-05-14</td>
<td style="text-align: center;">NaT</td>
</tr>
<tr class="odd">
<td style="text-align: center;">盘整结束日</td>
<td style="text-align: center;">2012-06-29</td>
<td style="text-align: center;">2016-11-19</td>
<td style="text-align: center;">2020-09-10</td>
<td style="text-align: center;">NaT</td>
</tr>
<tr class="even">
<td style="text-align: center;">盘整最高价</td>
<td style="text-align: center;">228.199</td>
<td style="text-align: center;">766.308</td>
<td style="text-align: center;">13016.232</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">最高价格日</td>
<td style="text-align: center;">2013-12-04</td>
<td style="text-align: center;">2017-12-16</td>
<td style="text-align: center;">2021-11-08</td>
<td style="text-align: center;">NaT</td>
</tr>
<tr class="even">
<td style="text-align: center;">最高价格</td>
<td style="text-align: center;">1151.17</td>
<td style="text-align: center;">19497.4</td>
<td style="text-align: center;">67566.83</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">最高涨幅</td>
<td style="text-align: center;">561.261</td>
<td style="text-align: center;">109.473</td>
<td style="text-align: center;">20.875</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="even">
<td style="text-align: center;">最大回撤日</td>
<td style="text-align: center;">2015-01-14</td>
<td style="text-align: center;">2018-12-15</td>
<td style="text-align: center;">2022-11-21</td>
<td style="text-align: center;">NaT</td>
</tr>
<tr class="odd">
<td style="text-align: center;">最大回撤价</td>
<td style="text-align: center;">178.103</td>
<td style="text-align: center;">3236.762</td>
<td style="text-align: center;">15787.284</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="even">
<td style="text-align: center;">最大回撤</td>
<td style="text-align: center;">-0.845</td>
<td style="text-align: center;">-0.834</td>
<td style="text-align: center;">-0.766</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">启动到盘整结束天数</td>
<td style="text-align: center;">224</td>
<td style="text-align: center;">675</td>
<td style="text-align: center;">635</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="even">
<td style="text-align: center;">启动到最高价天数</td>
<td style="text-align: center;">747</td>
<td style="text-align: center;">1067</td>
<td style="text-align: center;">1059</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">盘整结束距减半天数</td>
<td style="text-align: center;">-152</td>
<td style="text-align: center;">133</td>
<td style="text-align: center;">122</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="even">
<td style="text-align: center;">盘整持续天数</td>
<td style="text-align: center;">207</td>
<td style="text-align: center;">168</td>
<td style="text-align: center;">485</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: center;">牛市持续天数</td>
<td style="text-align: center;">523</td>
<td style="text-align: center;">392</td>
<td style="text-align: center;">424</td>
<td style="text-align: center;">nan</td>
</tr>
<tr class="even">
<td style="text-align: center;">熊市持续天数</td>
<td style="text-align: center;">406</td>
<td style="text-align: center;">364</td>
<td style="text-align: center;">378</td>
<td style="text-align: center;">nan</td>
</tr>
</tbody>
</table>
<p>关于上表的一些说明：</p>
<blockquote>
<ol type="1">
<li>第四轮周期尚在进行中，没有完结，故数据有空缺。</li>
<li>减半预测值是根据第二部分的6阶模拟值计算所得，历史已发生的减半日价格低于该值。</li>
</ol>
</blockquote>
<p>从上表中可见如下有意思的结论（主要考虑最近两次已完成的减半周期）：</p>
<blockquote>
<ol type="1">
<li><strong>行情在减半前1年半（500多天）左右启动；</strong></li>
<li><strong>每轮减半的最高涨幅呈衰减的特点；</strong></li>
<li><strong>减半价格与预测价之间的差异越来越小；</strong></li>
<li><strong>每轮最大回撤呈现出变小的趋势；</strong></li>
<li><strong>从行情启动到减半后的最高值大约需要1000天（近3年）左右；
</strong></li>
<li><strong>行情启动到盘整结束需要600天左右；</strong></li>
<li><strong>最近两次减半，盘整结束于减半后约4个月之后；</strong></li>
<li><strong>牛市持续时间在1年以上；</strong></li>
<li><strong>熊市大约持续1年左右；</strong></li>
<li><strong>盘整持续时间至少在半年左右，可以长达1年以上。</strong></li>
</ol>
</blockquote>
<p>如上总结，比特币每轮周期都有很多相似的行情规律，且每轮的最高最低比、最大回撤均呈现减小趋势。不过，也需要指出的是，牛熊的划分方法有主观性、可以有很多种，周期本身也带有主观性。</p>
<h4 id="比特币波动性在减小">比特币波动性在减小</h4>
<p>为了验证比特币波动性确实是呈下降趋势的，可以做出比特币90日滚动年化波动率时序图，如下：</p>
<figure>
<img src="比特币90日滚动年化波动率.jpg" alt="比特币90日滚动年化波动率">
<figcaption aria-hidden="true">比特币90日滚动年化波动率</figcaption>
</figure>
<p>从上图可见，<strong>若按照减半周期来看，比特币的波动是呈减小趋势的</strong>，这与Nassim
Taleb所质疑的比特币波动性没有变小的结论不同（<a href="https://arxiv.org/pdf/2106.14204.pdf">参见此处</a>）。<strong>由此分析，我们可以合理的假定比特币价格最终会趋于稳定。</strong></p>
<p>上图还有一个有意思的现象：比特币90日滚动年化波动率多次下降到0.23附近的位置，随着时间的推移，波动率纵然有所下降，但似乎始终没有低于此值。附带一提，0.23的年化波动率水平是低于大多数股票波动率的。</p>
<h2 id="减半行情的极值建模">减半行情的极值建模</h2>
<p>上一小节总结了一些减半的规律，本节将对减半的两个极值（最高涨幅、最大回撤）进行分析。</p>
<p>当然，我们还可以对减半日价格、每轮周期的最高价、最低价进行建模。</p>
<p>但是，最高价与最低价实际上是可以用历史价格、最高涨幅和最大回撤递推；随着减半次数的增加，第二部分预测的价格与减半价格之间的差距缩小，可以用其（对数总供给量6阶拟合函数）对减半价进行预测。</p>
<p>故而，本小节只讨论2个极值。</p>
<h3 id="最高涨幅拟合">最高涨幅拟合</h3>
<p>中文比特币社区著名的九神（ahr999），曾撰写过《囤比特币》系列文章，在其“<a href="https://coxxa.github.io/bitcoin-ahr999-HODL/#/di-san-zhang?id=第三章-囤比特币：你离财富自由还有多远？">囤比特币：你离财富自由还有多远？</a>”一章中，提出一个很有意思的假设，即比特币每轮减半增长倍数呈线性或“指数递减”方式变化。</p>
<p>如减半周期与最高涨幅之间呈线性关系，则应满足如下关系： <span class="math display">\[\begin{equation}\label{eq9}
h_n=a+b*n
\end{equation}\]</span> 其中h代表本轮减半行情的最高涨幅，n=1, 2, 3, ...,
33为减半周期数，下同。</p>
<p>历史上发生过的3次减半行情最高涨幅与周期的线性拟合如下：</p>
<figure>
<img src="历史减半周期与最高涨幅线性回归.jpg" alt="历史减半周期与最高涨幅线性回归">
<figcaption aria-hidden="true">历史减半周期与最高涨幅线性回归</figcaption>
</figure>
<p>上图中x轴被替换成了日期，因为每个减半周期对应唯一的日期。虽然上图中的<span class="math inline">\(R^2\)</span>较好，因为样本太少，很难说周期与涨幅是否符合线性关系。</p>
<p>如认可比特币2140年之后趋于稳定，则减半周期与减半行情最高涨幅的线性拟合如下：</p>
<figure>
<img src="趋于稳定的减半周期与最高涨幅线性回归.jpg" alt="趋于稳定的减半周期与最高涨幅线性回归">
<figcaption aria-hidden="true">趋于稳定的减半周期与最高涨幅线性回归</figcaption>
</figure>
<p>可见此时线性拟合不是很合适。</p>
<p>下面考虑最高涨幅与周期呈指数衰减关系，即： <span class="math display">\[\begin{equation}\label{eq10}
h_n=a+b*e^{-c*n}
\end{equation}\]</span> 拟合效果如下：</p>
<figure>
<img src="减半周期与最高涨幅指数衰减拟合.jpg" alt="减半周期与最高涨幅指数衰减拟合">
<figcaption aria-hidden="true">减半周期与最高涨幅指数衰减拟合</figcaption>
</figure>
<p>图中的x轴也从周期被替换成了日期，这样方便对照日期。</p>
<p>上图<span class="math inline">\(R^2\)</span>接近1的原因在于：</p>
<ol type="1">
<li>样本太少，3参数的指数衰减可以很好的拟合4个最高涨幅；</li>
<li>样本的量级差异很大，作为分子的样本方差远远大于拟合值与真实值偏差的方差。</li>
</ol>
<p>指数衰减拟合结果显示，比特币价格趋于稳定后，最高涨幅小于1，这不合理，主要原因是样本太少。</p>
<p>为了避免量级引起的误判，可采用对数最高涨幅拟合。对数最高涨幅与减半周期的线性回归关系如下：
<span class="math display">\[\begin{equation}\label{eq11}
ln(h_n)=a+b*n
\end{equation}\]</span> 这一拟合的结果如下：</p>
<figure>
<img src="减半周期与对数最高涨幅线性回归.jpg" alt="减半周期与对数最高涨幅线性回归">
<figcaption aria-hidden="true">减半周期与对数最高涨幅线性回归</figcaption>
</figure>
<p>可见对数涨幅与周期之间的线性拟合的效果有所下降。由上图，直观感觉对数最高涨幅是随着周期增大指数衰减的，即有如下关系：
<span class="math display">\[\begin{equation}\label{eq12}
ln(h_n)=a+b*e^{-c*n}
\end{equation}\]</span> 拟合效果如下：</p>
<figure>
<img src="减半周期与对数最高涨幅指数衰减拟合.jpg" alt="减半周期与对数最高涨幅指数衰减拟合">
<figcaption aria-hidden="true">减半周期与对数最高涨幅指数衰减拟合</figcaption>
</figure>
<p>可见这一拟合效果非常好，不过原因也是用了3个参数来模拟4个样本。该拟合是否符合实际，有待未来的行情进行验证。</p>
<p>如将周期改为对数周期，进行如下关系的拟合： <span class="math display">\[\begin{equation}\label{eq13}
ln(h_n)=a+b*ln(n)
\end{equation}\]</span> 拟合结果如下：</p>
<figure>
<img src="对数减半周期与对数最高涨幅线性回归.jpg" alt="对数减半周期与对数最高涨幅线性回归">
<figcaption aria-hidden="true">对数减半周期与对数最高涨幅线性回归</figcaption>
</figure>
<p>可见对数最高涨幅与对数周期之间的线性回归效果很好，在压低了量级影响后，线性关系（2参数拟合4个样本）仍然很显著。</p>
<p>上述<span class="math inline">\(\eqref{eq11}\)</span>和<span class="math inline">\(\eqref{eq12}\)</span>的拟合都可以作为减半周期最高涨幅的模型，第四部分中我们选定对数最高涨幅与周期呈指数衰减的<span class="math inline">\(\eqref{eq12}\)</span>模型进行讨论。</p>
<p>下面拟合每轮周期的最大回撤。</p>
<h3 id="最大回撤拟合">最大回撤拟合</h3>
<p>仍然假定比特币价格最终会趋于稳定，即2140年之后的最大回撤接近1。</p>
<p>做出周期-最大回撤（绝对值）的附带线性回归的散点图，如下：</p>
<figure>
<img src="减半周期与最大回撤线性回归图.jpg" alt="减半周期与最大回撤线性回归图">
<figcaption aria-hidden="true">减半周期与最大回撤线性回归图</figcaption>
</figure>
<p>可见2参数的最大回撤线性拟合效果很好，我们可以将其作为最大回撤的拟合模型，即：
<span class="math display">\[\begin{equation}\label{eq14}
mdd_n=0.87-0.026*n
\end{equation}\]</span></p>
<p>如上式，预期减半周期的最大回撤线性减小，每一轮比上一轮减小0.026。</p>
<p>当然，随着未来样本量的增加，可进一步拟合模型参数，或更换其他函数进行拟合。</p>
<h2 id="关于下一次减半的推测">关于下一次减半的推测</h2>
<p>我们在上面第2部分详细讨论了价格模型，并采用<span class="math inline">\(\eqref{eq8}\)</span>进行价格模拟，在第4部分利用了第3部分总结的减半规律建立了极值模型<span class="math inline">\(\eqref{eq12}\)</span>和<span class="math inline">\(\eqref{eq14}\)</span>，有了这些模型基础，我们可以顺理成章的对接下来的减半周期进行推理。</p>
<p>由于已经发生的减半次数过少，本文的模型不可能太精确。故本节仅粗略的预测下一轮减半日的价格、减半后的最高价、最高价后出现最大回撤的价格等。</p>
<p>在本节的叙述中会对下一轮减半周期的过程进行部分推测性描述。</p>
<h3 id="减半日价格预测">减半日价格预测</h3>
<p>由于过去3次减半日的价格均低于预测价格，且预测价与实际价的比值呈减小趋势，最近的预测真实价格比为1.499，故可根据<span class="math inline">\(\eqref{eq8}\)</span>推测下次减半日（2024-04-16左右），价格会高于76,458.321/1.499，低于76,458.321，即：
<span class="math display">\[\begin{equation}\label{eq15}
P_{2024-04-16}\in[51006.21, 76458.321]
\end{equation}\]</span></p>
<p>这是纯粹按照上述逻辑预测的结果，当然这个预测值可能会有很大的误差，因为这一结论的得出有如下几个前提：</p>
<blockquote>
<ol type="1">
<li>价格模型在一定时间内符合真实情况，且下一轮减半日的随机效应不太大、不至于抵消掉价格模型预期的减半上涨；</li>
<li>预测值略高于真实值的效应仍然存在，不至于反转，且预测、真实价之比仍然呈减小趋势。</li>
</ol>
</blockquote>
<h3 id="减半后最高价格预测">减半后最高价格预测</h3>
<p>我们采用<span class="math inline">\(\eqref{eq12}\)</span>进行最高涨幅的预测。</p>
<p>由于每轮减半的行情启动均出现在减半前510天上下，故基本可以确定2024年减半行情已经于2022-11-21日左右启动了，启动价格为<span class="math inline">\(\$15,787.284\)</span>。</p>
<p>按照最高涨幅模型，下次减半的最高涨幅将达到9.33倍左右，从而最高涨幅对应的减半行情最高价在<span class="math inline">\(\$147,295.36\)</span>左右。</p>
<p>之前的减半行情启动到最高价约1050天来估计，最高价格出现在2025-10-06前后，据6阶模型预估2025-10-06日价格在<span class="math inline">\(\$114,395\)</span>左右。</p>
<p>过去盘整结束与行情启动间隔的天数大约在600天上下，按此规律，盘整结束的日期大约在2024-07-13左右。或者以减半后4个月（120天）来估计，大概在2024-08-14左右，盘整结束，正式进入牛市，并持续一年左右。</p>
<h3 id="减半后最大回撤预测">减半后最大回撤预测</h3>
<p>按照最大回撤线性模型<span class="math inline">\(\eqref{eq14}\)</span>，我们预期下次减半行情冲高后的最大回撤大约为0.763左右。</p>
<p>照以往规律，最大回撤距离最高价日期大概在1年（365天）左右，如最高价（<span class="math inline">\(\$147,295.36\)</span>）出现在2025-10-06前后，则下次减半后比特币经过1年多的上涨，最终价格会持续约1年左右的下跌，跌幅76.3%左右、价格下跌到<span class="math inline">\(\$34,909\)</span>左右，日期约在2026-10-06日前后。</p>
<p>至此，比特币的第4轮减半行情结束，开始新的一轮周期。</p>
<h2 id="致谢">致谢</h2>
<p>本文篇幅有些长，非常感谢你能耐心阅读到此。</p>
<p>希望本文能或多或少对你有一些帮助，不至于辜负你认真的思考与耐心的探索。</p>
<p>需要再次指出的是，本文中涉及的内容只是对未来的一种猜测，仅作参考，不构成投资建议，望读者自行斟酌。</p>
<p>谢谢阅读！</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>减半</tag>
        <tag>模型</tag>
      </tags>
  </entry>
  <entry>
    <title>可以在比特币上计算一切的BitVM</title>
    <url>/2023/10/10/%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%8A%E8%AE%A1%E7%AE%97%E4%B8%80%E5%88%87%E7%9A%84BitVM/</url>
    <content><![CDATA[<p>2023-10-09日<a href="https://twitter.com/robin_linus/">Robin
Linus</a>发布了关于BitVM的<a href="https://bitvm.org/bitvm.pdf">白皮书</a>，该白皮书称通过BitVM可以在比特币上计算一切。本文对这篇重要的文章做一些介绍和跟踪。限于能力，本文尚未完结。</p>
<span id="more"></span>
<h2 id="前言">前言</h2>
<p>限于能力，只能对我能理解的部分进行一些记录。主要着力在对该项目各方参与者的观点、解释进行汇总，方便读者理解该技术。</p>
<h2 id="白皮书内容理解">白皮书内容理解</h2>
<p>要真如该白皮书宣称那样，毫无疑问这将是比特币历史上的又一件大事件。</p>
<p>该文章没有介绍怎么实现在比特币上计算一切的技术细节，对该文的一些解释可参考Bob
Bodily的<a href="https://twitter.com/bobbodily/status/1711581484254192013?s=61&amp;t=BBePAmHuKE6Hb7kfWNa1KA">介绍</a>。该文章介绍了比特币的操作码可构成与非门（NAND），通过大量的与非门，可以组建图灵完备的计算机（参见<a href="https://github.com/woai3c/nand2tetris">从零开始构建现代计算机</a>），从而构建能计算一切的比特币虚拟机。</p>
<p>该白皮书（ TODO，待完成）</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>BitVM</tag>
      </tags>
  </entry>
  <entry>
    <title>acme.sh不能自动更新证书的问题</title>
    <url>/2023/10/12/acme-sh%E4%B8%8D%E8%83%BD%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E8%AF%81%E4%B9%A6%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>本文描述了一种使用<code>acme.sh</code>颁发的证书始终不能正常自动更新的问题，并记录了解决过程。</p>
<span id="more"></span>
<p>在服务器上使用了<code>acme.sh</code>来颁发ssl证书，按照<a href="https://github.com/acmesh-official/acme.sh/blob/master/README.md">官方指导</a>在用户<code>user1</code>根目录下安装了<code>acme.sh</code>，并在<code>root</code>用户下执行如下命令（如不在root下执行，会报提醒，建议到root下执行），成功颁发了证书：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/home/user1/.acme.sh/acme.sh --set-default-ca --server letsencrypt --issue -d test_domain.com --standalone --keylength ec-256 --force</span><br></pre></td></tr></table></figure>
<p>然后在<code>root</code>下执行了将证书安装到指定目录下的操作：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/home/user1/.acme.sh/acme.sh --install-cert -d test_domain.com --ecc \</span><br><span class="line">                          --fullchain-file /etc/v2ray/v2ray.crt \</span><br><span class="line">                          --key-file /etc/v2ray/v2ray.key \</span><br><span class="line">                          --reloadcmd <span class="string">&quot;systemctl reload nginx ; systemctl restart v2ray&quot;</span></span><br></pre></td></tr></table></figure>
<p>一切正常的话，按照官方所描述的，<code>crontab</code>中会每日自动检查证书是否需要<code>renew</code>，然后根据情况在快要到期时（<code>acme.sh</code>默认证书有效期为90天，到期前30天会自动更新。注意有效期最多只有90天，不能延长，<a href="https://letsencrypt.org/docs/faq/">参见此处</a>）更新。</p>
<p>但是在实际操作中，始终不能如预期正常更新证书。<code>user1</code>下检查定时任务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> crontab -l</span><br></pre></td></tr></table></figure>
<p>查看结果：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">48 0 * * * <span class="string">&quot;/home/user1/.acme.sh&quot;</span>/acme.sh --cron --home <span class="string">&quot;/home/user1/.acme.sh&quot;</span> &gt; /dev/null</span><br></pre></td></tr></table></figure>
<p>由于一直没找到原因，故每次到期后都需要手动更新证书：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ~/.acme.sh/acme.sh --renew -d test_domain.com --force --ecc --reloadcmd <span class="string">&quot;systemctl reload nginx ; systemctl restart v2ray&quot;</span></span><br></pre></td></tr></table></figure>
<p>上述命令执行在用户<code>user1</code>下。最后的参数是在执行后重启<code>nginx</code>和<code>v2ray</code>。</p>
<p>手动更新正常（这很奇怪，可能是因为在<code>root</code>与<code>user1</code>下都生成了证书，保留了两个目录下的参数与证书，并在根目录下生成证书时输入了错误的域名？检查发现<code>root</code>下也安装了<code>acme.sh</code>，将其卸载，并删除了<code>.acme.sh/</code>目录。）。</p>
<p>一直对<code>acme.sh</code>定时更新的工作流程，特别是为什么在<code>crontab</code>的定时任务里不需要传参的原因不是很理解，于是花了点时间检索，发现了<a href="https://github.com/acmesh-official/acme.sh/issues/3981">相关解答</a>。即在执行<code>--install-cert</code>后参数会保存，自动更新时调用之，故不需要在<code>crontab</code>中传参。</p>
<p>然后尝试直接<code>debug</code>执行更新操作：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;/home/user1/.acme.sh&quot;</span>/acme.sh --cron --home <span class="string">&quot;/home/user1/.acme.sh&quot;</span> --debug</span><br></pre></td></tr></table></figure>
<p>发现执行日志有如下内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Thu Oct 12 10:33:01 UTC 2023] ===Starting cron===</span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] Using config home:/home/user1/.acme.sh</span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] ACME_DIRECTORY=<span class="string">&#x27;https://acme.zerossl.com/v2/DV90&#x27;</span></span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] _stopRenewOnError</span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] _set_level=<span class="string">&#x27;2&#x27;</span></span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] di=<span class="string">&#x27;/home/user1/.acme.sh/*.*/&#x27;</span></span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] Not a directory, skip: /home/user1/.acme.sh/*.*/</span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] _error_level=<span class="string">&#x27;3&#x27;</span></span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] _set_level=<span class="string">&#x27;2&#x27;</span></span><br><span class="line">[Thu Oct 12 10:33:01 UTC 2023] ===End cron===</span><br></pre></td></tr></table></figure>
<p>从上述内容可见问题出现在参数配置文件目录出错，导致找不到<code>.acme.sh/*.*/</code>文件。这才意识到安装<code>acme.sh</code>脚本的目录是在<code>user1</code>根目录下，但是在申请证书是在<code>root</code>根目录下操作的。执行了：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> su -</span><br></pre></td></tr></table></figure>
<p>造成目录切换到了<code>root</code>根目录下，运行<code>--issue</code>域名的操作生成的文件直接保存在了<code>root</code>根目录下，即证书、配置的目录与脚本的目录不匹配。程序自动更新时在脚本目录<code>/home/user1/.acme.sh</code>下寻找不到所需的证书与参数，因而出错、忽略了。加上日志直接输到了<code>/dev/null</code>，故一直没找到原因。</p>
<p>修改<code>--home</code>后<code>debug</code>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;/home/user1/.acme.sh&quot;</span>/acme.sh --cron --home <span class="string">&quot;/root/.acme.sh&quot;</span> --debug</span><br></pre></td></tr></table></figure>
<p>发现结果显示包含如下内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Thu Oct 12 10:47:17 UTC 2023] di=<span class="string">&#x27;/root/.acme.sh/test_domain_ecc/&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] d=<span class="string">&#x27;test_domain.com_ecc&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] Using config home:/root/.acme.sh</span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] ACME_DIRECTORY=<span class="string">&#x27;https://acme.zerossl.com/v2/DV90&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] DOMAIN_PATH=<span class="string">&#x27;/root/.acme.sh/test_domain.com_ecc&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] Renew: <span class="string">&#x27;test_domain.com&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] Le_API=<span class="string">&#x27;https://acme-v02.api.letsencrypt.org/directory&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] Using config home:/root/.acme.sh</span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] ACME_DIRECTORY=<span class="string">&#x27;https://acme-v02.api.letsencrypt.org/directory&#x27;</span></span><br><span class="line">[Thu Oct 12 10:47:17 UTC 2023] Skip, Next renewal <span class="keyword">time</span> is: Mon Dec 11 09:52:50 UTC 2023</span><br></pre></td></tr></table></figure>
<p>显然，这次脚本成功检查了证书的有效期，并跳过了不需要更新的证书。可判断这回脚本能够正确运行了。</p>
<p>在<code>root</code>下修改<code>crontab</code>中的任务：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<p>将<code>--home</code>参数后的目录修改一下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">48 0 * * * <span class="string">&quot;/home/user1/.acme.sh&quot;</span>/acme.sh --cron --home <span class="string">&quot;/root/.acme.sh&quot;</span> &gt; /dev/null</span><br></pre></td></tr></table></figure>
<p>即可正常自动更新了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>acme.sh</tag>
      </tags>
  </entry>
  <entry>
    <title>比特币S2F模型还适用吗</title>
    <url>/2023/10/17/%E6%AF%94%E7%89%B9%E5%B8%81S2F%E6%A8%A1%E5%9E%8B%E8%BF%98%E9%80%82%E7%94%A8%E5%90%97/</url>
    <content><![CDATA[<p>在上轮比特币减半（2020-05-11减半）周期中，<a href="https://twitter.com/100trillionusd/">PlanB</a>的<a href="https://medium.com/@100trillionUSD/modeling-bitcoins-value-with-scarcity-91fa0fc03e25">S2F模型</a>扮演了非常重要的角色，<a href="https://charts.bitbo.io/stock-to-flow/">该模型预测</a>的比特币价格在牛市启动、牛市上涨冲高阶段有着非凡的表现。虽然其对最终上涨价格预测失败了，但瑕不掩瑜，它依然揭示了部分潜在的规律。本文对该模型进行批判性的继承，并解释了为什么S2F模型基本等价于<a href="https://btcrainmaker.com/2023/09/25/由比特币已实现价格进行的一些推理/#对数供给量多项式模型">对数供给量多项式模型</a>的1阶情况；最后尝试在PlanB的基础上进一步讨论稀缺性与市值的关系。</p>
<span id="more"></span>
<h2 id="s2f模型的不足">S2F模型的不足</h2>
<p>正如我之前的文章所指出的（参见<a href="https://btcrainmaker.com/2023/09/25/由比特币已实现价格进行的一些推理/#比特币的价格模型">比特币的价格模型</a>一节），按照S2F模型，比特币会无限上涨。更量化的，每4年减半一次都上涨接近10倍，没有尽头。特别是当比特币增量为0后（2140年后），按照S2F模型，<span class="math inline">\(stock/flow\)</span>会变为无穷大。按该模型预测，比特币的市值会趋于无穷大。</p>
<p>众所周知，目前美元m2总量才21万亿左右，只要美元的计价地位不变（美元仍为本位货币），则比特币的市值不应该超过21万亿美元太多。</p>
<p>PlanB的原始模型显然没有考虑这一限制，特别是其对涨幅衰减效应的欠考虑，引起模型与真实情况的偏离，最终导致预测上轮（对应2020-05-11减半）牛市的价格区间出错。这是该模型最大的一个不足之处。</p>
<p>另外，该模型还进行了跨市场的验证，其中包含了黄金和白银等，得出S2F越大则市值越大的结论。照此推论，黄金的S2F值高于美元，那么为什么黄金的市值低于美元？这显然也不合理。</p>
<p>最后，近年来大为流行的NFT产品，具有唯一性，这类产品的S2F理论上应该趋于无穷大，但现实中只有极少数NFT产品卖出了天价，这显然也与S2F模型所描述的规律不一样。</p>
<h2 id="s2f简化模型建模">S2F简化模型建模</h2>
<p>本节对S2F模型做了一些简化处理，得出与原始版本相当的结论。</p>
<p>首先，与原文的方式不同，本文存量（stock）采用如下更简单的方式计算：</p>
<p><span class="math display">\[\begin{equation}\label{eq1}
stock_i=market\_cap_i/close_i
\end{equation}\]</span></p>
<p>其中i代表第i个交易日，下同。下文用<span class="math inline">\(M\)</span>代表市值、<span class="math inline">\(S\)</span>代表存量。另外，本文的数据采用日频数据，而非原本S2F模型的月度数据。</p>
<p>流通量（flow）与PlanB的定义也不同，不采用年化的产量，而直接采用日产量（即stock的增量），计算方法如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq2}
flow_i=\Delta S_i=S_i-S_{i-1}
\end{equation}\]</span></p>
<p>这种直接计算存量、流通量的方法更简单，理论上与原版模型只有常数（会略微有一点随机偏差）差异。</p>
<p>有了存量、流通量后，自然有：</p>
<p><span class="math display">\[\begin{equation}\label{eq3}
S2F_i=S_i/flow_i
\end{equation}\]</span></p>
<p>如上计算出<span class="math inline">\(S2F\)</span>后，先观察未进行处理的对数<span class="math inline">\(S2F\)</span>值、即<span class="math inline">\(log(S2F)\)</span>（简计为<span class="math inline">\(logS2F\)</span>）与对数市值<span class="math inline">\(log(M)\)</span>（简记<span class="math inline">\(logM\)</span>）的走势图，如下：</p>
<figure>
<img src="logM与logS2F未处理走势图.jpg" alt="logM与logS2F未处理走势图">
<figcaption aria-hidden="true">logM与logS2F未处理走势图</figcaption>
</figure>
<p>可见有不少异常数据。采用如下mad法来处理异常值：</p>
<blockquote>
<p>采用中位数绝对偏差法（mad法），选择1月滚动回视窗口，即<span class="math inline">\(window=30\)</span>，将与中位数（滚动median值）偏差超过3倍mad值的数值视为异常值，采用滚动<span class="math inline">\(median\pm
3*mad\)</span>值替换异常值，即超出上限的用上限替换、超出下限的用下限替换。</p>
</blockquote>
<p>其中mad值的计算如下：</p>
<p><span class="math display">\[\begin{equation}\label{eq4}
mad=median(abs(X-median(X))
\end{equation}\]</span></p>
<p>采用上述方法、会将减半日的<span class="math inline">\(logS2F\)</span>跳跃效应延迟，在滞后约<span class="math inline">\(window/2=15\)</span>期后才会过渡到真实的<span class="math inline">\(logS2F\)</span>值。这一处理无伤大雅，不妨碍揭示出<span class="math inline">\(logS2F\)</span>与<span class="math inline">\(logM\)</span>的关系。</p>
<p>做了异常值处理的<span class="math inline">\(logS2F\)</span>与<span class="math inline">\(logM\)</span>走势对比如下：</p>
<figure>
<img src="logM与logS2F进行异常值处理后的走势图.jpg" alt="logM与logS2F进行异常值处理后的走势图">
<figcaption aria-hidden="true">logM与logS2F进行异常值处理后的走势图</figcaption>
</figure>
<p>可见减半日附近的<span class="math inline">\(logS2F\)</span>跳跃效应依然存在，曲线中的异常值被很好的处理了。下文中均采用处理过的<span class="math inline">\(logS2F\)</span>来建模及讨论。</p>
<p>先做出<span class="math inline">\(logS2F\)</span>与<span class="math inline">\(logM\)</span>的线性回归图：</p>
<figure>
<img src="logM与异常值处理后的logS2F线性回归图.jpg" alt="logM与异常值处理后的logS2F线性回归图">
<figcaption aria-hidden="true">logM与异常值处理后的logS2F线性回归图</figcaption>
</figure>
<p>图中的线性关系为：</p>
<p><span class="math display">\[\begin{equation}\label{eq5}
logM=-4.55+3.21*logS2F
\end{equation}\]</span></p>
<p>这一拟合结果与PlanB的结果非常相近（参见<a href="https://medium.com/@100trillionUSD/modeling-bitcoins-value-with-scarcity-91fa0fc03e25">此处</a>），他得到的系数为3.32。故本文采用的简单计算方式与原文的计算方式区别不大。</p>
<p>从上图可以很明显的观察到：对应3次减半形成的4个时间区域，<span class="math inline">\(logS2F\)</span>数据形成了4个区分明显的阶梯。随着<span class="math inline">\(logS2F\)</span>的增大、对应减半次数的增加，<span class="math inline">\(logS2F\)</span>与<span class="math inline">\(logM\)</span>的波动范围在缩小，波动性呈下降趋势。</p>
<p>不管从哪种意义上来说，上图的结果都是让人震惊的。与原文采用月频数据（111个样本）不同，本文在考虑了包含最新数据的日频数据（样本更多，共4826个样本）、且更改了计算方法后，仍可得出如下结论：</p>
<blockquote>
<p><font color="red"><strong>在目前阶段，线性的S2F模型依然可以作为价格规律的一个比较有效的近似。</strong></font></p>
</blockquote>
<p>但仍然需要指出的是，在<span class="math inline">\(logS2F\)</span>的最右侧区域（对应的是2020-05-11减半之后的数据），阶梯上升有减小的趋势，如我在2023-09-25所写的<a href="https://btcrainmaker.com/2023/09/25/由比特币已实现价格进行的一些推理/#引言">文章</a>所指出的那样。</p>
<p>由于减半次数太少（只发生了3次），这意味着目前有效的自变量变化范围尚且太小，线性拟合可以是很多种函数在局部区域的近似，并不能断言<span class="math inline">\(logM\)</span>与<span class="math inline">\(logS2F\)</span>两者就是线性关系。</p>
<h2 id="s2f模型与多项式拟合的关系">S2F模型与多项式拟合的关系</h2>
<p>下面我将讨论S2F模型与对数供给量多项式价格模型（参见<a href="https://btcrainmaker.com/2023/09/25/由比特币已实现价格进行的一些推理/#比特币的价格模型">此处</a>）的关系，得出多项式模型是对S2F模型的批判性继承的结论。</p>
<p>我们将<span class="math inline">\(flow\)</span>简计为<span class="math inline">\(F\)</span>，S2F模型可以一般的表达为：</p>
<p><span class="math display">\[\begin{equation}\label{eq6}
\begin{aligned}
logM &amp; =a+b*logS2F\\ &amp;=a+b*(logS-logF)\\
&amp;=a+b*(logS-log\Delta S)
\end{aligned}
\end{equation}\]</span></p>
<p>其中<span class="math inline">\(\Delta S\)</span>是<span class="math inline">\(S\)</span>的一阶小量，有如下特点：</p>
<ol type="1">
<li>随着减半次数的进一步增加<span class="math inline">\(\Delta
S\)</span>会变得越来越小，直至减半终结而趋于0；</li>
<li>在<span class="math inline">\(\Delta S&gt;1\)</span>时，<span class="math inline">\(log\Delta
S\)</span>会随着减半次数增加而单调递减，对应的<span class="math inline">\(logS\)</span>项则会越来越大，此时<span class="math inline">\(log\Delta
S\)</span>项的影响随着减半增加会越来越低，可作为微扰项，将其忽略影响不大；</li>
<li>当<span class="math inline">\(\Delta S&lt;1\)</span>时，<span class="math inline">\(log\Delta
S\)</span>会随着减半次数的进一步增加而变为负数、其绝对值越来越大、最终趋于无穷。此时该项的影响会超过<span class="math inline">\(logS\)</span>项，且其引入了与真实情况有悖的不可解释的效应，这些效应只在减半快要结束时才出现、并没有现实支撑。明显是不合理的，此时更应将该项舍弃；</li>
</ol>
<p>如上分析，<span class="math inline">\(\eqref{eq6}\)</span>最后的<span class="math inline">\(log\Delta
S\)</span>项在减半周期较小时才有意义，将其舍弃后模型才更合理。</p>
<p>结合市值的定义，上式可以如下转换：</p>
<p><span class="math display">\[\begin{equation}\label{eq7}
\begin{aligned}
log(S*P)  &amp;=a+b*logS \\ \Rightarrow logS+logP &amp;= a+b*logS \\
\Rightarrow logP &amp;=a+(b-1)*logS \\ \Rightarrow
logP&amp;=a+b&#39;*logS
\end{aligned}
\end{equation}\]</span></p>
<p>即舍弃了不合理部分的S2F模型化成了多项式拟合的1阶形式。</p>
<p>下面做出<span class="math inline">\(logS\)</span>与<span class="math inline">\(logP\)</span>的线性回归图，以验证舍去<span class="math inline">\(log\Delta S\)</span>项是否合理：</p>
<figure>
<img src="logS与logP的线性回归图.jpg" alt="logS与logP的线性回归图">
<figcaption aria-hidden="true">logS与logP的线性回归图</figcaption>
</figure>
<p>通过上图的数据实证可见，两者效果上基本等价（1阶多项式拟合的<span class="math inline">\(R^2\)</span>为0.91，S2F模型为0.93），印证了<span class="math inline">\(log\Delta S\)</span>项实际上是冗余的。</p>
<p>从而，得出如下结论：</p>
<blockquote>
<p><font color="red"><strong>对数供给量多项式拟合可以被视为S2F模型的一种更合理的、可拓展的形式，其更适用于有极限价格的实际情况</strong>。</font></p>
</blockquote>
<h2 id="稀缺性与市值">稀缺性与市值</h2>
<p>稀缺性（仍可用S2F值代表）与市值，是一个很复杂的问题，本文目前仅仅只做一些逻辑上的讨论，更量化的讨论留待将来进行。</p>
<p>到目前为止，在流通性良好且为人们普遍接受的商品中，黄金的稀缺性是公认较高的，但其并没有超过以m2衡量的美元的市值，这或许与黄金不具有本位币地位有关。金本位的崩溃促使黄金退化为了一种普通商品，相较于可以购买一切的本位币而言，人们对黄金的潜在需求下降，导致其市值相较于美元缩水。</p>
<p>这对比特币的警示意义在于：如果其最终不能取得本位币地位，则其市值不太可能超越以m2衡量的美元，从而2140年之后btc的价格可能达不到以当前美元价值衡量的100万美元/BTC。</p>
<p>稀缺性高于黄金S2F值的商品，如古董、艺术品、NFT产品等，由于供给量限定，S2F会很高，但其价格的差别却很大、大多市值也很有限，并不完全遵循越稀缺市值越高的规律。显然，造成这一现象的主要的原因在于是否有足够的潜在购买者为其稀缺性买单。</p>
<p>这对于比特币的警示意义在于：虽然目前btc的流通性很好，但如果比特币不能更多的为大众所接纳，其使用场景不能更近一步增加，则人们很难会进一步为其稀缺性买单，从而减半导致的稀缺性上升也不能很好的反映在市值上，即便最终其S2F趋近于无穷大，也不代表其市值就会上涨到很高的水平。</p>
<h2 id="致谢与声明">致谢与声明</h2>
<p>本文仅仅是在做技术上的尝试，不构成投资建议，望读者自行甄别。</p>
<p>限于本人的水平，本文错谬之处在所难免，期待方家指正。</p>
<p>感谢您的阅读！</p>
<p>本文完。</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>减半</tag>
        <tag>模型</tag>
      </tags>
  </entry>
  <entry>
    <title>用python压缩pdf文件</title>
    <url>/2023/11/08/%E7%94%A8python%E5%8E%8B%E7%BC%A9pdf%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>由于某些不可避免的原因，需要在某些网站上传一些<code>.pdf</code>文件，那些奇葩的网站对文件大小做了限制，所以需要对较大的<code>.pdf</code>文件进行压缩处理，而一般免费的阅读器都不能随意的压缩（要么需要你交很高的会员费），好在这些任务<code>python</code>都可以很好的处理。</p>
<p>本文编写了相关的<code>python</code>脚本，有需要的可以参考。</p>
<span id="more"></span>
<h2 id="一些说明">一些说明</h2>
<p>本文的内容参考了其他博客（如<a href="https://www.cnblogs.com/liangxuran/p/16639561.html">此处</a>），但对其中脚本进行了一些修改。</p>
<p>我使用的操作系统是<code>MacOS</code>，如果是其他系统，可能需要你自己动手进行一些修改。</p>
<h2 id="安装pymupdf">安装PyMuPDF</h2>
<p>首先我们安装<code>PyMuPDF</code>包，如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install pymupdf=1.20.2</span><br></pre></td></tr></table></figure>
<p>上述命令指定了版本，是为了避免因为版本不同导致的问题。</p>
<h2 id="压缩脚本">压缩脚本</h2>
<p>编写的脚本如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> fitz</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pdf2pic</span>(<span class="params">file_root, filename: <span class="built_in">str</span>, out_name: <span class="built_in">str</span> = <span class="literal">None</span>, zoom=<span class="number">50</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    将pdf逐页转化为png图片</span></span><br><span class="line"><span class="string">    :param file_root: 文件根目录</span></span><br><span class="line"><span class="string">    :param filename: 文件名，不带后缀</span></span><br><span class="line"><span class="string">    :param out_name: 输出文件名，默认为 filename+&#x27;_new&#x27;，用以存储pdf转化生成的 &#x27;png&#x27; 文件</span></span><br><span class="line"><span class="string">    :param zoom: 缩小的百分比比例</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;.pdf&#x27;</span> <span class="keyword">in</span> filename:</span><br><span class="line">        filename = filename.split(<span class="string">&#x27;.pdf&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    file = <span class="string">f&quot;<span class="subst">&#123;file_root&#125;</span>/<span class="subst">&#123;filename&#125;</span>.pdf&quot;</span>.replace(<span class="string">&#x27;//&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file):</span><br><span class="line">        <span class="keyword">raise</span> FileExistsError(<span class="string">f&quot;File <span class="subst">&#123;file&#125;</span> not exists&quot;</span>)</span><br><span class="line">    out_name = out_name <span class="keyword">or</span> <span class="string">f&quot;<span class="subst">&#123;filename&#125;</span>_new&quot;</span></span><br><span class="line">    out_file = <span class="string">f&quot;<span class="subst">&#123;file_root&#125;</span>/<span class="subst">&#123;out_name&#125;</span>&quot;</span>.replace(<span class="string">&#x27;//&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)  <span class="comment"># 文件夹用以存储pdf转的图片</span></span><br><span class="line">    doc_f = fitz.Document(file)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(out_file):</span><br><span class="line">        shutil.rmtree(out_file)</span><br><span class="line">    os.mkdir(out_file)</span><br><span class="line">    tq_t = tqdm(<span class="built_in">range</span>(doc_f.page_count))</span><br><span class="line">    <span class="keyword">for</span> pg <span class="keyword">in</span> tq_t:</span><br><span class="line">        tq_t.set_description(<span class="string">f&quot;Pdf to png. Page <span class="subst">&#123;pg&#125;</span>...&quot;</span>)</span><br><span class="line">        page = doc_f.load_page(pg)</span><br><span class="line">        zoom = <span class="built_in">int</span>(zoom)</span><br><span class="line">        lurl = <span class="string">f&quot;<span class="subst">&#123;out_file&#125;</span>/<span class="subst">&#123;pg&#125;</span>.png&quot;</span></span><br><span class="line">        trans = fitz.Matrix(zoom / <span class="number">100.0</span>, zoom / <span class="number">100.0</span>)</span><br><span class="line">        pm = page.get_pixmap(matrix=trans, alpha=<span class="literal">False</span>)</span><br><span class="line">        pm.save(lurl)</span><br><span class="line">    doc_f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pic2pdf</span>(<span class="params">file_root, pic_filename, pdf_name: <span class="built_in">str</span> = <span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    将图片合并成pdf</span></span><br><span class="line"><span class="string">    :param file_root: 文件存储的根目录</span></span><br><span class="line"><span class="string">    :param pic_filename: 图片保存的目录名</span></span><br><span class="line"><span class="string">    :param pdf_name: 转出的pdf名称，若不指定则采用pic_filename加上后缀&#x27;.pdf&#x27;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    pic_path = <span class="string">f&quot;<span class="subst">&#123;file_root&#125;</span>/<span class="subst">&#123;pic_filename&#125;</span>&quot;</span>.replace(<span class="string">&#x27;//&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    pdf_name = pdf_name <span class="keyword">or</span> pic_filename</span><br><span class="line">    pdf_path = <span class="string">f&quot;<span class="subst">&#123;file_root&#125;</span>/<span class="subst">&#123;pdf_name&#125;</span>.pdf&quot;</span>.replace(<span class="string">&#x27;//&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pic_path):</span><br><span class="line">        <span class="keyword">raise</span> FileExistsError(<span class="string">f&quot;pic_path <span class="subst">&#123;pic_path&#125;</span> not exists.&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(pdf_path):</span><br><span class="line">        os.remove(pdf_path)</span><br><span class="line">    pics = os.listdir(pic_path)</span><br><span class="line">    pics = [file <span class="keyword">for</span> file <span class="keyword">in</span> pics <span class="keyword">if</span> <span class="string">&#x27;.png&#x27;</span> <span class="keyword">in</span> file]</span><br><span class="line">    doc = fitz.Document()</span><br><span class="line">    tq_t = tqdm(<span class="built_in">range</span>(<span class="built_in">len</span>(pics)))</span><br><span class="line">    <span class="keyword">for</span> pg <span class="keyword">in</span> tq_t:</span><br><span class="line">        tq_t.set_description(<span class="string">f&quot;Pic to pdf, processing <span class="subst">&#123;pg&#125;</span>...&quot;</span>)</span><br><span class="line">        img = <span class="string">f&#x27;<span class="subst">&#123;pic_path&#125;</span>/<span class="subst">&#123;pg&#125;</span>.png&#x27;</span></span><br><span class="line">        imgdoc = fitz.Document(img)</span><br><span class="line">        pdfbytes = imgdoc.convert_to_pdf()</span><br><span class="line">        imgpdf = fitz.Document(stream=pdfbytes, filetype=<span class="string">&#x27;pdf&#x27;</span>)</span><br><span class="line">        doc.insert_pdf(imgpdf)</span><br><span class="line">    doc.save(pdf_path)</span><br><span class="line">    doc.close()</span><br><span class="line">    shutil.rmtree(pic_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pdf_zoom</span>(<span class="params">file_path, out_name=<span class="literal">None</span>, zoom=<span class="number">50</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    将pdf缩小</span></span><br><span class="line"><span class="string">    :param file_path: 待转换pdf文件的绝对路径</span></span><br><span class="line"><span class="string">    :param out_name: 输出的pdf名称（不带后缀）</span></span><br><span class="line"><span class="string">    :param zoom: 缩小的百分比</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    file_root, filename = os.path.split(file_path)</span><br><span class="line">    pdf2pic(file_root=file_root, filename=filename, out_name=out_name, zoom=zoom)</span><br><span class="line">    pic_filename = out_name <span class="keyword">or</span> <span class="string">f&quot;<span class="subst">&#123;filename.split(<span class="string">&#x27;.pdf&#x27;</span>)[<span class="number">0</span>]&#125;</span>_new&quot;</span></span><br><span class="line">    pic2pdf(file_root=file_root, pic_filename=pic_filename, pdf_name=out_name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Finished to reduce size of <span class="subst">&#123;filename&#125;</span>, the new file is <span class="subst">&#123;pic_filename&#125;</span>.pdf&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    pdf_zoom(file_path=<span class="string">&#x27;/path/to/file/xxx.pdf&#x27;</span>, zoom=<span class="number">55</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述脚本中还用到了<code>tqdm</code>包，用来显示进度条；<code>fitz</code>为<code>pymupdf</code>包下的内容。</p>
</blockquote>
<p>执行的时候：</p>
<ul>
<li><p>将最后一行的<code>file_path</code>参数的赋值改成自己需要转换文件的路径（需要绝对路径）即可。</p></li>
<li><p>缩小的百分比通过<code>zoom</code>参数来控制调节，其可以取值范围为<span class="math inline">\([0, 100]\)</span>。</p></li>
<li><p>先生成一个临时的图片文件夹（需要转换的<code>.pdf</code>文件根目录下），在完成转化后、该图片文件夹会被自动删除。</p></li>
</ul>
<p>最后输出的清晰度会降低。这是因为没有做任何优化，仅仅是通过降低清晰度来缩小文件大小的。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>怎么给pyecharts生成的表格增加滚动条</title>
    <url>/2023/11/23/%E6%80%8E%E4%B9%88%E7%BB%99pyecharts%E7%94%9F%E6%88%90%E7%9A%84%E8%A1%A8%E6%A0%BC%E5%A2%9E%E5%8A%A0%E6%BB%9A%E5%8A%A8%E6%9D%A1/</url>
    <content><![CDATA[<p>我在用<a href="https://pyecharts.org/#/"><code>pyecharts</code></a>制作网页表格时，面临如下问题：</p>
<ul>
<li><p>当表格的列数比较多时，会溢出页面右边框，十分不雅观。</p></li>
<li><p>不想抛弃<code>pyecharts</code>带来的便捷。</p></li>
</ul>
<p>于是经过查询，找到了解决办法，见下文。</p>
<span id="more"></span>
<h2 id="问题描述">问题描述</h2>
<p>当我们使用<code>pyecharts</code>的<code>table</code>类来创建表格，嵌入到网页中时，发现表格数据会右溢出，滚动条出现在最下面，严重影响了页面的美观和整洁。</p>
<p>我们希望滚动条出现在表格处、而不是页面底部，即希望表格可以滑动显示。</p>
<h2 id="解决办法">解决办法</h2>
<p>在<a href="https://github.com/pyecharts/pyecharts"><code>pyecharts</code></a>的<code>github</code>上查找该问题，发现有人曾经提出过<a href="https://github.com/pyecharts/pyecharts/issues/1935">见此处</a>，该问题的回答没有详细说怎么解决，只是提到了需要修改<code>macro</code>模版。</p>
<p>鉴于没有找到更好解决办法，于是动手修改了模块的宏文件。我安装的版本为<code>pyecharts==2.0.2</code>、<code>python==3.8.5</code>。具体修改如下：</p>
<p>找到安装包所在路径：</p>
<blockquote>
<p><code>venv -&gt; lib -&gt; lib -&gt; python3.8 -&gt; site-packages -&gt; pyecharts -&gt; render -&gt; templates -&gt; macro</code></p>
</blockquote>
<p>打开<code>macro</code>文件，寻到<code>table</code>相关的<code>style</code>，在176行的<code>.fl-table</code>里增加两行：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line"><span class="attribute">overflow</span>: scroll;</span><br></pre></td></tr></table></figure>
<p>即变为</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.fl-table</span> &#123;</span><br><span class="line">                <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">                <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">                <span class="attribute">border</span>: none;</span><br><span class="line">                <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">                <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">                <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">                <span class="attribute">word-break</span>: keep-all;</span><br><span class="line">                <span class="attribute">display</span>: block;</span><br><span class="line">                <span class="attribute">overflow</span>: scroll;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>然后重启项目，再次生成html文件，新生成的表格页面就限定为页面的大小，可以通过滚动条来拖动观看后续表格了。</p>
<p>如有服务器，在服务器上也进行相同操作。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pyecharts</tag>
      </tags>
  </entry>
  <entry>
    <title>基金净值管理相关概念说明</title>
    <url>/2023/11/07/%E5%9F%BA%E9%87%91%E5%87%80%E5%80%BC%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<p>基金的净值管理是一个较复杂的问题，一般投资者在购买基金时，会对一些概念产生疑惑。本文对基金净值管理的一些概念及计算方法进行说明，供读者参考，以助理解净值、份额等的计算过程。</p>
<span id="more"></span>
<h2 id="申购">申购</h2>
<p>用资金来购买基金的过程。基金会将申购资金投入到交易中，客户得到该资金对应的份额，份额分成费前、费后两种，详见下文。</p>
<h2 id="赎回">赎回</h2>
<p>赎回是客户将资金从基金中提取出来的过程。由于涉及提成，会稍微有些复杂。</p>
<p>赎回需要指定期望赎回的份额（为了方便计算，我们约定赎回份额为费前份额）。</p>
<p>如果客户全额赎回，即将剩余的费前份额全部赎回，则赎回资金计算如下：
<span class="math display">\[
全部赎回资金=费前份额*费后净值-总提成
\]</span>
上式所得的资金为客户所能赎回的最大资金，注意其中扣除了提成。</p>
<p>如果只是部分赎回，即该客户在赎回后仍然有剩余的费前份额，则提成会按照赎回份额的比例进行。赎回资金如下计算：
<span class="math display">\[
赎回资金=赎回费前份额*费后净值-总提成*赎回费前份额/总费前份额
\]</span> 提成的计算方法见下文。</p>
<h2 id="结算">结算</h2>
<p>基金运营会定期结算，在结算时会对收益为正的客户进行部分提成，若客户没有正收益，则不会被提成。</p>
<p>基金在结算完成后，会重新计算客户的本金：</p>
<ul>
<li><p>如果客户有盈利、被抽取了提成，则该客户的本金会相应的提高，提高金额为该客户自上次结算以来的剩余盈利，下次结算时收益会用更高的本金来计算。</p></li>
<li><p>如果客户没有盈利，则结算前后该客户的本金不会变化，下次结算时，仍用当前的本金计算收益。</p></li>
</ul>
<p>结算后的提成资金可以作为基金管理人的申购资金再次被投入到基金中，从而导致基金的总费前份额增加；也可以直接从账户中提出，不影响基金的费前份额，但会造成基金的总权益下降。</p>
<h2 id="总投入资金">总投入资金</h2>
<p>申购赎回所投入的净资金为总投入资金。即： <span class="math display">\[
总投入资金=总申购资金-总赎回资金
\]</span> 如果基金盈利很高的话，可能出现总投入资金为负的情况。</p>
<h2 id="权益资金">权益资金</h2>
<p>权益资金与本金有区别，其随基金净值变动而变动。为客户实时可赎回的提成前资金。</p>
<p>计算如下： <span class="math display">\[
权益资金=客户费前份额*客户费后净值=客户费后份额*费前净值
\]</span> 上式中的其他变量定义见下文。</p>
<h2 id="本金">本金</h2>
<p>本金是针对客户而言的。</p>
<p>每次申购赎回或结算，都会造成本金的变化。本金不能为负值，最小为0。</p>
<p>我们在这里列出了本金变化瞬间的计算方式。</p>
<p>如果是申购，新的本金计算如下： <span class="math display">\[
新的本金=旧的本金+新申购资金
\]</span> 如果是赎回，新的本金计算如下： <span class="math display">\[
新的本金=旧的本金*(1-赎回份额/总份额)
\]</span>
可见，赎回后的本金是按比例缩减旧本金，与提成或收益无关。如将全部份额赎回，则新的本金为0。如赎回的份额为0，则新的本金等于旧本金。</p>
<p>如果是结算，则新的本金计算如下： <span class="math display">\[
新的本金=新的客户权益资金=旧的本金+收益-提成
\]</span></p>
<h2 id="费前份额">费前份额</h2>
<p>只跟客户申购赎回有关的份额，在基金结算前后保持不变。</p>
<p>申购时费前份额会增加，计算如下： <span class="math display">\[
费前份额增加=申购资金/费后净值
\]</span></p>
<p>赎回时，费前份额会减少，剩余费前份额计算如下： <span class="math display">\[
剩余的费前份额=赎回前的费前份额-赎回的费前份额
\]</span>
上述为客户的费前份额，基金总的费前份额为各客户费前份额的加总。</p>
<h2 id="费前净值">费前净值</h2>
<p>是不受基金申购、赎回、结算影响的净值。它反应了基金真实的盈利能力。</p>
<p>基金层面上的计算方式如下： <span class="math display">\[
费前净值=基金总权益/基金总费后份额
\]</span> 其中基金总权益即基金的实时总资金，会随着投资波动而波动。</p>
<h3 id="申购赎回结算前后费前净值保持不变">申购、赎回、结算前后费前净值保持不变</h3>
<p>为什么结算前后基金的费前净值会保持不变呢？</p>
<p>简单的，我们可以假设结算后基金管理人没有提出资金，而是以新的申购方式保留在基金中。这时，结算提成过程相当于费后份额从客户转移一部分到基金管理人，同时基金总权益也没变，从而基金总费后份额不变、费前净值也不变。</p>
<p>如果基金管理人将提成资金从账户提出，也可证明费前净值是不变的。</p>
<p>我们用<span class="math inline">\(C\)</span>表示基金总的权益、<span class="math inline">\(S\)</span>表示总的费后份额、<span class="math inline">\(\Delta S\)</span>表示费后份额的减少量、<span class="math inline">\(t\)</span>表示总的提成、<span class="math inline">\(n\)</span>表示结算前的费前净值、<span class="math inline">\(n&#39;\)</span>表示结算后的费前净值，用有下标<span class="math inline">\(i\)</span>的字母代表客户<span class="math inline">\(i\)</span>的相关值。</p>
<p>总提成有： <span class="math display">\[
t=\sum_{i=1}^Nt_i
\]</span> 其中对每个客户： <span class="math display">\[
t_i=n*\Delta S_i
\]</span> 新的净值： <span class="math display">\[
n&#39;=\frac{S*n-t}{S-\Delta S}=\frac{S*n-\sum_{i=1}^Nn*\Delta
S_i}{S-\sum_{i=1}^N\Delta S_i}=n
\]</span> 可见结算时费前净值保持不变。</p>
<p>同样的分析可以发现申购、赎回时，费前净值也保持不变。</p>
<p>或者从客户角度，计算如下： <span class="math display">\[
费前净值=客户总权益/客户总费后份额
\]</span> 当然上述分母项不能为0。</p>
<p>各客户的费前净值与基金的费前净值相同。</p>
<h2 id="费后份额">费后份额</h2>
<p>由费前净值计算得到，客户申购、赎回及基金结算都会引起费后份额的变化。</p>
<p>它的意义在于，可以将提成的影响转化成客户的份额缩减。</p>
<p>申购时，费后份额如下增加： <span class="math display">\[
费后份额增加=申购资金/费前净值
\]</span> 赎回时，费后份额如下减少： <span class="math display">\[
费后份额减少=赎回的费前份额*费后净值/费前净值
\]</span> 结算时，客户的费后份额如下减少： <span class="math display">\[
费后份额减少=提成/费前净值
\]</span>
上述为客户的费后份额计算方法，基金的费后份额为该基金下所有客户费后份额的加总。</p>
<h2 id="费后净值">费后净值</h2>
<p>为扣除了提成后的净值，在提成后、费后净值会减小。</p>
<p>它的意义在于，将提成的影响转化成了净值的减小。</p>
<p>需要指出的是费后净值对每个客户才有意义，对于基金而言，没有太大意义。原因可以参见下文，略显复杂。</p>
<p>基金层面的费后净值是对客户的费前份额进行加总后计算得到的，其计算如下：
<span class="math display">\[
基金费后净值=基金总权益/基金总费前份额
\]</span></p>
<p>客户层面上，满足如下关系： <span class="math display">\[
客户费后净值=客户总权益/客户总费前份额
\]</span>
我们接下来讨论基金的费后净值与客户的费后净值是否相等的问题。</p>
<h3 id="关于费后净值的讨论">关于费后净值的讨论</h3>
<p>用<span class="math inline">\(n\)</span>代表基金费后净值，用<span class="math inline">\(S\)</span>代表费前总份额，<span class="math inline">\(\Delta S\)</span>代表费前份额的变化，<span class="math inline">\(t\)</span>代表提成资金，<span class="math inline">\(C\)</span>代表基金总资金（或总权益）。第<span class="math inline">\(i\)</span>个客户的总资金为<span class="math inline">\(C_i\)</span>，其费前份额为<span class="math inline">\(S_i\)</span>、客户可能与基金的费后净值不一样，用<span class="math inline">\(n_i\)</span>代表客户的费后净值，<span class="math inline">\(\Delta C_i\)</span>代表该客户总资金的变化。</p>
<p>在没有一次提成之前，各客户的费前、费后净值相同，且均与基金费前净值相同（此时基金费前净值与费后净值也相等）。</p>
<p>即有： <span class="math display">\[
n=\frac{C}{S}=\frac{\sum_{i=1}^{N}C_i}{\sum_{i=1}^{N}S_i}=\frac{C_i}{S_i}=n_i
\]</span> 此后分申购、赎回与结算三种情况讨论净值会如何变化。</p>
<ul>
<li>申购</li>
</ul>
<p>客户<span class="math inline">\(i\)</span>申购资金为<span class="math inline">\(\Delta C_i\)</span>，则其获得的费前份额为： <span class="math display">\[
\Delta S_i=\frac{\Delta C_i}{n_i}
\]</span>
若基金层面的费后净值与客户的不一样，则客户的费前份额增加与基金的费前份额增加也会不一样。两者关系为：
<span class="math display">\[
\Delta S=\frac{\Delta C_i}{n}=\frac{n_i}{n}*\Delta S_i
\]</span>
此时，基金层面的费前份额增加不是直接对客户费前份额的增加进行加总，而是有一个比例变换。</p>
<p>可见，只有客户的费后净值、费前份额才更重要，基金层面的费后净值、费前份额实际意义不大。</p>
<p>申购时提成<span class="math inline">\(t=0\)</span>，对于客户<span class="math inline">\(i\)</span>而言，其新的总资金<span class="math inline">\(C_i&#39;=C_i+\Delta
S_i*n_i\)</span>，新的费后净值为： <span class="math display">\[
n_i&#39;=\frac{C_i+\Delta S_i*n_i}{S_i+\Delta S_i}=\frac{n_i*S_i+\Delta
S_i*n_i}{S_i+\Delta S_i}=n_i
\]</span>
可见新的客户费后净值在申购前后保持不变，与上面类似，可得基金的费后净值在申购前后保持不变。</p>
<ul>
<li>赎回</li>
</ul>
<p>假定客户赎回<span class="math inline">\(\Delta
S_i\)</span>份费前份额，则其对应的基金层面的费前份额减少为： <span class="math display">\[
\Delta S=\frac{n_i*\Delta S_i}{n}
\]</span>
可见如果我们计算基金层面的费前份额、费后净值，那么赎回后的基金费前份额、不等于赎回前的费前份额减去客户赎回的份额，这样一来，基金的费后净值也就没有意义了。</p>
<p>赎回时若有提成，提成部分全部从客户赎回资金里面扣除，故赎回后客户新的费后净值为：
<span class="math display">\[
n_i&#39;=\frac{n_i*S_i-n_i*\Delta S_i}{S_i-\Delta S_i}=n_i
\]</span> 即赎回前后客户的费后净值不变。</p>
<p>假设基金管理人的提成<span class="math inline">\(t\)</span>全部提出，则基金的费后净值计算如下：
<span class="math display">\[
n&#39;=\frac{n*S-n_i*\Delta S_i}{S-\Delta S}=\frac{n*S-n_i*\Delta
S_i}{S-\frac{n_i}{n}*\Delta S_i}=n
\]</span> 可见赎回前后基金的费后净值（若强行计算的话）也能保持一样。</p>
<ul>
<li>结算</li>
</ul>
<p>有结算时，假定结算前的基金费后净值为<span class="math inline">\(n\)</span>、基金总费前份额为<span class="math inline">\(S\)</span>，结算后为<span class="math inline">\(n&#39;\)</span>、费前份额为<span class="math inline">\(S&#39;\)</span>，总共的提成为<span class="math inline">\(t\)</span>。</p>
<p>新的基金费后净值： <span class="math display">\[
n&#39;=\frac{S*n-t}{S}
\]</span> 可见此时若<span class="math inline">\(t&gt;0\)</span>，则<span class="math inline">\(n&#39;&lt;n\)</span>，即结算会导致费后净值变小。</p>
<p>对于客户<span class="math inline">\(i\)</span>而言，其费前份额保持不变，有： <span class="math display">\[
n_i&#39;=\frac{S_i*n_i-t_i}{S_i}
\]</span>
此时由于各客户在结算时、提成情况会有差异，如买在净值高点的客户可能没有盈利、故其提成部分为0，但买在净值低点的客户会被提成，又由于客户的费前份额在结算过程中保持不变，从而出现每个客户的费后净值不一样的情况。因而会引起客户的费后净值与基金的费后净值不一样。</p>
<h2 id="基准投资">基准投资</h2>
<p>在每次本金变动的瞬间，我们做了假想中的基准投资。</p>
<p>即：</p>
<ul>
<li>申购时，将客户新增的本金，全部投入到基准标的中，以产生基准收益；</li>
<li>赎回时，将客户赎回减少的本金，从基准标的中剔除，减少对基准的持仓；</li>
<li>结算时，客户有盈利，则将提成后剩余的盈利部分投入到基准中，增加基准的持仓，无盈利、则基准持仓不变；</li>
</ul>
<p>有如下重要变量。</p>
<h3 id="基准标的">基准标的</h3>
<p>对于赚取绝对收益的基金而言，没有基准标的。</p>
<p>对于赚取相对收益的基金而言，基准标的为预先协商的投资品，如BTC、国债利率、标普500等。</p>
<h3 id="基准持仓">基准持仓</h3>
<p>对于增强型基金，基准持仓在申购、赎回、结算时会变化。</p>
<p>申购、结算时可能有本金增大，基准仓位的变化如下计算： <span class="math display">\[
基准持仓增加=本金增加/基准价格
\]</span> 赎回时，按照比例来减小基准持仓，计算如下： <span class="math display">\[
基准持仓减少=赎回份额/总份额*基准持仓
\]</span> 这样才能保证客户将份额全部赎回后，基准持仓也全部清空。</p>
<p>对每次基准持仓变化进行累加，就得到客户当前的基准持仓量。基准持仓不能小于0。</p>
<p>对于绝对收益基金，基准持仓为0。</p>
<h3 id="基准资金">基准资金</h3>
<p>对于增强型基金，基准持仓数量对应的资金，就是基准资金，其计算如下：
<span class="math display">\[
基准资金=基准持仓*基准价格
\]</span> 对于绝对收益基金，基准资金为本金。</p>
<h3 id="基准收益">基准收益</h3>
<p>对于赚取绝对收益的基金，基准收益为0。</p>
<p>对于赚取相对收益的基金，基准收益为： <span class="math display">\[
基准收益=基准资金-本金
\]</span></p>
<h2 id="收益">收益</h2>
<p>对于增强型基金，收益为相对于被增强标的（如BTC等）的相对收益。</p>
<p>对于中性基金，收益为超过客户基准资金的部分，没有基准收益、从而也没有基准亏损。</p>
<p>收益计算如下： <span class="math display">\[
收益=客户权益资金-本金-基准收益
\]</span></p>
<p>或： <span class="math display">\[
收益=客户权益资金-基准资金
\]</span></p>
<h2 id="提成">提成</h2>
<p>提成会影响到客户的费后份额和基金的费后净值，但是对客户的费前份额和基金的费前净值没有影响。</p>
<p>提成只对超过预先设定的基准的收益部分进行。我们假定提成比率为0.2，则提成公式如下：
<span class="math display">\[
提成资金=max([0,收益])*0.2
\]</span>
即如果客户没有相对于基准而言的收益（发生了相对亏损），则管理人不提成；如果有相对正收益，则对正收益部分的20%进行提成。</p>
<h2 id="管理费">管理费</h2>
<p>一般的基金运营会收取管理费，按客户权益资金的一定比例（管理费率）来计算，较常见的管理费收取为年化2%。</p>
<p>每日收盘时（或次日开盘时），以当时客户的权益资金乘以日化管理费率计算管理费：
<span class="math display">\[
日管理费=客户权益资金*0.02/365
\]</span>
客户当日新申购的资金会在当日收盘（或次日开盘）时收取管理费，新赎回的资金当日收盘时不会再收取管理费。这是一个权衡，要么新申购的资金不收取管理费、要么新赎回的资金不收取管理费。采用新赎回不收取会更方便。</p>
<h2 id="运营成本">运营成本</h2>
<p>基金的运营成本一般涵盖基金成员工资、设备成本、资金负债利率、托管费等等，这些成本会在基金运营期间从基金总权益里扣除，会直接导致基金的净值相应的下降。一般基金会在其财务批示里列举相关的详细记录。</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>基金</tag>
      </tags>
  </entry>
  <entry>
    <title>有基准收益时基金的超额收益应该怎么计算</title>
    <url>/2023/11/24/%E6%9C%89%E5%9F%BA%E5%87%86%E6%94%B6%E7%9B%8A%E6%97%B6%E5%9F%BA%E9%87%91%E7%9A%84%E8%B6%85%E9%A2%9D%E6%94%B6%E7%9B%8A%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97/</url>
    <content><![CDATA[<p>在我们进行基金投资时，一般会选择一个基准（如某种指数）作为对照组。通常的做法是假定对基准进行一次“买入并持有”的投资，以此来评判我们所探究策略是否优于该对照组。不过用这种方法代表基准投资实际上是存在问题的。本文将对此进行讨论，并进一步讨论应该怎么计算有基准时超额收益的问题。</p>
<span id="more"></span>
<h2 id="一个假想的投资">一个假想的投资</h2>
<p>我们先从一个例子来说明简单的“买入并持有”的投资作为基准收益率的问题。</p>
<p>如果我们某种投资组合，和“买入并持有”的基准收益对比如下：</p>
<figure>
<img src="假想投资与基准对比.jpg" alt="假想投资与基准净值对比">
<figcaption aria-hidden="true">假想投资与基准净值对比</figcaption>
</figure>
<p>由上图可见，在2022年，投资组合的表现是好于基准，如果我们采用直接将净值相减的方法作为超额收益，可将超额收益的净值情况作出了，与投资组合、基准对比如下：</p>
<figure>
<img src="假想投资与基准净值相减的超额收益净值.jpg" alt="假想投资与基准净值相减的超额收益净值">
<figcaption aria-hidden="true">假想投资与基准净值相减的超额收益净值</figcaption>
</figure>
<p>上图中，我们将每张图的起始净值均设置为1。</p>
<p>如上所示，在2022年超额收益的净值并没有反映出投资组合好于基准的实际情况。</p>
<p>这主要原因是基准投资是在2020年5月27日一次性完成的，到了2022年1月1日，投资组合的净值已经到了64.56，而此时的基准净值仅5.40，从而按照直接相减计算得到的超额收益为60.16，基准净值相较于组合净值实在太小了、其影响被压低。</p>
<p>这种超额计算方法是假定始终购买1份基准和1份投资组合，在两者净值差距过大时，各自持有1份对应的资金实际上差距巨大，从而对收益率的影响也差距巨大。</p>
<p>可见合理的超额收益应该是在组合与基准持仓资金相同时才合理。由于时间推移，投资组合的盈亏导致资金与基准已经偏离很大了，因而直接相减的超额收益并不合理。</p>
<h2 id="正确的超额收益计算">正确的超额收益计算</h2>
<p>其实超额收益的正确计算并不麻烦，直接将每期的投资组合收益率与基准收益率相减即可得到每期的超额收益，即：
<span class="math display">\[
r_t^e=r_t^p-r_t^b
\]</span>
进行上式直接相减的前提是组合资金与基准资金相等。将超额收益进行累乘，即可得到进行复利投资的超额收益净值：
<span class="math display">\[
net_T^e=\prod_{t=1}^T(1+r_t^e)
\]</span> 如此，上节提到例子的超额收益净值情况如下：</p>
<figure>
<img src="假想投资基准超额收益净值.jpg" alt="假想投资基准超额收益净值">
<figcaption aria-hidden="true">假想投资基准超额收益净值</figcaption>
</figure>
<p>但是在实际投资中，这一超额收益的获取需要进行每日再平衡，且与每日的总资产有关，故其对应的基准持仓会不断变化。</p>
<p>对于追求增强型收益的客户而言，其可解释性不强，不如资金申购（或结算）时一次性“买入并持有”直观。</p>
<p>因而，在基金运维层面上，仍然采用“买入并持有”的基准投资。</p>
<p>为了避免基金净值与基准净值之间偏离过大造成的超额收益偏离，我们可采用定期（如3个月）结算、重新平衡基准与投资组合资金，从而近似的保持超额收益的准确。</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>基金</tag>
      </tags>
  </entry>
  <entry>
    <title>比特币去中心化交易所Bisq在Mac上运行方法</title>
    <url>/2023/11/27/%E6%AF%94%E7%89%B9%E5%B8%81%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E4%BA%A4%E6%98%93%E6%89%80Bisq%E5%9C%A8Mac%E4%B8%8A%E8%BF%90%E8%A1%8C%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p><a href="https://bisq.network">Bisq</a>作为最优秀的比特币去中心化交易平台，在中文圈的使用率很低，但是很值得推荐。</p>
<p>该平台不需要任何认证、全匿名、利用买卖双方超额抵押解决交易信任问题，以点对点交易的方式护卫着比特币场外交易的安全。</p>
<p>可以说，即便所有的中心化交易所都垮掉了，人们仍然可以利用<code>Bisq</code>将比特币置换成法币或其他资产。从某种意义上来说，它是比特币交易的压舱石，让人们不用过度顾虑无处交易比特币的问题。</p>
<p>不过，鉴于其需要通过洋葱路由（<a href="https://en.wikipedia.org/wiki/Onion_routing">onion
routing</a>）进行匿名交互，对于身处网络洼地的人们还是不太容易使用。可能正是因为上手的难度，导致了其在很多被需要的地方流行不起来。</p>
<p>本文将介绍在Mac上运行<code>Bisq</code>交易软件的方法，主要聚焦在安装后不能打开的问题。</p>
<span id="more"></span>
<h2 id="问题描述">问题描述</h2>
<p>本文主要介绍解决Mac用户安装好了<code>Bisq</code>（我安装的为最新版<code>Bisq-v1.9.14</code>），但是不能正常打开的问题。</p>
<p>在进一步操作之前，你得确认自己能访问自由网络（或叫做科学上网），假定你本地代理<code>socks</code>流量的入口为1080端口。</p>
<p>如果你不能访问自由网络，那么后面的解决办法暂时与你无关。</p>
<p>安装<code>Bisq</code>完毕后，如果直接打开，提示文件破坏，则应执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> xattr -rd com.apple.quarantine /Applications/Bisq.app</span><br></pre></td></tr></table></figure>
<p>执行后，你会发现程序一直卡在连接tor节点的环节。</p>
<p>这意味着我们需要将流量通过代理之后才能正常使用该P2P交易软件。</p>
<h2 id="解决办法">解决办法</h2>
<p>首先，你需要安装<code>java jdk</code>，用于操作<code>.jar</code>文件。</p>
<p>下面的步骤先不打开<code>Bisq</code>。</p>
<blockquote>
<ol type="1">
<li>找到<code>Bisq</code>应用的app路径，具体为：<code>/Applications/Bisq.app/Contents/app</code>；</li>
<li>找到<code>tor-0.7.6.jar</code>文件，复制到其他本地文件夹。若为老版本，则为文件<code>desktop-version-all.jar</code>，其中<code>version</code>为版本号；</li>
<li>终端切换到复制了<code>tor-0.7.6.jar</code>的文件夹下，执行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jar xf tor-0.7.6.jar torrc</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li><p>上述命令将<code>torrc</code>文件从<code>tor-0.7.6.jar</code>中提取出来，此时会得到两个文件<code>torrc</code>和<code>torrc.default</code>；</p></li>
<li><p>编辑<code>torrc</code>（可用文本编辑器或<code>vi</code>命令进行操作），在文件的末尾添加一行、以进行流量转发：</p></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Socks5Proxy 127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<ol start="6" type="1">
<li>保存后，执行如下命令更新复制出来的<code>tor-0.7.6.jar</code>文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jar uf desktop-1.9.12-all.jar torrc</span><br></pre></td></tr></table></figure>
<ol start="7" type="1">
<li>将更新了的<code>tor-0.7.6.jar</code>文件复制回<code>/Applications/Bisq.app/Contents/app</code>，替换原文件。</li>
<li>此时打开<code>Bisq</code>，等待更新本地节点数据及配置tor网络。如果是连接的本地节点，大概等待5分钟左右。</li>
</ol>
</blockquote>
<p>如果你想连接本地的全节点，可以如下打开：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/Applications/Bisq.app/Contents/MacOS/Bisq -btcNodes=local_ip:8333 -useTorForBtc=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>上述<code>local_ip</code>为你的全节点的局域网ip地址，<code>8333</code>为默认的端口。</p>
<p>如果你想通过<code>tor</code>连接指定的<code>.onion</code>地址，则应如下开启：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/Applications/Bisq.app/Contents/MacOS/Bisq -btcNodes=you_onion_address.onion:8333 -useTorForBtc=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>上述<code>you_onion_address</code>为你指定的洋葱地址。</p>
<p>成功打开之后的使用方法，则可以参考<a href="https://bisq.network/getting-started/">官方教程</a>，或<a href="https://raspibolt.org/guide/bonus/bitcoin/bisq.html"><code>RaspiBolt</code>的教程</a>。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>Bisq</tag>
      </tags>
  </entry>
  <entry>
    <title>《致命的自负》读书札记</title>
    <url>/2024/02/27/%E3%80%8A%E8%87%B4%E5%91%BD%E7%9A%84%E8%87%AA%E8%B4%9F%E3%80%8B%E8%AF%BB%E4%B9%A6%E6%9C%AD%E8%AE%B0/</url>
    <content><![CDATA[<p>本文是对最近阅读《致命的自负》的札记，用来记录概述的核心思想，以供没有阅读该书的读者了解其梗概，且供未来回忆该书内容时参考。</p>
<span id="more"></span>
<h2 id="前言">前言</h2>
<p>出于对比特币的信仰，一直对哈耶克很崇拜。</p>
<p>可实事求是的说，我对哈耶克的书读的并不多。他是一个伟大的自由经济学家，人们普遍把他视为奥地利经济学派的代表。他的思想一直活跃在反思社会主义思潮的最前沿，对计划经济的谬误进行了鞭辟入里的分析。可以说，他是一位开启未来的伟大思想家。</p>
<p>在推崇凯恩斯政府干预的地方，他其实是不受待见的。对于像我这样并非经济学出身、也没有想做一个职业经济学家的普通读者而言，阅读他最负盛名的代表作似乎可了解他的思想。</p>
<p>他最有名的著作是《通往奴役之路》、《自由宪章》、《致命的自负》三本书。当然其他还有很多，比如间接催生出比特币的著作《货币的非国家化》等。</p>
<p>《致命的自负》（1988年）一书是哈耶克生前发表的最后一部重要著作，我对它感兴趣是因为阅读了张维迎的文章<a href="https://www.bimba.pku.edu.cn/mba/mbaxw/272456.htm">《张维迎：知不知，小平也》</a>，虽然该文只对这本书进行了言简意赅的内容提炼，但其中透露出的说服力之强着实让没涉猎过哈耶克著作的我很震惊。从那以后，便决心工作闲暇时将这本书好好读一读。恰好最近策略上线并如预期运行，终于可以静下来阅读了。</p>
<h2 id="内容梗概">内容梗概</h2>
<p>首先，当然是需要理解题目，到底是谁有致命的自负？本书所分析的自负主体，是带有纯粹理性主义、构建主义倾向的知识分子，也即人类中有杰出理性能力的精英。他们对理性过分依赖并自负的认为理性万能、进而希望通过理性进行社会构建，是一个必然导致致命后果的谬误。</p>
<p>那么哈耶克在这本书中是怎么论述这一结论的呢？</p>
<p>[TODO]</p>
]]></content>
      <categories>
        <category>札记</category>
      </categories>
      <tags>
        <tag>哈耶克</tag>
        <tag>经济</tag>
        <tag>名著</tag>
      </tags>
  </entry>
  <entry>
    <title>金融交易者没有社会价值吗</title>
    <url>/2024/12/06/%E9%87%91%E8%9E%8D%E4%BA%A4%E6%98%93%E8%80%85%E6%B2%A1%E6%9C%89%E7%A4%BE%E4%BC%9A%E4%BB%B7%E5%80%BC%E5%90%97/</url>
    <content><![CDATA[<p>“做金融的来钱快，但对社会没有贡献。”真的是这样的吗？</p>
<p>本文讨论社会上关于金融交易者的一些偏见。属于随笔，用来记录一些思考，写的杂乱一些，感兴趣的人可以凑活着看看。</p>
<span id="more"></span>
<h2 id="引文">引文</h2>
<p>最近有几个开公司办企业的朋友讨论：做金融的来钱快，但对社会没有贡献，没承担社会责任。不如他们办实业、雇员工，解决就业。</p>
<p>他们一点都不避讳对金融从业者的厌恶。</p>
<p>类似这样的言论和思潮，在中国社会生活的各个角落都能见到，网络上持类似观点的人也不在少数。</p>
<p>做金融交易的，真的这么不堪吗？</p>
<h2 id="偏见的历史渊源">偏见的历史渊源</h2>
<p>很多人鄙视做金融的，认为他们玩的都是虚的，不增加社会真实财富，是社会的蛀虫、投机倒把的腐化分子，对社会没有贡献。</p>
<p>这与古代中国精英的认知何其相似。</p>
<p>那时的精英们认为只有农民才真正从事生产，他们才对这个社会的财富有增量贡献。</p>
<p>至于商人，纯粹是在对存量财富、进行低买高卖的投机倒把，不事生产却坐享财富，乃奸诈狡猾之辈，所以常年被排在四民之末。</p>
<p>这种认知的更有甚者，甚至将作为所有传统读书人老师的孔子，也嘲笑为四体不勤五谷不分。</p>
<p>照这样评判，似乎连以孔子为代表的知识分子、都没有存在的价值。</p>
<p>古代所谓的商人，在今天可以是小商贩，也可以是大企业家。</p>
<p>他们开商店、公司逐利，被自诩现代的、社会主义者或受到社会主义思潮影响者、所厌恶，不正是如古人鄙视商人投机一样吗？</p>
<h2 id="当代思想根源分析">当代思想根源分析</h2>
<p>正如刚刚提到的，当代很多国人持有这样的价值评判，除了来自上述历史渊源外，还来自长年累月马克思主义教育的加强。</p>
<p>马克思主义片面强调工农等劳动者对价值的作用，刻意无视甚至妖魔化资本和有产阶级对价值的贡献。</p>
<p>我的那几个当老板的朋友，用这样的观点来鄙夷金融交易者，殊不知真要按照马克思主义或共产党理论的划分，自己就是属于纯粹的资产阶级、属于不直接创造实际社会财富的剥削者。</p>
<p>他们雇佣的每一个员工，按共党理论，都是在压榨其剩余价值。他们被认为是“吸血鬼”。罪恶比单纯搞虚拟经济的金融从业者还要严重。</p>
<p>真要是又来一次文化大革命或者社会主义改造，在工农眼里的他们，不也是对社会没贡献、亟需被肉体毁灭的蛀虫吗？</p>
<p>结果，他们还看不起不剥削任何一个工农的金融从业者。</p>
<p>这当然是可笑的。</p>
<p>稍有经济社会常识的人都会意识到企业家是不可或缺的存在，不能过分简单化的定性成什么剥削者、进而抹杀他们对价值增殖和发现的重要作用。</p>
<p>这样，问题就引导我们对马克思主义经济学的荒谬性进行思考。</p>
<h2 id="马克思主义经济学">马克思主义经济学</h2>
<h3 id="价值来源">价值来源</h3>
<p>马克思主义经济学认为社会财富或价值来源于人们的劳动。</p>
<p>这解释不了：</p>
<ol type="1">
<li>相同时间下相同产品在不同地方呈现的价格差异；</li>
<li>不同时间相同产品的价格变化；</li>
<li>价格真正来源是什么。</li>
</ol>
<p>比如在英国剪一次头发需要30英镑，而在中国只需要30人民币，难道英国人剪头发这个行为里面凝结的人类无差别劳动比中国人的多吗？</p>
<p>又比如夏天的羽绒服会降价销售，到了冬天就涨价，难道是夏天的羽绒服里面凝结的无差别劳动比冬天的少吗？</p>
<p>还比如，一个新疆人在塔克拉玛干沙漠里捡到了一块狗头金，价值100万人民币，它纯粹是自然产生、自然风化暴露出来的。那么它的价值又来自哪些人的无差别劳动呢？</p>
<p>若照着马克思经济学观点，劳动创造价值，那么对于上述种种现象又如何解释？</p>
<h3 id="利润来源">利润来源</h3>
<p>马克思主义经济学还认为，资本家的利润来源于对劳工“剩余价值”的压榨。</p>
<p>这似乎意味着，只要你雇佣的员工越多，就越赚钱，这显然解释不了占有同样剩余价值的老板，为何有些发财了，有些却破产了。</p>
<p>也解释不了为什么不产自任何一个劳工的天然钻石、珠宝原石却可以卖出高价这样的现象。</p>
<p>也解释不了同样雇佣大量程序员，为什么苹果、谷歌这样的企业可以市值万亿美元，而其他大量类似的企业、纵然压榨强度远甚苹果、谷歌，却市值不高甚至走向破产。难道一个员工只要到了苹果、谷歌这样的企业里面，其剩余价值、就比待在其他公司、要高出很多来吗？若待在不盈利的企业，即便拼命加班到猝死，产生的剩余价值也不及不加班的微软吗？</p>
<h2 id="现代经济学解释">现代经济学解释</h2>
<p>现代经济学对价格的产生机制是如下解释的，它来源于市场的供需关系，是每个人对某件商品的心理估价的反映，是一连串信息流的交互结果。或者可以更通俗的说，价格形成于一个愿打一个愿挨。</p>
<p>价格受边际成本影响，但并不直接等于边际成本，它是市场需求供给最终平衡的结果。这个结果呈现的价格会反作用于生产成本。</p>
<p>企业家或交易者，利用自己的认知对价格和成本进行判断，捕捉到了成本与当前或未来的价格之间的价格差，承担风险进行投资，从而赚取这个价差获得利润。也就是说，利润来源于信息差。</p>
<p>利润进一步可以驱使生产和交易。在利润的驱使下，现代资本主义体系得以构建，科技、物质、文化极大丰富。</p>
<h2 id="认知风险与盈利">认知、风险与盈利</h2>
<p>人们抨击的投机，恰恰是在利用信息差赚钱，这与所谓的企业家赚钱是一样的。</p>
<p>企业家通过成本核算，发现有利可图然后从事投资，这一过程与纯粹的金融交易又有什么区别呢？他们也不是出于纯粹的服务社会、不盈利的企图。</p>
<p>所以说不论是做交易还是办企业，赚的钱都是一个人认知的结果。认知正确了可以赚钱、错误了就得赔钱。</p>
<p>他们承担了亏损风险，即便获得了利润，也不过是对他们承担风险的补偿。</p>
<p>一个完全没有去承担风险的人，出于嫉妒心理指责别人获得的回报，难道就是社会公平与公正吗？</p>
<p>企业家或交易者，获得收益的来源、是他们的正确认知领先甚至超越了大多数人后、产生的信息差。这并不是必然的，是承担了认知错误带来亏损风险的。</p>
<p>这种盈利，本质上是市场对承担了亏损风险的先知先觉者的补偿和奖励。</p>
<p>倘若没有这种激励，那么就不会有人去冒险、去创新、去坚持正确认知，如此社会怎么进入不断向前发展的正循环呢？价格又怎么会被更正确、合理的发现呢？</p>
<h2 id="社会贡献问题">社会贡献问题</h2>
<p>再来说说“社会贡献”的问题。</p>
<p>人们评判社会贡献的这个问题，其实本来就没什么意义。</p>
<p>因为谁又能来主宰定夺贡献的大小呢？很多事物的价值和意义都是在事后很久才显现出来的。</p>
<p>若是仔细考察每个人，恐怕绝大多数人都对社会没有贡献。</p>
<h2 id="谁有社会贡献">谁有社会贡献</h2>
<p>比如农民，他们生产出粮食，可如果不是现代科技，他们生产的产品恐怕连自己家人都不一定养的活。脱离了现代科技，农民很难有多余的粮食出售。在没有科技加成时，绝大多数农民不过仅能做到自给自足。如果一个农民，不对社会出售他的产品，是不是他就没有社会贡献了？</p>
<p>比如，一个工人，他在流水线上进行生产，他做的事情就是不断机械的重复某一个技术环节，现在机器人把他做的事情替代了，是不是他就没有社会贡献了？</p>
<p>一个做科研的，常年水文章，做点没有任何意义的研究，他的社会贡献又在哪里呢？</p>
<p>一个程序员，写了一些程序，但对于社会中其他的绝大多数人而言，可能永远都用不上这些代码，那么他对社会的贡献又在哪里呢？</p>
<p>一个官二代或富二代，常年浪迹各大娱乐场所混吃等死，他的社会贡献又在哪里呢？</p>
<p>一个政客，把国家引向了灾难性的方向，他的社会贡献又在哪里呢？</p>
<p>一个公务员，每天的工作就是给办事群众增加难度关卡、开无聊透顶却永远都开不完的会议、写一些毫无生机的官样文章，然后领取超过了普通纳税人收入很多的铁饭碗工资，享受着最好的医疗、社保，他们的社会贡献又在哪里呢？</p>
<p>一个拆迁户、或早年低价买了多套房子的城市居民，他们不再从事任何工作，却能躺着收租。甚至连那些房子都不是他们自己生产的，他们的社会贡献又在哪里呢？</p>
<p>......</p>
<p>如此分析，似乎几乎大多数人都没有社会贡献，是否他们都不应该存在？难道这个社会只有、杰出到引人注目的、极少数人、才有存在的必要性吗？</p>
<h2 id="社会贡献一词的虚妄性">“社会贡献”一词的虚妄性</h2>
<p>“社会贡献”本来就是一个伪命题，是一群社会主义自负且狂妄的僭妄分子喜欢利用的伪概念，它的内涵既不无私也不公正。</p>
<p>它不无私，是因为这个词要求别人要对自己有贡献，是要牺牲别人来满足自己的；</p>
<p>它不公正，是因为既然有了社会的贡献，必然有享受这些贡献的人。能够享受社会贡献最多的，往往是当权者及其关联群体。反观贡献者，反倒无缘享受这些贡献。</p>
<p>不过，还是需要指出，通常意义的社会贡献是一个超越了理性和本能之外的、不易被理性直接完全意识到的存在。</p>
<p>理性意识不到，不代表就没有。</p>
<p>一个活生生的人，本来就是有意义的。</p>
<p>比如做金融的人，进行了某些投资，可能会带动一整个行业的兴盛，产生丰富缤纷的上下游产业链。他们难道没有社会贡献吗？</p>
<p>其实，有钱本身就是社会贡献。因为有钱人可以消费，从而可以带动产业、解决就业，这就是活生生的社会贡献，丝毫不逊色于直接创办企业的企业家。</p>
<h2 id="结语">结语</h2>
<p>这些社会认知偏见实在是太狭隘无知，是与现代文明格格不入的糟粕。</p>
<p>错误认知的危害，不仅仅体现在让一部分人蒙屈。更严重的是，在它们的毒害下，中国社会将总是出现停滞不前甚至倒退的危机。</p>
<p>因为社会认知总是会潜在而深刻的影响社会形式，故指出谬误、让人们清醒就显得格外重要了。</p>
]]></content>
      <categories>
        <category>随想</category>
      </categories>
      <tags>
        <tag>经济</tag>
        <tag>交易</tag>
        <tag>金融</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian11系统走socks代理流量报错&#39;Socket type must be stream or datagram, not 524289&#39;问题</title>
    <url>/2023/11/24/Debian11%E7%B3%BB%E7%BB%9F%E8%B5%B0socks%E4%BB%A3%E7%90%86%E6%B5%81%E9%87%8F%E6%8A%A5%E9%94%99-Socket-type-must-be-stream-or-datagram-not-524289-%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>我在<code>Debian11</code>系统上使用<code>PySocks</code>包代理<code>python</code>脚本流量时，遇到流量不能正常通过<code>socks</code>进行代理的问题，该问题报错提示为：<code>“Socket type must be stream or datagram, not 524289”</code>。</p>
<p>而在<code>Mac</code>系统上，采用相同的方式，是可以正常代理流量的。</p>
<p>本文介绍了解决该问题的办法。</p>
<span id="more"></span>
<h2 id="问题产生的原因">问题产生的原因</h2>
<p>我运行出错的代码为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socks</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">socks.set_default_proxy(socks.SOCKS5, <span class="string">&quot;localhost&quot;</span>, <span class="number">1080</span>)</span><br><span class="line">socket.socket = socks.socksocket</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>如上描述的问题产生的原因是因为<code>Debian</code>系统的<code>socket.SocketKind</code>比<code>Mac</code>多出了<code>SocketKind.SOCK_NONBLOCK</code>和<code>SocketKind.SOCK_CLOEXEC</code>两类。</p>
<p><code>PySocks</code>包是一个年久失修的包，并不能很好的兼容<code>Debian</code>系统。</p>
<p>经过测试，不调用该包，是可以正确通过<code>socks</code>代理走流量，说明问题是由于该包引起的。</p>
<h2 id="解决办法">解决办法</h2>
<p>找到了原因之后，自然可以通过改用其他包走<code>python</code>程序流量。我找到了一个<code>PySocks</code>的修复包：<a href="https://pypi.org/project/PySocksipyChain/"><code>PySocksipyChain</code></a>，</p>
<p>改用这个包后，代理代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> sockschain <span class="keyword">as</span> socks</span><br><span class="line">socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, <span class="string">&quot;localhost&quot;</span>, <span class="number">1080</span>)</span><br><span class="line">socket.socket = socks.socksocket</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>如上代理，即可正确通过<code>socks</code>走流量了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>socks</tag>
        <tag>Debian</tag>
      </tags>
  </entry>
  <entry>
    <title>论中国关于比特币的政策</title>
    <url>/2024/05/21/%E8%AE%BA%E4%B8%AD%E5%9B%BD%E5%85%B3%E4%BA%8E%E6%AF%94%E7%89%B9%E5%B8%81%E7%9A%84%E6%94%BF%E7%AD%96/</url>
    <content><![CDATA[<p>本文尝试讨论目前中国关于虚拟货币政策的问题。限于个人能力，只讨论比特币一种虚拟货币。</p>
<span id="more"></span>
<h2 id="政策回顾">政策回顾</h2>
<p>我国政府自从2013年以来，一直对比特币等虚拟货币的态度比较严厉，相关的政策如下：</p>
<ul>
<li><p>2013年12月3日，人民银行等五部委发布了<a href="https://www.gov.cn/gzdt/2013-12/05/content_2542751.htm">《关于防范比特币风险的通知》</a>；</p></li>
<li><p>2017年9月4日，人民银行等七部门发布了<a href="https://www.gov.cn/xinwen/2017-09/04/content_5222657.htm">《关于防范代币发行融资风险的公告》</a>；</p></li>
<li><p>2021年5月18日，三协会发布<a href>《关于防范虚拟货币交易炒作风险的公告》</a>；</p></li>
<li><p>2021年9月15日，十部委发布<a href="https://www.gov.cn/zhengce/zhengceku/2021-10/08/content_5641404.htm">《关于进一步防范和处置虚拟货币交易炒作风险的通知》</a>；</p></li>
<li><p>2021年9月24日，国家发展改革委等部门发布了<a href="https://www.ndrc.gov.cn/xwdt/tzgg/202109/t20210924_1297475_ext.html">《关于整治虚拟货币"挖矿"活动的通知》</a>。</p></li>
</ul>
<p>从这些政策可以体会到国家对比特币的打压态势和强硬力度，大有视其为毒蛇猛兽之感。</p>
<p>在进一步讨论前，我们似乎应该先搞清楚比特币到底是什么，有什么重要意义和价值，又将带来什么影响？</p>
<h2 id="比特币会带来什么影响">比特币会带来什么影响</h2>
<p>比特币是一种以P2P网络和区块链技术为工具，以实现去中心化健全货币为目的的互联网记账、电子支付技术。它的本质或者说它的目标是一种货币，是一种与目前法币不同的“健全货币”。</p>
<p>很多人根据其价格不稳定、波动太大来质疑它不具有货币属性。确实，目前比特币尚没有实现货币化。但若单凭它不稳定、尚不具备成为日常交易货币的条件，就忽略其他优点而禁止它，是牺牲了未来所有可能性的不明智行为。</p>
<h3 id="价值储存">价值储存</h3>
<p>虽然其价格不稳定，但依然表现出来了非常优异的价值存储功能，具有优异的时间保值能力。</p>
<p>若用存量与增量的比值来衡量，它是比黄金都“硬”的通货。正是由于它的保值能力，将保护财富不会因为时间流逝而贬值，这一点其实对所有人都有利。</p>
<p>不贬值的储值工具会有利于资本积累，降低人们的时间偏好，促使社会更能沉得下心来做具有原创性的产业升级。也会鼓励储蓄而非即时消费或借贷消费，从而减少全社会的负债水平。</p>
<p>没有了通货膨胀的困扰，会减少资本外流的问题，还会减少出现类似“房地产泡沫”这样的让全社会都深为困扰的社会难题，从而有利于国家未来的发展。</p>
<p>我将用下面这一个白银的例子，来说明采用更“硬”的工具来储存财富对国家和人民的重要性：</p>
<blockquote>
<p>19世纪，全球都拥抱金本位，白银出现了“去货币化”浪潮。有数据显示，在1870年以前黄金、白银之间的兑换比例常年维持在12-15之间。到了1935年中国货币改革废除“银本位”时，该兑换比例变为了75上下。这样一来，相较于全球主流国家的黄金本位而言，用白银储存的财富缩水了75%上下、也即缩水了5倍！白银购买力下降，造成其持有者变穷。</p>
<p>据推测，1870年左右我国GDP占全球比例在17.2%左右（<a href="https://zh.wikipedia.org/wiki/中国历史上的国内生产总值列表_(国际汇率)">参见此处</a>），等到1935年时该比例下降到6%左右（<a href="https://www.163.com/dy/article/D3Q7EC5N0524QGDE.html">参见此处</a>）。</p>
<p>可见，我国近代的贫穷，除了科技、政治等原因外，还有一部分原因是由于财富储存方式造成的！</p>
</blockquote>
<p>上面这个例子显示出：积极拥抱更好的价值储存工具，于国于民都具有重大意义！</p>
<h3 id="个人财产">个人财产</h3>
<p>比特币的设计通过技术手段，对个人财产进行了保护，使个人财产不被非法无理的侵犯，使人人都可以有恒产有恒心，减少社会矛盾和动荡。</p>
<p>若无个人授权，则对应的财产将不可使用，这比传统货币要更进步。</p>
<p>个人财产得到保护，则人们会更有动力去创造财富，全社会财富增加，国家自然也将获益。小河有水，大河满。这也是汉文帝所以能够让汉朝兴盛发达的原因。</p>
<h3 id="全球贸易">全球贸易</h3>
<p>目前比特币具有世界范围的价值认同，完全不依赖任何中央银行的背书，就可以在世界范围内完成价值交换，具有极佳的流动性，就像历史上的黄金白银等商品货币所表现的那样。</p>
<p>这一优势是目前各国央行发行的法币所不具有的，各国法币之间的汇率具有很大的波动，不利于国际贸易和结算。</p>
<p>如果未来比特币价格稳定了，将其作为全球贸易的中介，则不会有国际汇率引起的一系列麻烦，这会促进贸易发展、增加全人类的福祉。</p>
<h3 id="国家安全">国家安全</h3>
<p>当前世界所通用的货币实际上是美元，所有国家都得储备美元来进行国际结算和贸易，也得依赖美元对新发行的货币进行价值背书。</p>
<p>如果不采用美元的话，国际贸易将因缺少一个统一的度量衡而难以进行。</p>
<p>而如果采用美元，则一方面使所有人都受制于美联储，被其不受控制的货币滥发收割，导致国家财富缩水；另一方面又存在被美国经济制裁的潜在可能性，国家安全始终受到潜在威胁，影响到国家政策的独立性。</p>
<p>对比而言，比特币纯粹由市场选择决定其价值，不依赖任何第三方的信用担保，又由去中心化机制决定其供给量不会滥发，若将其作为世界贸易新的基准，完全不用担心会被美国经济制裁。</p>
<h3 id="电子支付">电子支付</h3>
<p>比特币是网络时代的产物，天然具有电子支付（不仅限于网络）的能力，可以实现无视空间距离的远程价值交换。</p>
<p>这一点是传统的健全货币--黄金所不具备的优点。</p>
<p>黄金要想实现远程、在线结算，需要依赖于中心机构的托管凭证，而这又必将导致其被中心化托管，从而再度出现因为没有合理约束机制、托管黄金的中心机构将发行超过其储备量的黄金凭证的趋势，造成不可逆的通胀，如近百年来的历史所显示的那样。</p>
<p>比特币的电子支付，与银行的电子支付有很大区别。</p>
<p>其优点是个人完全享有主权，不会被银行因为总总原因而冻结，而且其支付金额没有上限，在进行跨国支付时不需要第三方机构审核与结算。</p>
<p>其缺点是众所周知的tps问题，即每秒处理的事务量，不过这可以通过闪电网络进行很好的解决。银行如果积极拥抱闪电网络，将可以保持目前的经营模式不发生很大的改变。</p>
<p>目前银行采用大数据分析，动不动就对公民财产进行所谓的“风控限制”，限制人们的现金提取、支付额度等等，甚至将很多人进行“冻卡”处理。这些过度干涉行为会导致很多潜在的经济活动消失，引起社会恐慌，会阻碍经济发展。</p>
<p>这些弊病，在以比特币为媒介的电子支付里是不会出现的。</p>
<h3 id="能源转型">能源转型</h3>
<p>比特币通过POW机制实现其记账的安全性，这其实就是将电能转化为了值得信赖的货币，其过程需要消耗大量的电力。</p>
<p>这也是它被抨击的一点，人们普遍从环保主义的角度说“挖矿”行为是一种能源浪费、会污染环境。</p>
<p>但这种批判其实也经不起推敲。</p>
<p>如果我们担心的是“挖矿”能源消耗太大，那么可以通过简单的计算得出：目前全球比特币挖矿一年所消耗的电力，尚不足中国一年电力的1.4%，也即不足全球总电力的0.47%。<em>（<a href="https://www.energyinst.org/__data/assets/pdf_file/0007/1408075/5456af7ed79ea2b1943197dce2f0b019e78f3ee2.pdf">数据来源见此</a>，采用了高估法计算比特币挖矿耗费的电能）</em></p>
<p>如果我们的重点是绿色环保，那么大可以规定“挖矿”只能使用绿色能源，对非绿色能源“挖矿”行为进行严惩。</p>
<p>这样，出于逐利动机，人们自然会大量兴建绿色能源发电站，将本来被浪费掉的没有被利用的风能、水能、太阳能等能源利用起来。</p>
<p>从而，支持和发展“绿色挖矿”的政策，不但不会造成能源不足，反而会刺激人们生产出更多的绿色能源，实现国家的能源转型和升级！在拉动能源市场上下游的同时还将增加国家的外汇收入和税收。</p>
<h2 id="最近的一些趋势">最近的一些趋势</h2>
<p>如上，比特币具有重要的划时代意义，于国于民都是大有裨益的。</p>
<p>我们从最近世界发生的一系列事件更能看出，其在当今世界占有越来越重要的地位：</p>
<ul>
<li><p>2023年11月19日，阿根廷的米莱当选总统，这得益于其提出的一系列大刀阔斧的经济改革措施，其中很重要的一条就是对加密货币的支持（<a href="https://m.jrj.com.cn/madapter/finance/2023/11/22113738521304.shtml">参见此处</a>）；</p></li>
<li><p>根据<a href="https://crypto.com">crypto.com</a>在2024年1月的研究报告（<a href="https://contenthub-static.crypto.com/wp_media/2024/01/Crypto-Market-Sizing-2023.pdf">参见此处</a>）指出，截止到2023年12月底，全球加密市场的参与总人数达到了5.8亿人；</p></li>
<li><p>2024年1月11日，美国证监会SEC宣布通过比特币ETF上市交易（<a href="https://www.stcn.com/article/detail/1088761.html">参见此处</a>）；</p></li>
<li><p>第一个将比特币作为法定货币（<a href="http://www.news.cn/2021-09/07/c_1127835957.htm">2021年9月6日</a>）的萨尔瓦多，经过近3年来的坚定增持比特币、以及该国对加密货币人才的吸引，其经济状况持续得到了改善，该国总统纳伊布·布克尔于2024年2月4日得到了人民的拥护获得连任（<a href="https://www.cssn.cn/zkzg/zkzg_zkfx/202402/t20240227_5735112.shtml">参见此处</a>）；</p></li>
<li><p>今年是美国总统大选年，特朗普作为候选者，大打支持加密货币牌（<a href="https://www.theblockbeats.info/news/53585">参见此处</a>），他将要确保世界新的一次巨大变革发生在美国（<a href="https://m.163.com/v/video/VQ26E94LT.html?clickfrom=subscribe&amp;spss=adap_pc">参见此处视频</a>）；为继续连任，拜登作为回应也在积极争取加密货币的支持者（<a href="https://zombit.info/biden-campaign-shifts-crypto-stance-engages-crypto-industry/">参见此处</a>）；</p></li>
<li><p>2024年5月，万事达卡（Mastercard）宣布推出P2P加密货币跨境支付试点（<a href="https://m.mpaypass.com.cn/news/202405/31095309.html">参见此处</a>）。</p></li>
</ul>
<p>本处只罗列了很少的一些事件和热点，但已经足以说明数字货币的发展趋势如火如荼。将其不问青红皂白“一刀切”的政策是短视的结果，是非常不明智、甚至可以说是很愚蠢的，是对民族未来不负责任的做法。</p>
<h2 id="顾虑担忧">顾虑担忧</h2>
<p>如果积极拥抱比特币，人们可能会有一些顾虑和担忧。</p>
<h3 id="会丢失掉货币主权吗">会丢失掉货币主权吗</h3>
<p>很多人可能会质疑：如果比特币成功了，那岂不是意味着国家会丧失掉货币主权？进而也失去货币政策的工具？</p>
<p>对于这个问题，我们从历史上就可以找到答案。</p>
<p>在人类最近2000多年来的文明历史中，主权货币所占的历史只是极其短暂的一瞬间。在漫长的历史绝大多数时间中，世界各地所使用的都是商品货币。商品货币天然具有的价值背书，不容易被滥发，可以支持长期的物价稳定和经济繁荣。</p>
<p>市场经济具有自我修复的能力，会自动趋向平衡。过度的货币干预虽然可以收获短期的效果，但最终会因为掩盖了价格反应的经济结构不合理而引发更大的问题。</p>
<p>货币的非主权化是大势所趋，放弃一个滥发货币的政策工具，却可以收获社会长期稳定和繁荣，于国于民都是利大于弊。</p>
<p>丢失掉主权货币发行权，反而会拥有更不受其他国家制约的超主权货币，起到的效果更好。不用再进行进退两难的外汇管制、汇率维护，可以减少冗余部门、减轻国民负担。</p>
<p>民富必然国强。</p>
<h3 id="犯罪会上升吗">犯罪会上升吗</h3>
<p>很多人认为比特币天然具有抗审查、隐匿性，是用来洗钱和做黑产的东西，是犯罪分子的温床。其实这是一个天大的误解。</p>
<p>比特币的隐私性充其量只能和历史上的黄金、纸币相似，是正常经济活动的诉求，我们总不能说黄金或纸币会导致犯罪率上升吧？</p>
<p>匿名性和抗审查恰恰是一种好的货币应该有的特点，在广泛使用纸币或黄金、白银、铜钱的年代，人们只关心收到的货币是不是假币，并不关心它们曾经经历过什么灰色或黑色的交易。</p>
<p>犯罪与否是司法机构定义与管理的事情，不能强加给货币。货币承载了其对应的不磨灭的价值，不能因为曾经有人用它犯过罪就丧失掉其价值。现在为打击犯罪，而将整个流程上下所有涉及者的资产全部冻结乃至没收的行为，会严重扰乱正常的社会经济活动。</p>
<p>犯罪与否是其他原因导致的，货币只是背书并保持其价值的工具，两者并无关系。</p>
<h3 id="会导致通缩吗">会导致通缩吗</h3>
<p>还有很多人会质疑比特币会不会引起通缩、造成经济衰退。</p>
<p>比特币在2140年之后将会停止增发，会进入存量流通的阶段。随着很多持有者的私钥丢失，会导致其总量减少，可能出现通缩。</p>
<p>考察人类历史上出现的著名通缩，不难发现通缩通常都是由于货币滥发后引起的，而且其引起经济衰退则更有复杂的社会、政治原因，并不单纯是货币问题。</p>
<p>市场具有自我调节的能力，如果采用的本位币天然就是通缩的，则人们会更慎重的考虑其资金使用，增加储蓄、减少资源浪费。</p>
<p>分析数据可见，比特币具有很高的存量-流通量比（<a href="https://charts.bitbo.io/stock-to-flow-v1/">参见此处</a>）和<a href="https://www.lookintobitcoin.com/charts/long-term-holder-supply/">长期持有数量</a>-<a href="https://www.lookintobitcoin.com/charts/short-term-holder-supply/">短期持有数量</a>之比。这意味着人们更多的会储存它而非流通，即便有一些比特币永久丢失，也只影响到储存部分、并不影响流通量。流通量与存量之间的比例关系，会受物价高低的影响而调整、进而也会反作用于物价，从而仍能保持物价的稳定。</p>
<h3 id="会对银行有什么影响">会对银行有什么影响</h3>
<p>或许有人会担心比特币会影响银行的业务，引起金融市场混乱。</p>
<p>若真到了全世界都采用比特币作为本位币的时候，只要银行存款、贷款的需求仍在，则其模式也不会被颠覆，不过其对应的技术会发生变化。</p>
<p>退一万步说，现代的银行模式，也不过是很近代的产物，其历史并不是很长，并不能期望这种商业模式会亘古不变。</p>
<h3 id="会让政府收入下降吗">会让政府收入下降吗</h3>
<p>政府的税收和其他财政收入都有其机制，不论是什么货币流通形式，都可以设计方案保证财政收入不受影响。</p>
<p>真正对政府有影响的是：不能再没有节制的超发货币了。</p>
<p>这具有的意义在上文中已经论述过了，本处再从财富分配的角度来看待这个问题。</p>
<p>若货币不滥发，则人民的财富不被收割。从而，因为通货膨胀而导致的、财富向少数与货币超发源头高相关者集中的现象会得到遏制，这会提高社会公平、让财富分配更合理、降低基尼系数。因此会增加普罗大众的福祉。</p>
<p>人民富裕了，国家自然也会富强，政府收入自然能水涨船高。人民更幸福了，社会自然更安定，国家凝聚力也会更强。</p>
<h2 id="目前政策存在的问题及危害">目前政策存在的问题及危害</h2>
<p>经过上面的论述，我们现在可以讨论目前我国关于比特币的政策存在的严重问题和危害。</p>
<h3 id="问题">问题</h3>
<p>支持这一系列政策的人说比特币只有炒作、投机价值，扰乱了金融秩序，其前景注定会失败。他们甚至都不愿意听一听加密货币业内相关人士的观点、给大家自由辩论的空间，就得出了上述结论，表现得非常自负，就和乾隆接见马戛尔时一样。</p>
<p>到目前为止，确实没有人敢打包票比特币一定会成功，可是宣告它失败的人却一个又一个都失败了，这反而证明它越来越有可能成功。</p>
<p>目前政策的支持者，似乎从来都没有认真客观的正视或了解比特币这一并不太新的事物。他们做的决定是基于比特币绝对会100%失败这样一个一厢情愿的前提，所以也就懒得回答下面这些问题：</p>
<ol type="1">
<li><p>万一比特币成功了，该怎么办？</p></li>
<li><p>倘若比特币真的成功了，如18世纪大英帝国在全世界建立起的金本位制度一样，我们难道还要继续重蹈满清坚持白银本位、导致所有国民的财富随着白银下跌而大幅缩水、沦为世界穷国的覆辙吗？</p></li>
<li><p>对于一个尚不能断定是否会成功的划时代创造，怎么能轻易的就将其禁止呢？</p></li>
<li><p>即令我国将其禁止了，却并不会影响其他国家对其进行采纳和善加利用，最后的后果岂不是将一大笔宝贵的财富和战略资源拱手让人？这和资敌有什么区别？</p></li>
<li><p>不论地缘战略将会怎么变化，我国都不可能再走独立于世界自成体系的闭关锁国之路，与其最后被动的接受，为何不一开始就努力拥抱、积极做领头人呢？</p></li>
</ol>
<h3 id="危害">危害</h3>
<p>长远来看，目前的政策不仅存在问题，还具有很大的危害。</p>
<p>照着目前几乎将比特币及其相关联的产业扫出国境的做法，必然会将大好的金融前景拱手让人，在令他国获益的同时、使我国丧失掉未来构建新的全球金融体系的世纪良机，这必将严重损害我国未来的国际地位。</p>
<p>同时，这种做法，也是在剥夺我国公民的合法权益，种下让子孙后代沦为世界分工体系下游的恶果。还将使我国在未来面临蒸发掉几代人的财富积累的危险，也将损害我国未来的科技创新和技术进步。</p>
<p>政策的支持者或许会说，比特币将冲击现存的银行体系，会引起市场混乱。</p>
<p>确实，它暂时可能不符合现存秩序下既得利益者的利益，可长远来看，它将一定会有益于所有人，包括它的反对者。</p>
<p>政策的决策不能永远被短期利益绑架，还更应该考虑长远利益。</p>
<h2 id="政策建议">政策建议</h2>
<p>目前全世界处于布雷顿森林体系崩坏后的货币时代，各国的货币发行都没有约束，如历史上反复揭示的那样，这种情况肯定不能长期维持下去。货币的不断腐坏，终究会因为灾难性的后果而崩溃。</p>
<p>回顾历史，1717年大英帝国建立起了金本位并积极维护之，这为其带来了近200年的世界霸权和长期繁荣。</p>
<p>一个负责任的大国，应该主动担当起这一历史责任，积极拥抱新时代的货币变革，改革历史遗留的积弊，积极争做潮流的引领者，为世界人民带来福音，构建未来数个世纪乃至更长时间的货币体系。这样的收益将会是巨大的。</p>
<p>这一愿景将有赖长期的努力，不会是一蹴而就的，所以我们的政策也需要循序渐进，既不能操之过急、又不能消极无为错过时机。</p>
<p>本处提出一些政策建议：</p>
<ol type="1">
<li>取消对数字货币的禁令，至少放宽对比特币的禁令，让民间有尝试的自由度；</li>
<li>央行将比特币也作为外汇储备货币，进行适量储备。这既可以减少对美元的依赖，又可以为人民币提供新的价值背书，还可以为未来构建新的货币体系作准备；</li>
<li>取消“挖矿”禁令，取而代之以“绿色挖矿”政策，处罚非绿色能源挖矿、鼓励兴建绿色能源挖矿；</li>
<li>允许民间或商业银行兴建闪电网络节点，为新型快速支付和银行存贷业务作准备，至少不应该禁止此类行为。</li>
</ol>
<h2 id="结语">结语</h2>
<p>任何政策决定，如果符合了客观规律就会进展顺利、天地同力，违背了客观规律则会举步维艰、乃至引起灾难性后果。</p>
<p>任何一个国家的决策，都将会影响到千千万万普通民众的福祉。</p>
<p>如果政策出现了与客观规律不符合的情况，亿万民众也将跟着政策制定者一起收获恶果。</p>
<p>作为一个负责任的公民，有义务且有必要指出其中的利弊，并分析其中原因，进而提出合理的建议，以供决策者参考商榷。</p>
<p>望执政者慎重权衡。</p>
]]></content>
      <categories>
        <category>政策</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
      </tags>
  </entry>
  <entry>
    <title>比特币均衡价格模型的残差分析</title>
    <url>/2024/12/27/%E6%AF%94%E7%89%B9%E5%B8%81%E5%9D%87%E8%A1%A1%E4%BB%B7%E6%A0%BC%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<p>在上一篇文章（<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/">参见此处</a>）中，我得出并着重分析了比特币均衡价格模型。不过限于篇幅，该篇文章中没有进行残差分析，本文对此进行弥补。</p>
<span id="more"></span>
<h2 id="残差分析">残差分析</h2>
<p>上篇文章所得出的模型值、原始值及残差情况如下：</p>
<figure>
<img src="BTC对数价格与模型拟合及残差.png" alt="BTC对数价格与模型拟合及残差">
<figcaption aria-hidden="true">BTC对数价格与模型拟合及残差</figcaption>
</figure>
<p>如上图可见残差没有明显的趋势，在0值附近上下波动。该残差波动有越来越小的趋势，显示价格与模型越来越贴近。</p>
<p>作出残差频率分布直方图，如下：</p>
<figure>
<img src="模型残差频率分布直方图.png" alt="模型残差频率分布直方图">
<figcaption aria-hidden="true">模型残差频率分布直方图</figcaption>
</figure>
<p>可见残差虽然不完美符合正态分布，但具有中间大、两头小的特征，可近似认为服从正态分布。这说明残差中包含的信息已经较少了。</p>
<p>进一步作出残差分位数与正态分布分位数的Q-Q图，如下：</p>
<figure>
<img src="模型残差值与标准正态分布的QQ图.png" alt="模型残差值与标准正态分布的QQ图">
<figcaption aria-hidden="true">模型残差值与标准正态分布的QQ图</figcaption>
</figure>
<p>可见分位数对比图近似处于一条直线上，这也说明模型残差近似服从正态分布。</p>
<h2 id="结论与展望">结论与展望</h2>
<p>经过残差分析，我们可以得出模型是有效的这一结论。</p>
<p>但仍值得指出的是，残差时序图中呈现出高低周期，大致以减半周期（4年）为周期。这意味着可能存在着一个、模型尚没有完全解释的周期性问题。鉴于减半次数尚少，不能断定残差中是否存在显著的周期性，这值得未来进一步观察研究。</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>模型</tag>
      </tags>
  </entry>
  <entry>
    <title>比特币价格与挖矿难度、时间、减半的关系</title>
    <url>/2024/12/19/%E6%AF%94%E7%89%B9%E5%B8%81%E4%BB%B7%E6%A0%BC%E4%B8%8E%E6%8C%96%E7%9F%BF%E9%9A%BE%E5%BA%A6%E3%80%81%E6%97%B6%E9%97%B4%E3%80%81%E5%87%8F%E5%8D%8A%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
    <content><![CDATA[<p>本文推导了比特币均衡价格与难度、时间、减半之间的数量关系，发现比特币对数均衡价格遵循一个多元线性模型。</p>
<p>本文利用数据对其进行了实证验证，发现该模型是有效的。</p>
<p>该模型可以解释很多现象、能够回答很多问题。其中预言比特币的价格未来会趋于平稳。</p>
<span id="more"></span>
<h2 id="前言">前言</h2>
<p>比特币的价格一直是人们关心的话题，我之前曾写了两篇（参见<a href="https://btcrainmaker.com/2023/09/25/由比特币已实现价格进行的一些推理/">链接1</a><a href="https://btcrainmaker.com/2023/10/17/比特币S2F模型还适用吗/">链接2</a>）讨论比特币价格模型的文章。</p>
<p>第一篇文章讨论了比特币减半行情的问题，并利用比特币的产量进行了价格建模；第二篇文章讨论了<a href="https://x.com/100trillionusd?s=21">PlanB</a>的<a href="https://medium.com/@100trillionUSD/modeling-bitcoins-value-with-scarcity-91fa0fc03e25">S2F</a>模型的一些问题，并对该模型进行了扩展。</p>
<p>不过这两篇文章的模型都存在一些不足：</p>
<ol type="1">
<li><p>第一篇利用泰勒展开，强制用对数供给量（logS）的高阶多项式函数来拟合对数价格（logP），显得太生硬、不自然，最后得到的6阶多项式没有理论基础支撑，纯属数据拟合结果；</p></li>
<li><p>第二篇文章，讨论到S2F模型的供给量增量（<span class="math inline">\(\Delta
S\)</span>）在2140年之后会趋近于0，从而导致S2F出现发散这一论断实际上存在不足。因为S2F模型的F是年产量、而非比特币增量。比特币年产量不仅仅是新“挖”出来的币，还应该包括区块上的手续费奖励。它们都是通过“挖矿”而获得的币，决定着比特币的边际成本。在考虑了手续费奖励后，S2F值就不会再发散了。</p></li>
</ol>
<p>本文对上述模型的问题进行了升级，通过如下方法得出了新的价格模型：</p>
<p>从“均衡价格与边际成本相等”这一经济学原理出发，利用挖矿难度估算挖矿成本（对应边际成本），考虑摩尔定律和通货膨胀带来的影响，得出了新的价格模型。</p>
<p>新的模型可以解释、比特币减半后价格为什么会出现阶跃分区现象（参见<a href="https://btcrainmaker.com/2023/10/17/比特币S2F模型还适用吗/#s2f简化模型建模">链接2</a>中的图），揭示出比特币具有时间价值，回答了比特币挖矿难度与价格之间存在着什么样的重要关系，该模型预示着比特币价格未来会趋于平稳。</p>
<p>接着，本文将从数据的角度对上述模型的有效性进行验证，同时得到模型中各变量的参数。</p>
<p>最后进行总结。</p>
<h2 id="价格模型推导">价格模型推导</h2>
<p>按照经济学原理，均衡价格（P）等于边际成本。即若新生产<span class="math inline">\(\Delta S\)</span>数量的产品、需要成本<span class="math inline">\(\Delta C\)</span>，则市场均衡价格为： <span class="math display">\[ \begin{equation} \label{eq01}
P=\frac{\Delta C}{\Delta S}
\end{equation}\]</span>
下面我们来计算比特币挖矿成本。值得指出的是，挖矿成本中的“矿机”成本、场地租赁成本、雇佣员工成本、甚至挖矿的利润等，都可以通过时间分摊的办法、吸收进电费成本（也即算力成本）之中。</p>
<p>假设t时刻，1次哈希运算的成本为<span class="math inline">\(n_t\)</span>（含上述各种成本），全网哈希率（也称“算力”）为<span class="math inline">\(h_t\)</span>（单位为“hash/s”），则在时间<span class="math inline">\(\Delta t\)</span>内的挖矿成本为： <span class="math display">\[ \begin{equation} \label{eq02}
\Delta C=n_t*h_t*\Delta t
\end{equation}\]</span> 在t时刻，假设单位电能（如1度电）可以产生<span class="math inline">\(u_t\)</span>次哈希运算，则该单位电能的成本（含上述各种成本）可以表述为：
<span class="math display">\[\begin{equation} \label{eq03}
E_t=u_t*n_t
\end{equation}\]</span>
上述的成本会受到很多因素的影响，如技术进步导致的电能供给增加、通胀引起电费和设备价格上升、市场需求季节性变化、工业化进步导致的需求增加、员工工资上涨、场地租赁费上涨等。</p>
<p>在这里，我简单的假定其他因素可以吸纳进“成本通胀率（r）”中。从而，“挖矿”时、获得单位电能对应的成本随时间如下变化：
<span class="math display">\[\begin{equation} \label{eq04}
E_t=E_0*(1+r)^t
\end{equation}\]</span> 其中<span class="math inline">\(E_0\)</span>是初始时间对应的成本，可视为常数。</p>
<p>另一方面，单位电能产生的哈希运算次数应该遵循<a href="https://zh.wikipedia.org/wiki/摩尔定律">摩尔定律</a>： <span class="math display">\[\begin{equation} \label{eq05}
u_t=\alpha *2^{t/\beta}
\end{equation}\]</span> 其中<span class="math inline">\(\alpha\)</span>和<span class="math inline">\(\beta\)</span>是摩尔定律的两个常数，分别对应初始值和增倍周期。</p>
<p>最后，<span class="math inline">\(\eqref{eq02}\)</span>中的<span class="math inline">\(h_t\)</span>可以用比特币挖矿难度（<span class="math inline">\(d_t\)</span>）来表达（背后原因可以参见<a href="https://bitcoin.stackexchange.com/questions/5838/how-is-difficulty-calculated">此处</a>）：
<span class="math display">\[\begin{equation} \label{eq06}
h_t=\overline{u}_0*d_t
\end{equation}\]</span> 其中<span class="math inline">\(\overline{u}_0\)</span>是比特币挖矿难度为“1”所对应的哈希率，为比特币主网的单位算力，是一个常数。</p>
<p>结合<span class="math inline">\(\eqref{eq02}\)</span>-<span class="math inline">\(\eqref{eq06}\)</span>，可以得到： <span class="math display">\[\begin{equation} \label{eq07}
P=\frac{E_0*(1+r)^t}{\alpha
*2^{t/\beta}}*\overline{u}_0*d_t*\frac{\Delta t}{\Delta S}
\end{equation}\]</span>
上式最后一项是单位产量所需要的时间，我们在这里讨论一下这一项：</p>
<ol type="1">
<li><p>由于比特币大约每10分钟产生一个新区块，<span class="math inline">\(\Delta
t\)</span>可以表示产生一个新区块的时间、约10分钟（本文后续采用的1天）；</p></li>
<li><p><span class="math inline">\(\Delta
S\)</span>包含区块奖励和区块打包手续费两部分，其中区块奖励部分会随着减半次数增加而指数减少；</p></li>
<li><p>若区块的手续费为0，则在一个产量减半周期内，<span class="math inline">\(\frac{\Delta t}{\Delta
S}\)</span>近似是一个常数，在不同减半周期间，该值会随着减半周期数增多而指数跳跃上升；</p></li>
<li><p>若考虑了手续费，在较早的减半周期内，手续费的影响较小，随着减半数增加，这一项中手续费的影响越来越重要；</p></li>
<li><p>随着比特币减半接近或已经完结（2140年），可以预期每个新区块都是满块，故每个区块的交易笔数近似固定，每笔交易的手续费是在最佳手续费率附近的随机数、总体上每个区块的手续费保持在某个均衡值（该值可能仍具有时间漂移）附近波动，因此减半完成后，<span class="math inline">\(\frac{\Delta t}{\Delta
S}\)</span>可以被近似视为一个统计上的常数；</p></li>
</ol>
<p>可以将<span class="math inline">\(1+r\)</span>记为<span class="math inline">\(r&#39;\)</span>，从而上式化为： <span class="math display">\[\begin{equation} \label{eq08}
P=E_0*r&#39;^t*\alpha ^{-1}*2^{-t/\beta}*\overline{u}_0*d_t*\frac{\Delta
t}{\Delta S}
\end{equation}\]</span> 对上式左右两边取对数，并将常数项合并，可得到：
<span class="math display">\[\begin{equation} \label{eq09}
log(P)=a+b*t+log(d_t)+log(\frac{\Delta t}{\Delta S})
\end{equation}\]</span> 其中a、b均为常数。</p>
<p>至此，我们便推导出了比特币的均衡价格公式。</p>
<p>需要指出的是：</p>
<blockquote>
<p>上述推导过程，虽然利用了成本通胀模型<span class="math inline">\(\eqref{eq04}\)</span>和摩尔定律模型<span class="math inline">\(\eqref{eq05}\)</span>，但是公式<span class="math inline">\(\eqref{eq09}\)</span>不仅仅适用于这两个模型，还可以是很多其他机制的时间模型，它们揭示比特币均衡价格与时间相关。</p>
</blockquote>
<p>接下来，对该公式进行一些讨论，可得到一些有意思的结论：</p>
<ol type="1">
<li>比特币对数价格与时间成正比，反映出比特币具有时间价值。若比特币未来成为本位货币，当前由通胀推动的成本价格上涨、将变为由通缩推动的成本价格缓慢下跌，此时比特币仍然具有时间价值；</li>
<li>比特币对数价格与挖矿难度的对数成正比，说明比特币挖矿难度对于定价具有至关重要的作用，两者之间是相互作用的关系。价格可以调节挖矿难度、挖矿难度也会影响价格的形成；</li>
<li>由于最后一项的存在，比特币对数价格会受到减半周期的影响，每次减半都会造成最后一项跳跃上升，从而导致比特币价格出现阶跃分区，直至减半接近完结；</li>
<li>摩尔定律引起的基础算力（或者单位电能产生的哈希次数）上升被吸收进了第二项中，与通胀一起决定比特币的时间价值，它反应的是技术进步引起的时间价值；</li>
<li>若比特币减半后挖矿难度持续上升，则由于最后两部分的影响，比特币价格会呈现出指数乘以指数的增长，从而导致价格大幅上升；</li>
<li>在减半接近完结时，手续费基本稳定，此后影响比特币价格的最大因素为难度<span class="math inline">\(d_t\)</span>对应的算力大小。鉴于此后的算力、一般不太可能大幅跳跃性变化，从而价格会趋于平稳。</li>
</ol>
<p>下面我将用数据来对此定价公式进行验证。</p>
<h2 id="数据实证">数据实证</h2>
<p>上文中的<span class="math inline">\(\eqref{eq09}\)</span>式可以视为一个有常数项的多元线性模型，我们先对等式左右各项的值进行可视化，以直观感受各变量之间的关系。</p>
<p>数据说明：</p>
<blockquote>
<ol type="1">
<li><p>本文的链上数据是通过自建全节点、直接从全节点获取；</p></li>
<li><p>价格数据采用的<a href="https://coinmarketcap.com/currencies/bitcoin/historical-data/">coinmarketcap</a>所收录的比特币日频历史收盘价格;</p></li>
<li><p>后文中数据频率采用的“1天”，对链上数据根据区块时间戳进行降频处理，对每日内的手续费和区块奖励进行加总，从而可以得到每日<span class="math inline">\(\Delta S\)</span>；</p></li>
<li><p>降频后保留当日最后一条难度数据作为当日难度值（<span class="math inline">\(d_t\)</span>）；</p></li>
<li><p>简单起见，时间值采用日频的天数，即<span class="math inline">\(\Delta t\)</span>值为1、代表1天。</p></li>
</ol>
</blockquote>
<p>对数价格（<span class="math inline">\(log(P)\)</span>）的时序图（横轴为日期）如下：</p>
<figure>
<img src="比特币对数价格时序图.png" alt="比特币对数价格时序图">
<figcaption aria-hidden="true">比特币对数价格时序图</figcaption>
</figure>
<p>每日区块奖励时序图如下：</p>
<figure>
<img src="比特币每日区块奖励时序图.png" alt="比特币每日区块奖励时序图">
<figcaption aria-hidden="true">比特币每日区块奖励时序图</figcaption>
</figure>
<p>每日区块手续费时序图如下：</p>
<figure>
<img src="比特币每日手续费时序图.png" alt="比特币每日手续费时序图">
<figcaption aria-hidden="true">比特币每日手续费时序图</figcaption>
</figure>
<p>上图在近期的数据不是很直观，将该图进行分段展示，效果如下：</p>
<figure>
<img src="比特币每日区块奖励分段时序图.png" alt="比特币每日区块奖励分段时序图">
<figcaption aria-hidden="true">比特币每日区块奖励分段时序图</figcaption>
</figure>
<p>可见区块奖励和手续费存在异常值（毛刺），可能会影响到模型的结论，需要对此进行修正，采用MAD法(<a href="https://btcrainmaker.com/2023/10/17/比特币S2F模型还适用吗/#s2f简化模型建模">具体参见此处</a>)对异常值进行过滤，滚动周期为30天、最小需要的观测数据量设定为10天。过滤后的每日区块奖励和每日手续费时序图如下：</p>
<figure>
<img src="mad法处理异常值后的区块奖励时序图.png" alt="mad法处理异常值后的区块奖励时序图">
<figcaption aria-hidden="true">mad法处理异常值后的区块奖励时序图</figcaption>
</figure>
<p>可见由于滚动mad法处理的影响，减半日的区块奖励变化会有一定的延迟才体现出来。</p>
<figure>
<img src="mad法处理异常值后的区块手续费时序图.png" alt="mad法处理异常值后的区块手续费时序图">
<figcaption aria-hidden="true">mad法处理异常值后的区块手续费时序图</figcaption>
</figure>
<p>调整后的奖励与手续费结合后（即为日产量<span class="math inline">\(\Delta S\)</span>）的时序图如下：</p>
<figure>
<img src="mad法处理异常值后的日产量时序图.png" alt="mad法处理异常值后的日产量时序图">
<figcaption aria-hidden="true">mad法处理异常值后的日产量时序图</figcaption>
</figure>
<p>可见在目前阶段，手续费对日产量的影响还较小，产量主要来自区块奖励。</p>
<p>得到了<span class="math inline">\(\Delta
S\)</span>后，我们可以作出<span class="math inline">\(log(\frac{\Delta
t}{\Delta S})\)</span>的时序图，对于日数据而言<span class="math inline">\(\Delta t=1\)</span>，故时序图如下：</p>
<figure>
<img src="mad法处理异常值后的log(dt:dS)时序图.png" alt="mad法处理异常值后的log(dt:dS)时序图">
<figcaption aria-hidden="true">mad法处理异常值后的log(dt:dS)时序图</figcaption>
</figure>
<p>可见这项呈现出明显的阶跃上升的现象，与上文所作的BTC对数价格走势有相似之处。</p>
<blockquote>
<p>说明：</p>
<p>后文中验证模型采用的数据均为处理了异常值之后的数值。</p>
</blockquote>
<p>然后，我们作出比特币挖矿难度的对数时序图，如下：</p>
<figure>
<img src="比特币挖矿对数难度值时序图.png" alt="比特币挖矿对数难度值时序图">
<figcaption aria-hidden="true">比特币挖矿对数难度值时序图</figcaption>
</figure>
<p>可见对数难度的时序图与对数价格的时序图也呈现出很明显的相关性。</p>
<p>进一步添加上天数和常数项，我们就可以进行多元线性回归了。</p>
<p>回归结果如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                            OLS Regression Results                            </span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Dep. Variable:                   logP   R-squared:                       0.956</span></span><br><span class="line"><span class="string">Model:                            OLS   Adj. R-squared:                  0.956</span></span><br><span class="line"><span class="string">Method:                 Least Squares   F-statistic:                 3.814e+04</span></span><br><span class="line"><span class="string">Date:                Thu, 26 Dec 2024   Prob (F-statistic):               0.00</span></span><br><span class="line"><span class="string">Time:                        14:18:28   Log-Likelihood:                -5828.3</span></span><br><span class="line"><span class="string">No. Observations:                5280   AIC:                         1.166e+04</span></span><br><span class="line"><span class="string">Df Residuals:                    5276   BIC:                         1.169e+04</span></span><br><span class="line"><span class="string">Df Model:                           3                                         </span></span><br><span class="line"><span class="string">Covariance Type:            nonrobust                                         </span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">                 coef    std err          t      P&gt;|t|      [0.025      0.975]</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">Intercept      2.6466      0.452      5.861      0.000       1.761       3.532</span></span><br><span class="line"><span class="string">logD           0.3632      0.004     99.451      0.000       0.356       0.370</span></span><br><span class="line"><span class="string">days           0.0002   2.86e-05      7.612      0.000       0.000       0.000</span></span><br><span class="line"><span class="string">logtS          0.7010      0.047     14.823      0.000       0.608       0.794</span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Omnibus:                      283.811   Durbin-Watson:                   0.017</span></span><br><span class="line"><span class="string">Prob(Omnibus):                  0.000   Jarque-Bera (JB):              329.880</span></span><br><span class="line"><span class="string">Skew:                           0.603   Prob(JB):                     2.33e-72</span></span><br><span class="line"><span class="string">Kurtosis:                       3.215   Cond. No.                     1.60e+05</span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Notes:</span></span><br><span class="line"><span class="string">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</span></span><br><span class="line"><span class="string">[2] The condition number is large, 1.6e+05. This might indicate that there are</span></span><br><span class="line"><span class="string">strong multicollinearity or other numerical problems.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>由表中t值、P值可见，所有项的回归参数都很显著，<span class="math inline">\(\eqref{eq09}\)</span>对应模型的<span class="math inline">\(R^2\)</span>值高达0.956，说明该模型很有效。</p>
<p>上述回归结果中提示“条件数很大、可能存在强多重共线性”。出现这一提示的原因是因为没有进行变量的归一化处理，这会导致数值的量级对条件数计算产生很大的影响。下面我们将验证是否是这个原因导致的。</p>
<p>可采用“min-max归一化”的办法对因变量与自变量进行归一化处理，即处理公式为：
<span class="math display">\[\begin{equation} \label{eq10}
x=\frac{x-x_{min}}{x_{max}-x_{min}}
\end{equation}\]</span> 归一化之后，再次回归，结果为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                            OLS Regression Results                            </span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Dep. Variable:                   logP   R-squared:                       0.956</span></span><br><span class="line"><span class="string">Model:                            OLS   Adj. R-squared:                  0.956</span></span><br><span class="line"><span class="string">Method:                 Least Squares   F-statistic:                 3.814e+04</span></span><br><span class="line"><span class="string">Date:                Thu, 26 Dec 2024   Prob (F-statistic):               0.00</span></span><br><span class="line"><span class="string">Time:                        15:09:33   Log-Likelihood:                 8272.1</span></span><br><span class="line"><span class="string">No. Observations:                5280   AIC:                        -1.654e+04</span></span><br><span class="line"><span class="string">Df Residuals:                    5276   BIC:                        -1.651e+04</span></span><br><span class="line"><span class="string">Df Model:                           3                                         </span></span><br><span class="line"><span class="string">Covariance Type:            nonrobust                                         </span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">                 coef    std err          t      P&gt;|t|      [0.025      0.975]</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">Intercept      0.0199      0.003      6.182      0.000       0.014       0.026</span></span><br><span class="line"><span class="string">logD           0.7166      0.007     99.451      0.000       0.702       0.731</span></span><br><span class="line"><span class="string">days           0.0795      0.010      7.612      0.000       0.059       0.100</span></span><br><span class="line"><span class="string">logtS          0.1786      0.012     14.823      0.000       0.155       0.202</span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Omnibus:                      283.811   Durbin-Watson:                   0.017</span></span><br><span class="line"><span class="string">Prob(Omnibus):                  0.000   Jarque-Bera (JB):              329.880</span></span><br><span class="line"><span class="string">Skew:                           0.603   Prob(JB):                     2.33e-72</span></span><br><span class="line"><span class="string">Kurtosis:                       3.215   Cond. No.                         32.5</span></span><br><span class="line"><span class="string">==============================================================================</span></span><br><span class="line"><span class="string">Notes:</span></span><br><span class="line"><span class="string">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>可见“条件数很大、可能存在强多重共线性”提示已经没有了，这说明上一次回归结果中提示的异常正是因为没有归一化引起的。本处回归结果显示，进行归一化之后的回归效果与没有归一化的一样。</p>
<p>回归结果显示对<span class="math inline">\(log(P)\)</span>影响最大的是<span class="math inline">\(log(d_t)\)</span>项，然后是<span class="math inline">\(log(\frac{\Delta t}{\Delta
S})\)</span>项，接着为时间项和常数项。</p>
<p>作出归一化处理后的对数价格与模型拟合的对数均衡价格之间的对比图，如下：</p>
<figure>
<img src="比特币对数价格与模型预测的对数均衡价格关系时序图.png" alt="比特币对数价格与模型预测的对数均衡价格关系时序图">
<figcaption aria-hidden="true">比特币对数价格与模型预测的对数均衡价格关系时序图</figcaption>
</figure>
<p>可见两者贴合的很好，说明该模型很符合实际情况。</p>
<p>进而，我们可以得到如下比特币均衡价格公式，该公式中各变量是没有归一化的原始值：
<span class="math display">\[\begin{equation} \label{eq11}
\begin{aligned}
log(P)=&amp;2.65+2.2e(-4)*t \\ &amp;+0.36*log(d_t) \\
&amp;+0.7*log(\Delta t/\Delta S)
\end{aligned}
\end{equation}\]</span>
原始值的对数价格、模型值以及标注了公式参数的时序图如下：</p>
<figure>
<img src="比特币对数价格vs模型预测值附公式参数.png" alt="比特币对数价格vs模型预测值附公式参数">
<figcaption aria-hidden="true">比特币对数价格vs模型预测值附公式参数</figcaption>
</figure>
<p>值的指出的是，比特币均衡价格模型具有正的时间相关参数（图中的0.00022），说明比特币确实具有正的时间价值，这一部分是因为成本通胀的原因，另一部分是因为技术进步的原因。</p>
<blockquote>
<p>说明：</p>
<ol type="1">
<li>关于本文模型的残差分析见后续文章（<a href="https://btcrainmaker.com/2024/12/27/比特币均衡价格模型的残差分析/">参见此处</a>）</li>
<li>本文所得模型是一个截面模型，可以计算出任意已发生时刻的比特币均衡价格</li>
<li>利用本文模型，结合自变量建模，可对BTC在未来一个周期的价格进行预测、模拟（<a href="https://btcrainmaker.com/2024/12/31/利用比特币均衡价格模型进行未来价格预测/#自变量建模">参见此处</a>）</li>
</ol>
</blockquote>
<h2 id="总结">总结</h2>
<p>首先，本文从经济学基本原理出发，利用挖矿成本与比特币产量计算均衡价格，考虑了摩尔定律和通货膨胀等对比特币挖矿成本的影响，推导得到了均衡价格与时间、挖矿难度、产量减半之间的关系。</p>
<p>进而，利用该模型，可以解释为什么比特币减半后价格会跳跃式大幅增长，且反映出比特币具有正的时间价值，同时解释了比特币挖矿难度为什么至关重要的原因。该模型甚至还揭示了比特币价格最终会趋于平稳的内在驱动原因。</p>
<p>然后，本文利用数据验证了该公式各变量之间的关系，发现公式中的各自变量项都具有显著的回归参数，证明了模型的有效性。同时，由回归结果可见、难度值（<span class="math inline">\(d_t\)</span>）是影响比特币均衡价格最大的因素。</p>
<p>最后，我们可以利用本文得出的比特币定价模型，在市场价格大幅偏离该模型预测值时，进行模型偏离套利。</p>
<h2 id="声明">声明</h2>
<p>本文只作为研究结果展示，不作为投资建议。</p>
<p>望读者自行斟酌参考。</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>模型</tag>
        <tag>链上数据</tag>
      </tags>
  </entry>
  <entry>
    <title>利用比特币均衡价格模型进行未来价格预测</title>
    <url>/2024/12/31/%E5%88%A9%E7%94%A8%E6%AF%94%E7%89%B9%E5%B8%81%E5%9D%87%E8%A1%A1%E4%BB%B7%E6%A0%BC%E6%A8%A1%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%9C%AA%E6%9D%A5%E4%BB%B7%E6%A0%BC%E9%A2%84%E6%B5%8B/</url>
    <content><![CDATA[<p>本文利用最近提出的比特币均衡价格模型（<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系">参见此处</a>），结合对未来难度、产量、残差等变量的建模，对比特币未来均衡价格进行预测，并通过生成随机数残差差分对未来价格进行模拟。</p>
<p>限于能力，本文只对未来一个周期的行情进行预测。</p>
<span id="more"></span>
<h2 id="自变量建模">自变量建模</h2>
<p>本文用<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系">参考文章</a>的公式（11）来对均衡价格进行预测，原式是一个截面模型，加上残差项后、该公式在时序上可表述如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq01}
\begin{aligned}
log(P_t)=&amp;2.65+2.2e(-4)*t \\ &amp;+0.36*log(d_t) \\
&amp;+0.7*log(\Delta t/\Delta S_t) \\ &amp;+\epsilon_t
\end{aligned}
\end{equation}\]</span></p>
<p>若是想要获得<span class="math inline">\(log(P_t)\)</span>的值，需要对<span class="math inline">\(log(d_t)\)</span>、<span class="math inline">\(log(\Delta t/\Delta S_t)\)</span>甚至<span class="math inline">\(\epsilon_t\)</span>进行建模。</p>
<p>标注了减半日的模型拟合效果如下：</p>
<figure>
<img src="标注了减半日的模型值实际值及残差.png" alt="标注了减半日的模型值实际值及残差">
<figcaption aria-hidden="true">标注了减半日的模型值实际值及残差</figcaption>
</figure>
<p>我们首先分析<span class="math inline">\(log(d_t)\)</span>的特征。</p>
<p>由于每次减半后产量减少，可以猜测难度遵循的规律会因为减半周期不同而不同。标注出减半日的对数难度图如下：</p>
<figure>
<img src="标注了减半日的对数难度时序图.png" alt="标注了减半日的对数难度时序图">
<figcaption aria-hidden="true">标注了减半日的对数难度时序图</figcaption>
</figure>
<p>由上图可见，在较早的减半周期，对数难度变化的斜率较大、越往后斜率越小。特征如下：</p>
<ol type="1">
<li>第一次减半（对应2009.01.09-2012.11.28），对数难度先经历快速上升、后下跌、然后平稳上升直到减半日；</li>
<li>第二次减半（对应2012.11.28-2016.07.09），对数难度与第一次减半一样，也是先快速上升，后趋于平稳，然后继续上升直到减半日；</li>
<li>第三次减半（对应2016.07.09-2020.5.11），对数难度先呈线性增长，经过短期下跌，然后以新的斜率线性增长；</li>
<li>第四次减半（对应2020.05.11-2024.04.20），对数难度先呈线性增长，经过短期下跌，然后以新的斜率线性增长，新旧斜率相差不大。</li>
</ol>
<p>如上，我们可以简单的假设第五次减半周期内（2024.04.20-约2028.03.26）对数难度以线性增长，斜率由最近的数据线性回归定出。当然，需要指出对数难度本身是一个具有随机性的数，会随着价格的上涨下跌而调整。模型只是在对其未来的可能性作简单的模拟。</p>
<p>作出最近一段时间的对数难度与BTC上线天数的回归图，如下：</p>
<figure>
<img src="最近时间对数难度与比特币上线天数回归图.png" alt="最近时间对数难度与比特币上线天数回归图">
<figcaption aria-hidden="true">最近时间对数难度与比特币上线天数回归图</figcaption>
</figure>
<p>如上图所示，我们可以如下预估未来一段时间的对数难度： <span class="math display">\[\begin{equation} \label{eq02}
log(d_t)=24.08+0.0014*t
\end{equation}\]</span> 接着，作出标注了减半日的产量相关项图，如下：</p>
<figure>
<img src="标注了减半日logtS时序图.png" alt="标注了减半日logtS时序图">
<figcaption aria-hidden="true">标注了减半日logtS时序图</figcaption>
</figure>
<p>可见在一个减半周期内，该值大体上是在均值上下震荡，作出2024-04-20之后的数据、并画出了均值（均值为-6.16）的时序图，如下：</p>
<figure>
<img src="最近减半周期产量相关项与其均值时序图.png" alt="最近减半周期产量相关项与其均值时序图">
<figcaption aria-hidden="true">最近减半周期产量相关项与其均值时序图</figcaption>
</figure>
<p>同时，还可作出产量相关项数值与比特币上线天数之间的回归图，以验证用均值来拟合这一项是否合理，如下：</p>
<figure>
<img src="最近减半周期产量相关项与比特币上线天数线性回归图.png" alt="最近减半周期产量相关项与比特币上线天数线性回归图">
<figcaption aria-hidden="true">最近减半周期产量相关项与比特币上线天数线性回归图</figcaption>
</figure>
<p>可见回归系数接近于0、且非常不显著（为0的概率很大），故可认为该项是在均值附近的白噪声。其统计情况如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">count    <span class="number">244.00</span></span><br><span class="line">mean      -<span class="number">6.16</span></span><br><span class="line">std        <span class="number">0.09</span></span><br><span class="line"><span class="built_in">min</span>       -<span class="number">6.44</span></span><br><span class="line"><span class="number">25</span>%       -<span class="number">6.22</span></span><br><span class="line"><span class="number">50</span>%       -<span class="number">6.16</span></span><br><span class="line"><span class="number">75</span>%       -<span class="number">6.10</span></span><br><span class="line"><span class="built_in">max</span>       -<span class="number">5.93</span></span><br></pre></td></tr></table></figure>
<p>可见<span class="math inline">\(log(\Delta t/\Delta
S_t)\)</span>服从如下分布：</p>
<p><span class="math display">\[\begin{equation} \label{eq03-1}
log(\Delta t/\Delta S_t)\sim N(-6.16,0.09)
\end{equation}\]</span></p>
<p>估计对数均衡价格时、只需要用期望值即可： <span class="math display">\[\begin{equation} \label{eq03}
log(\Delta t/\Delta S_t)=-6.16
\end{equation}\]</span></p>
<p>但在进行价格模拟时，该项相较于期望值的随机变化（该变化服从<span class="math inline">\(N(0,0.09)\)</span>分布）、也会对价格波动范围产生影响、可以考虑进去。</p>
<p>至此，价格模型只剩下残差项了。该项具有随机性，在每个减半周期内呈现出一定的周期变化，波动范围呈现出减小的趋势。我们先对各减半周期的残差进行统计分析，统计汇总表如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">         周期<span class="number">1</span>    周期<span class="number">2</span>     周期<span class="number">3</span>     周期<span class="number">4</span>    周期<span class="number">5</span></span><br><span class="line">count  <span class="number">869.00</span>  <span class="number">1319.00</span>  <span class="number">1402.00</span>  <span class="number">1440.00</span>  <span class="number">255.00</span></span><br><span class="line">mean    -<span class="number">0.22</span>     <span class="number">0.19</span>    -<span class="number">0.13</span>     <span class="number">0.10</span>   -<span class="number">0.09</span></span><br><span class="line">std      <span class="number">0.77</span>     <span class="number">0.98</span>     <span class="number">0.60</span>     <span class="number">0.52</span>    <span class="number">0.18</span></span><br><span class="line"><span class="built_in">min</span>     -<span class="number">2.24</span>    -<span class="number">1.10</span>    -<span class="number">1.21</span>    -<span class="number">0.79</span>   -<span class="number">0.46</span></span><br><span class="line"><span class="number">25</span>%     -<span class="number">0.83</span>    -<span class="number">0.73</span>    -<span class="number">0.61</span>    -<span class="number">0.32</span>   -<span class="number">0.23</span></span><br><span class="line"><span class="number">50</span>%     -<span class="number">0.20</span>    -<span class="number">0.15</span>    -<span class="number">0.15</span>    -<span class="number">0.03</span>   -<span class="number">0.12</span></span><br><span class="line"><span class="number">75</span>%      <span class="number">0.29</span>     <span class="number">1.08</span>     <span class="number">0.22</span>     <span class="number">0.52</span>    <span class="number">0.04</span></span><br><span class="line"><span class="built_in">max</span>      <span class="number">2.33</span>     <span class="number">2.64</span>     <span class="number">1.86</span>     <span class="number">1.23</span>    <span class="number">0.31</span></span><br></pre></td></tr></table></figure>
<p>上表除了周期5是未完成周期之外，其余均为已完结周期。没有明显规律，不能直接用上表对周期5的残差建模，但是可以利用上表统计结果、对残差模拟值进行过滤。对不符合上表中均值、标准差的残差随机数进行过滤。即，符合预期的残差大概应该满足如下条件：
<span class="math display">\[\begin{equation} \label{eq04}
\begin{cases}
|\overline{\epsilon_t}|&lt;0.013, \\ std(\epsilon_t)&lt;0.5
\end{cases}
\end{equation}\]</span> 为了找到残差的规律，我们先计算残差差分值，如下：
<span class="math display">\[\begin{equation} \label{eq05}
\Delta \epsilon_t=\epsilon_t-\epsilon_{t-1}
\end{equation}\]</span>
即用当前时刻的残差减去上一个时刻的残差，所得残差差分时序图如下：</p>
<figure>
<img src="残差差分时序图.png" alt="残差差分时序图">
<figcaption aria-hidden="true">残差差分时序图</figcaption>
</figure>
<p>由上图可见全时序的残差差分具有非常平稳的特征，可以将其推广到未完结的周期5。上图残差差分的统计值如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">count    <span class="number">5284.0000</span></span><br><span class="line">mean        <span class="number">0.0001</span></span><br><span class="line">std         <span class="number">0.0953</span></span><br><span class="line"><span class="built_in">min</span>        -<span class="number">0.9808</span></span><br><span class="line"><span class="number">25</span>%        -<span class="number">0.0595</span></span><br><span class="line"><span class="number">50</span>%         <span class="number">0.0006</span></span><br><span class="line"><span class="number">75</span>%         <span class="number">0.0603</span></span><br><span class="line"><span class="built_in">max</span>         <span class="number">0.4483</span></span><br></pre></td></tr></table></figure>
<p>可见均值非常接近0、标准差为0.0953，这意味着我们的残差差分值服从如下正态分布：
<span class="math display">\[\begin{equation} \label{eq06}
\Delta \epsilon_t \sim N(0.0001,0.0953)
\end{equation}\]</span> 利用上述正态分布生成<span class="math inline">\(\Delta
\epsilon_t\)</span>后累加、可以得到任意时刻的残差模拟值。</p>
<p>或许有朋友会质疑，资产价格等数据在进行对数差分后、是不是都会变成与上图类似的平稳时间序列图。即如果我们直接计算比特币的对数价格差（也称为对数收益率），是否也会得到如上图所示的平稳时间序列？如果这样，那模型的意义就值得怀疑了。</p>
<p>为了进一步说明模型的意义，作出对数价格差的时序图，如下：</p>
<figure>
<img src="对数价格差时序图.png" alt="对数价格差时序图">
<figcaption aria-hidden="true">对数价格差时序图</figcaption>
</figure>
<p>可见，对数价格差时序图明显不如残差差分时序图平稳，这意味着BTC对数价格中是存在额外信息的。通过上文所述模型，最后可以获得更好的近乎白噪声的残差差分值，说明蕴含潜在规律的信息被很大程度的包含进了模型之中。</p>
<p>至此，已经得到了可以对第5个减半周期价格预测和模拟的所有自变量模型。</p>
<h2 id="价格预测与模拟">价格预测与模拟</h2>
<p>首先，我们考虑没有残差项的模型价格，这反映的是比特币未来一个周期的均衡价格。对数价格的效果如下：</p>
<figure>
<img src="BTC对数价格及预测值.png" alt="BTC对数价格及预测值">
<figcaption aria-hidden="true">BTC对数价格及预测值</figcaption>
</figure>
<p>将y轴转换为原始价格（单位USD）后的预测效果如下：</p>
<figure>
<img src="BTC价格及预测值.png" alt="BTC价格及预测值">
<figcaption aria-hidden="true">BTC价格及预测值</figcaption>
</figure>
<p>如上可见，在下次减半时、对自变量建模后的均衡价格预测值达到<span class="math inline">\(\$193,125\)</span>左右，目前（2024-12-30）的均衡价格在<span class="math inline">\(\$80,630\)</span>左右。</p>
<p>值的指出的是：</p>
<ol type="1">
<li>上述预测价格受到难度模型<span class="math inline">\(\eqref{eq02}\)</span>的影响，该模型忽略了因未来难度波动而偏离线性模型的可能性，且该线性回归过程包含了大量上一减半周期的数据（对应2022.01.01-2024.04.20之间的数据），这部分数据可能会影响减半（2024.04.20）后的线性回归效果，从而产生预测误差；</li>
<li>在对产量相关项（<span class="math inline">\(log(\Delta t/\Delta
S_t)\)</span>）建模时，将该项的随机波动成分忽略、直接采用的减半后均值来进行预估，这也可能带来预测误差；</li>
<li>目前所得的均衡价格模型参数是通过全量数据回归所得，随着未来行情波动，该回归系数难免会失真，这也必然会导致预测出现偏差。</li>
</ol>
<p>最后，将残差项及产量项随机性加入，仍采用上面的自变量模型、来模拟有随机涨落的未来价格。</p>
<p>我们分别生成服从<span class="math inline">\(N(0.0001,0.0953)\)</span>和<span class="math inline">\(N(0,
0.09)\)</span>、长度为1182（对应预测天数）的两列随机数序列，第一列随机数累加后的残差模拟值序列需要满足条件<span class="math inline">\(\eqref{eq04}\)</span>。得到符合预期的残差序列后，将两列随机数与模型其他自变量估计值叠加，即可得到未来价格的模拟值。</p>
<p>某一次随机模拟的效果如下：</p>
<figure>
<img src="包含了随机残差项和随机产量项的BTC价格模拟.png" alt="BTC价格模拟">
<figcaption aria-hidden="true">BTC价格模拟</figcaption>
</figure>
<p>由以上模拟可见，虽然均衡价格在<span class="math inline">\(\$193,125\)</span>以下，但由于随机项的影响，价格可能会在未来一个周期内上涨至30万美元以上。</p>
<p>不过，该模拟结果会因为每次生成的随机数序列不同而不同，只可用于生成、展示符合模型预期的BTC随机价格、不能直接用于预测价格。</p>
<h2 id="总结">总结</h2>
<p>本文首先对BTC均衡价格模型进行了自变量建模，进而利用自变量模型、对未来一个周期的均衡价格进行了预测，最后叠加残差等随机项、进行了符合模型预期的BTC未来价格随机模拟。</p>
<h2 id="声明">声明</h2>
<p>本文所有观点或结论只作为研究成果展示，不作为投资建议，望读者自行斟酌！</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>模型</tag>
      </tags>
  </entry>
  <entry>
    <title>比特币均衡价格模型与全球m2</title>
    <url>/2025/05/15/%E6%AF%94%E7%89%B9%E5%B8%81%E5%9D%87%E8%A1%A1%E4%BB%B7%E6%A0%BC%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%85%A8%E7%90%83m2/</url>
    <content><![CDATA[<p>之前的《<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/">比特币价格与挖矿难度、时间、减半的关系</a>》一文存在3点不足之处，本文对其作了进一步的讨论。</p>
<p>本文对比特币均衡价格定价公式进行了修正，得到含系数的价格模型；揭示出比特币价格变动的4个重要外因与内因，有力的反驳了类似”比特币没有基本面“这样的观点；利用本文模型可解释比特币价格周期规律；对通胀与技术进步导致的比特币时间价值作了区分；对全球的M2数据进行了分析和回归；在月度数据频率上对模型进行了实证，得出了模型有效且显著的结论......</p>
<span id="more"></span>
<h2 id="前言">前言</h2>
<p>在之前那篇文章（<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/">参见此处</a>）中，我们得到并验证了比特币均衡价格与时间、挖矿难度和单位时间产量之间的关系：</p>
<p><span class="math display">\[\begin{equation} \label{eq01}
log(P)=a+b*t+log(d_t)+log(\frac{\Delta t}{\Delta S})
\end{equation}\]</span></p>
<p>不过，该文存在一些不足：</p>
<ol type="1">
<li>模型推导的<span class="math inline">\(log(d_t)\)</span>、<span class="math inline">\(log(\frac{\Delta t}{\Delta
S})\)</span>参数为1，这与回归结果不一样，回归结果参数不为1；</li>
<li>对摩尔定律项（参见该文公式<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/">（8）</a>）取对数，会出现负的时间参数，意味着在其他变量不变时、技术进步会引起均衡价格下跌，但该文将技术进步项和通胀项合并成一个时间变量，其参数为正、仅体现了正的时间价值，没有体现技术进步产生的负时间价值；</li>
<li>模型推导假定通胀率固定，这一点是否成立需要验证。</li>
</ol>
<p>本文针对这几个问题作进一步说明。</p>
<h2 id="模型修正">模型修正</h2>
<h3 id="推导">推导</h3>
<p>首先需要修正的是公式（1），即均衡价格不一定严格等于边际成本，而是边际成本的如下更普遍的函数：
<span class="math display">\[\begin{equation} \label{eq02}
P=a_1*(\frac{\Delta C}{\Delta S})^{a_2}
\end{equation}\]</span></p>
<p>其中<span class="math inline">\(a_1\)</span>、<span class="math inline">\(a_2\)</span>为参数。</p>
<p>原文的公式（2）将<span class="math inline">\(t\sim t+ \Delta
t\)</span>之间的全网算力<span class="math inline">\(h_t\)</span>视为固定值，这在<span class="math inline">\(\Delta
t\)</span>趋近于0的极限情况下才成立，但是在<span class="math inline">\(\Delta
t\)</span>为1天或1月时则不能这么简单处理，原文（2）式更严格的表达应该是：</p>
<p><span class="math display">\[\begin{equation} \label{eq03}
\Delta C=\int_t^{t+\Delta t}n_t*h_t*dt
\end{equation}\]</span></p>
<p>其中<span class="math inline">\(n_t\)</span>为t时刻1次哈希运算的成本，在间隔不太大的<span class="math inline">\(t\sim t+\Delta
t\)</span>时间段内可以近似为一个不变量，故可将<span class="math inline">\(n_t\)</span>提到积分符号之外。</p>
<p>获得单位电能对应的成本<span class="math inline">\(E_t\)</span>可以写成全球<span class="math inline">\(M2_t\)</span>的如下函数：</p>
<p><span class="math display">\[\begin{equation} \label{eq04}
E_t=a_3*(M2_t)^{a_4}
\end{equation}\]</span></p>
<p>重述前文的公式<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/">(3)</a>如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq05}
E_t=u_t*n_t
\end{equation}\]</span></p>
<p>单位电能产生的哈希运算次数<span class="math inline">\(u_t\)</span>仍然遵循摩尔定律：</p>
<p><span class="math display">\[\begin{equation} \label{eq06}
u_t=a_5*2^{a_6*t}
\end{equation}\]</span></p>
<p>从而可以得出<span class="math inline">\(n_t\)</span>遵循的规律如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq07}
\begin{aligned}
n_t &amp;=\frac{a_3*(M2_t)^{a_4}}{a_5*2^{a_6*t}} \\
&amp;=a_3/a_5*2^{-a_6*t}*(M2_t)^{a_4}
\end{aligned}
\end{equation}\]</span></p>
<p>比特币全网算力在理想情况下等于挖矿难度<span class="math inline">\(d_t\)</span>与单位难度对应算力<span class="math inline">\(\overline{u}_0\)</span>的乘积（也即原文（6）式），但是在1日或1月的频率上，全网算力与挖矿难度之间的关系不是简单的正比关系，而应该是与<span class="math inline">\(d_t\)</span>的某个函数成正比：</p>
<p><span class="math display">\[\begin{equation} \label{eq08}
h_t=\overline{u}_0*f(d_t)
\end{equation}\]</span></p>
<p>我们可以将<span class="math inline">\(\eqref{eq03}\)</span>式中的积分作如下函数变换：</p>
<p><span class="math display">\[\begin{equation} \label{eq09}
\begin{aligned}
\int_t^{t+\Delta t}h_t*dt&amp;=\overline{u}_0*\int_t^{\Delta t}f(d_t)*dt
\\ &amp;=\overline{u}_0*g(d_t)*\Delta t
\end{aligned}
\end{equation}\]</span></p>
<p>将上式中的<span class="math inline">\(g(d_t)\)</span>用以下函数形式表示：</p>
<p><span class="math display">\[\begin{equation} \label{eq10}
g(d_t)=\alpha * (d_t)^\beta
\end{equation}\]</span></p>
<p>将上述各式代入公式<span class="math inline">\(\eqref{eq02}\)</span>，同时对等式两边取对数，并将常数项合并后按顺序重命名，即得到如下形式：</p>
<p><span class="math display">\[\begin{equation} \label{eq11}
\begin{aligned}
log(P)&amp;= c_0+c_1*t+c_2*log(M2_t) \\
&amp;+c_3*log(d_t)+c_4*log(\frac{\Delta t}{\Delta S})
\end{aligned}
\end{equation}\]</span></p>
<p>也即得到了含有系数的对数关系，解决了前言提到的问题1。该式将通胀引起的时间价值和技术进步引起的时间价值分离成两个独立项，可以分别考察技术进步与通胀对均衡价格的影响，进而可以对问题2进行解释。</p>
<p>上式中等号右边依次为：常数项、由于技术进步（如摩尔定律）导致的时间相关项、全球货币超发引起的通货膨胀相关项、比特币挖矿难度相关项、单位时间比特币产量相关项。</p>
<h3 id="模型说明">模型说明</h3>
<p>下面将阐述<span class="math inline">\(\eqref{eq11}\)</span>式右侧中各项的意义：</p>
<ol type="1">
<li>由于技术进步导致的时间相关系数（<span class="math inline">\(c_1\)</span>）应该是负值，意味着技术进步会带来产品的成本价格下跌，这不仅仅适用于比特币、还适用很多其他产品，这一项不是比特币生产者能够直接干预的，是比特币价格变化的技术外因。</li>
<li>M2相关项与全球货币超发相关，因为BTC是一种全球性资产，任何国家的货币超发都会对它产生影响，这一项的系数（<span class="math inline">\(c_2\)</span>）为正数，意味着因为通货膨胀，会导致用法币计价的BTC价格上涨，这一项也不是比特币生产者能够直接干预的，是比特币价格变化的宏观外因。</li>
<li>比特币挖矿难度相关项，反应了比特币的生产端（或曰供给侧）对它价值的预估及根据当前价格对生产行为的调整，这一项是比特币生产者能够主动干预的，以适应市场价格和需求。同时，这一项也是市场需求端强弱的体现，反应了比特币的购买者对它价值的预估及对当前价格购买行为的调整。归根到底，此项是比特币设计机制的体现，是比特币网络为了适应外在市场情况而作出的调整。它可被视为比特币的基本面，既反应了比特币价格变化的市场外因、又反应了其调节机制的内因。</li>
<li>难度值（<span class="math inline">\(d_t\)</span>）会对价格产生影响：若难度上涨预示着成本的上涨，反应了矿工对当前及未来价格的乐观预期，在市场需求不变时，更高的成本会导致供给变少，引起价格上涨；若该项下跌预示着成本下跌，反应了矿工对当前及未来价格的悲观预期，在市场需求不变时，更低的成本会导致供给变多，引起价格下跌。这一情形是矿工们主动影响市场价格。</li>
<li>因为需求端导致的价格变化，也会对挖矿难度产生影响：若需求旺盛，促使价格上涨，矿工们的收益扩大，利润驱使更多的参与者加入，导致算力增加、引起难度上涨；若需求萎缩，促使价格下跌，矿工们的收益减少，发生亏损的参与者会停止或减少挖矿行为，导致算力减少、引起难度下跌。这一情形是矿工们被动的通过调节算力来适应需求端主导的市场价格。</li>
<li>单位时间产量相关项，这一项是比特币设计时预设的经济激励机制，不是矿工和市场需求者能够影响的，代表了比特币自身设计对价格的影响，是比特币价格变化的经济激励内因。</li>
<li>比特币的均衡价格是上述各种因素的总和结果。</li>
</ol>
<p>通过以上阐述，可以看出：</p>
<ol type="1">
<li><font color="red"><strong>比特币价格形成具有坚实的基本面基础、其变动有深刻原因。</strong></font></li>
<li><font color="red"><strong>人们通常臆测的一些过分简化的观点，如”比特币没有基本面“、“比特币只具有投机价值”或“比特币的价格上涨仅仅是因为投机泡沫”等等，是毫无道理的。</strong></font></li>
</ol>
<h3 id="对btc价格周期规律的解释">对BTC价格周期规律的解释</h3>
<p>由<span class="math inline">\(\eqref{eq11}\)</span>式各变量，可以解释比特币价格在一定历史时期中所呈现出的周期性：</p>
<ol type="1">
<li>由于产量减半，最后一项出现阶跃上升（在减半早期，这一阶跃增量约增加<span class="math inline">\(c_4*log2\)</span>，可参见前文关于公式（9）的<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/#价格模型推导">论述</a>）。在减半前后的一段时间里，其他项不发生较大变化，比特币均衡价格（与实际价格有区别）因这一增量而出现指数上涨，将均衡价格抬升到一个新的区域（不同减半周期会出现不同的价格区域，可参见<a href="https://btcrainmaker.com/2023/10/17/比特币S2F模型还适用吗/#s2f简化模型建模">比特币S2F模型还适用吗</a>一文中的“<span class="math inline">\(logM\)</span>与<span class="math inline">\(logS2F\)</span>线性回归图”），上一周期形成的价格、算力均衡会被打破；</li>
<li>矿工们有减半后均衡价格将会上涨的预期，即便产量减半，依然有动力去增加算力、抬高自己在全网算力所占的比例，以获得尽可能多的BTC，这一动机促使BTC挖矿难度上升，也会促使比特币均衡价格出现随时间推移的指数上升，<span class="math inline">\(\Delta t\)</span>内的上升幅度为<span class="math inline">\(\Delta d_t\)</span>；</li>
<li>比特币价格的上涨，会促使关于它的投资需求上升，这一点与一般商品有区别，因为作为投资品的价格上涨代表投资回报的增加，而不是如一般商品那样代表消费支出的增加，故投资品价格上涨不仅不会减少需求、反而会增加需求（历史表现会影响大众关于投资品的未来预期），这又会导致矿工利润扩大、更多算力涌入、难度再度上升，进一步推高价格，进入减半后价格上涨的正循环逻辑；</li>
<li>由于2、3导致价格持续上升，以至于远远高于均衡价格模型所预言的值，产生过大的正残差项，出现泡沫；</li>
<li>投资品的价格过高，一方面普通投资者不再能够有足够的资金维持其上涨，另一方面已经获利的投资者出于风险厌恶心理、有更多的抛售企图，最终价格上涨逻辑的临界点到来，泡沫开始破裂，出现价格下跌；</li>
<li>价格下跌会促使获利者的进一步抛售，潜在投资者出于风险厌恶持观望态度，导致价格进一步的下跌；</li>
<li>价格持续下跌，引起挖矿难度的下降，促使均衡价格下降，进入价格下跌的负循环逻辑，直至价格大幅低于均衡价格模型所预言的价格，产生较大的负残差项，出现超卖；</li>
<li>进入熊市后，由于宏观通胀因素始终存在，指数增长的M2资金部分涌入比特币市场，对下跌趋势有抑制作用，让熊市的价格得到部分依托；</li>
<li>另一方面，由于比特币本身的优异性及广泛的市场认可度、赋予其大宗商品的属性，在进入熊市后，比特币作为投资品的需求会减弱，此时其一般商品的属性凸显出来，即价格下跌，潜在卖出量会减少、潜在需求会增加，这一因素会让其价格下跌趋势减缓，最终趋于平衡；</li>
<li>直到新的减半到来，再次打破平衡，进入新的一轮价格周期。</li>
</ol>
<h2 id="数据说明">数据说明</h2>
<p>由于相较于之前文章新增了M2变量，故先对此变量进行数据说明。
可以从各大央行的数据库、<a href="https://fred.stlouisfed.org">FRED</a>数据库、<a href="https://data.worldbank.org">worldbank</a>数据库及<a href="https://tradingeconomics.com">tradingeconomics</a>数据库获取到世界各大经济体的广义货币（board
money，M2）的月频历史数据。限于规模，本文只取GDP排名前29的经济体的M2值，将本币计价的各M2值折算成美元计价，得到各经济体M2时序对比图如下：</p>
<figure>
<img src="全球top29经济体M2时序图.png" alt="全球top29经济体M2时序图">
<figcaption aria-hidden="true">全球top29经济体M2时序图</figcaption>
</figure>
<p>将历史数据任意一个经济体的M2数据存在空值的时间段删除，分别加总top4经济体和top29经济体的M2值，得到如下加总数据时序图：</p>
<figure>
<img src="全球top29经济体总M2及top4经济体总M2时序图.png" alt="全球top29经济体总M2及top4经济体总M2时序图">
<figcaption aria-hidden="true">全球top29经济体总M2及top4经济体总M2时序图</figcaption>
</figure>
<p>可见top4与top29的相似度非常高，照此推理我们采用top29的M2作为全球M2总量的代理变量是合理的，后文的M2值即为top29经济体的M2总和值。</p>
<p>作出<span class="math inline">\(log(M2)\)</span>的时序图，并对天数进行线性回归，得到如下线性回归散点图：</p>
<figure>
<img src="logM2与比特币上线天数的线性回归图.png" alt="logM2与比特币上线天数的线性回归图">
<figcaption aria-hidden="true">logM2与比特币上线天数的线性回归图</figcaption>
</figure>
<p>可见线性回归效果很好，这揭示出直接将通胀因素纳入时间相关项是合理的，且通胀系数可视为常数，从而解决了问题3。</p>
<p>作出月频对数比特币价格（<span class="math inline">\(log(P_t)\)</span>，记为<span class="math inline">\(logP\)</span>）时序图，如下：</p>
<figure>
<img src="BTC对数价格时序图.png" alt="BTC对数价格时序图">
<figcaption aria-hidden="true">BTC对数价格时序图</figcaption>
</figure>
<p>月频对数难度项（<span class="math inline">\(log(d_t)\)</span>，记为<span class="math inline">\(logD\)</span>）时序图如下：</p>
<figure>
<img src="BTC对数挖矿难度时序图.png" alt="BTC对数挖矿难度时序图">
<figcaption aria-hidden="true">BTC对数挖矿难度时序图</figcaption>
</figure>
<p>对数单位产量时间项（<span class="math inline">\(log(\frac{\Delta
t}{\Delta S})\)</span>，记为logtS）时序图如下：</p>
<figure>
<img src="BTC对数单位产量时间时序图.png" alt="BTC对数单位产量时间时序图">
<figcaption aria-hidden="true">BTC对数单位产量时间时序图</figcaption>
</figure>
<p>需要额外说明，上图中的值中采用了与前文（参见<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/#数据实证">数据实证</a>一节）一样的MAD异常值处理，先在日频上处理了日产量（包含区块奖励与手续费）的异常值、再将处理后的产量进行月度加总、进而得到<span class="math inline">\(logtS\)</span>值。</p>
<p>由各变量的时序图可见，对数价格走势与这几项相似。直观上模型具有一定的正确性，下面将用这些数据验证模型的有效性。</p>
<h2 id="数据实证">数据实证</h2>
<p>直接采用线性回归模型对<span class="math inline">\(\eqref{eq11}\)</span>各变量进行回归，结果如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">                            OLS Regression Results                            </span><br><span class="line">==============================================================================</span><br><span class="line">Dep. Variable:                   logP   R-squared:                       <span class="number">0.972</span></span><br><span class="line">Model:                            OLS   Adj. R-squared:                  <span class="number">0.971</span></span><br><span class="line">Method:                 Least Squares   F-statistic:                     <span class="number">1487.</span></span><br><span class="line">Date:                Mon, <span class="number">19</span> May <span class="number">2025</span>   Prob (F-statistic):          <span class="number">3.26e-132</span></span><br><span class="line">Time:                        <span class="number">11</span>:<span class="number">56</span>:<span class="number">27</span>   Log-Likelihood:                -<span class="number">156.12</span></span><br><span class="line">No. Observations:                 <span class="number">177</span>   AIC:                             <span class="number">322.2</span></span><br><span class="line">Df Residuals:                     <span class="number">172</span>   BIC:                             <span class="number">338.1</span></span><br><span class="line">Df Model:                           <span class="number">4</span>                                         </span><br><span class="line">Covariance <span class="type">Type</span>:            nonrobust                                         </span><br><span class="line">==============================================================================</span><br><span class="line">                 coef    std err          t      P&gt;|t|      [<span class="number">0.025</span>      <span class="number">0.975</span>]</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Intercept   -<span class="number">325.8850</span>     <span class="number">37.176</span>     -<span class="number">8.766</span>      <span class="number">0.000</span>    -<span class="number">399.265</span>    -<span class="number">252.505</span></span><br><span class="line">days          -<span class="number">0.0014</span>      <span class="number">0.000</span>     -<span class="number">6.619</span>      <span class="number">0.000</span>      -<span class="number">0.002</span>      -<span class="number">0.001</span></span><br><span class="line">logM2         <span class="number">10.4011</span>      <span class="number">1.148</span>      <span class="number">9.062</span>      <span class="number">0.000</span>       <span class="number">8.136</span>      <span class="number">12.667</span></span><br><span class="line">logD           <span class="number">0.4040</span>      <span class="number">0.017</span>     <span class="number">24.082</span>      <span class="number">0.000</span>       <span class="number">0.371</span>       <span class="number">0.437</span></span><br><span class="line">logtS          <span class="number">0.5258</span>      <span class="number">0.246</span>      <span class="number">2.141</span>      <span class="number">0.034</span>       <span class="number">0.041</span>       <span class="number">1.010</span></span><br><span class="line">==============================================================================</span><br><span class="line">Omnibus:                       <span class="number">26.338</span>   Durbin-Watson:                   <span class="number">0.275</span></span><br><span class="line">Prob(Omnibus):                  <span class="number">0.000</span>   Jarque-Bera (JB):               <span class="number">34.452</span></span><br><span class="line">Skew:                           <span class="number">0.913</span>   Prob(JB):                     <span class="number">3.30e-08</span></span><br><span class="line">Kurtosis:                       <span class="number">4.156</span>   Cond. No.                     <span class="number">3.00e+06</span></span><br><span class="line">==============================================================================</span><br><span class="line">Notes:</span><br><span class="line">[<span class="number">1</span>] Standard Errors assume that the covariance matrix of the errors <span class="keyword">is</span> correctly specified.</span><br><span class="line">[<span class="number">2</span>] The condition number <span class="keyword">is</span> large,  <span class="number">3e+06</span>. This might indicate that there are</span><br><span class="line">strong multicollinearity <span class="keyword">or</span> other numerical problems.</span><br></pre></td></tr></table></figure>
<p>可见：</p>
<ol type="1">
<li>各项的回归系数都很显著，<span class="math inline">\(R^2\)</span>值高达0.972（原模型的<span class="math inline">\(R^2\)</span>为0.956），F统计量值达1487、所有自变量系数为0的概率几乎为0（3.26e-132），说明模型的解释力非常强、模型作为整体的有效性非常显著；</li>
<li>时间项（<span class="math inline">\(days\)</span>）的系数为负，体现出技术进步对价格有负影响，技术进步降低了成本、有推动价格下跌的趋势，这一点与前文所期望的相符，印证了模型的正确性；</li>
<li>将通胀从时间项剥离后，发现其系数为正，说明通胀会推高比特币均衡价格；</li>
<li>难度项的t值最大，说明该项最显著；</li>
<li>产量相关项的t值较小，但在5%的显著水平下是显著的，这一项的t值与前文统计结果相比差异较大，这属于意料中的，毕竟此处采用的是月频数据；</li>
<li>仍然出现了“条件数很大、可能存在强多重共线性”的提示，这仍然是因为没有对变量进行归一化处理造成的，下文将验证之。</li>
</ol>
<p>先对<span class="math inline">\(logP\)</span>、<span class="math inline">\(days\)</span>、<span class="math inline">\(logM2\)</span>、<span class="math inline">\(logD\)</span>、<span class="math inline">\(logtS\)</span>进行“min-max归一化”，再进行线性回归，结果如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">                            OLS Regression Results                            </span><br><span class="line">==============================================================================</span><br><span class="line">Dep. Variable:                   logP   R-squared:                       <span class="number">0.972</span></span><br><span class="line">Model:                            OLS   Adj. R-squared:                  <span class="number">0.971</span></span><br><span class="line">Method:                 Least Squares   F-statistic:                     <span class="number">1487.</span></span><br><span class="line">Date:                Mon, <span class="number">19</span> May <span class="number">2025</span>   Prob (F-statistic):          <span class="number">3.26e-132</span></span><br><span class="line">Time:                        <span class="number">13</span>:<span class="number">44</span>:<span class="number">41</span>   Log-Likelihood:                 <span class="number">314.98</span></span><br><span class="line">No. Observations:                 <span class="number">177</span>   AIC:                            -<span class="number">620.0</span></span><br><span class="line">Df Residuals:                     <span class="number">172</span>   BIC:                            -<span class="number">604.1</span></span><br><span class="line">Df Model:                           <span class="number">4</span>                                         </span><br><span class="line">Covariance <span class="type">Type</span>:            nonrobust                                         </span><br><span class="line">==============================================================================</span><br><span class="line">                 coef    std err          t      P&gt;|t|      [<span class="number">0.025</span>      <span class="number">0.975</span>]</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Intercept      <span class="number">0.0176</span>      <span class="number">0.013</span>      <span class="number">1.345</span>      <span class="number">0.180</span>      -<span class="number">0.008</span>       <span class="number">0.043</span></span><br><span class="line">days          -<span class="number">0.5227</span>      <span class="number">0.079</span>     -<span class="number">6.619</span>      <span class="number">0.000</span>      -<span class="number">0.679</span>      -<span class="number">0.367</span></span><br><span class="line">logM2          <span class="number">0.5914</span>      <span class="number">0.065</span>      <span class="number">9.062</span>      <span class="number">0.000</span>       <span class="number">0.463</span>       <span class="number">0.720</span></span><br><span class="line">logD           <span class="number">0.7581</span>      <span class="number">0.031</span>     <span class="number">24.082</span>      <span class="number">0.000</span>       <span class="number">0.696</span>       <span class="number">0.820</span></span><br><span class="line">logtS          <span class="number">0.1196</span>      <span class="number">0.056</span>      <span class="number">2.141</span>      <span class="number">0.034</span>       <span class="number">0.009</span>       <span class="number">0.230</span></span><br><span class="line">==============================================================================</span><br><span class="line">Omnibus:                       <span class="number">26.338</span>   Durbin-Watson:                   <span class="number">0.275</span></span><br><span class="line">Prob(Omnibus):                  <span class="number">0.000</span>   Jarque-Bera (JB):               <span class="number">34.452</span></span><br><span class="line">Skew:                           <span class="number">0.913</span>   Prob(JB):                     <span class="number">3.30e-08</span></span><br><span class="line">Kurtosis:                       <span class="number">4.156</span>   Cond. No.                         <span class="number">49.6</span></span><br><span class="line">==============================================================================</span><br><span class="line">Notes:</span><br><span class="line">[<span class="number">1</span>] Standard Errors assume that the covariance matrix of the errors <span class="keyword">is</span> correctly specified.</span><br></pre></td></tr></table></figure>
<p>可见此时“条件数很大、可能存在强多重共线性”提示已经消失，说明该问题确实是因为没有归一化引起的。需要注意的是，在归一化后，截距项并不显著的与0相异，在5%甚至10%的显著水平下接受其为0的假设。说明新模型各自变量对因变量的解释非常好。</p>
<p>作出没有归一化的模型值、真实值及残差对比图，如下：</p>
<figure>
<img src="新均衡价格模型的拟合值真实值及残差对比图.png" alt="新均衡价格模型的拟合值真实值及残差对比图">
<figcaption aria-hidden="true">新均衡价格模型的拟合值真实值及残差对比图</figcaption>
</figure>
<p>归一化后的模型对比图如下：</p>
<figure>
<img src="归一化后的新均衡价格模型拟合值真实值及残差对比图.png" alt="归一化后的新均衡价格模型拟合值真实值及残差对比图">
<figcaption aria-hidden="true">归一化后的新均衡价格模型拟合值真实值及残差对比图</figcaption>
</figure>
<p>与原模型对比可见，各自变量参数值相近。</p>
<p>由于本文中模型采用的月频数据，同时限于M2数据的滞后性，若希望对未来价格进行推测，沿用之前的建模模型（参见<a href="https://btcrainmaker.com/2024/12/31/利用比特币均衡价格模型进行未来价格预测/">利用比特币均衡价格模型进行未来价格预测</a>），是合理且符合预期的。</p>
<h2 id="结论">结论</h2>
<p>本文针对之前提出的<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/#价格模型推导">比特币均衡价格模型</a>的3点不足之处进行了进一步探讨，通过修正推导的中间变量得到了带有系数的新模型，该模型正确区分了通胀与技术进步引起的时间效应，可以解释减半引起的比特币价格周期规律，</p>
<p>本文从理论及实证角度，有力的反驳了人们一贯对比特币基本面所持的负面观点，证实出比特币具有基本面，其均衡价格由宏观外因、技术外因、市场外因、机制内因、经济激励内因等共同驱动。</p>
<p>本文对全球top29经济体的M2进行了分析，借此解释了在<a href="https://btcrainmaker.com/2024/12/19/比特币价格与挖矿难度、时间、减半的关系/#价格模型推导">《比特币价格与挖矿难度、时间、减半的关系》</a>一文中将通胀率视为常数的原因。</p>
<p>对新模型的回归分析可见该模型非常显著有效，可以很好的解释比特币价格变化。</p>
<p><em>本文完！</em></p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>模型</tag>
        <tag>m2</tag>
      </tags>
  </entry>
  <entry>
    <title>加密货币市场的beta、市值和动量三因子</title>
    <url>/2025/04/02/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81%E5%B8%82%E5%9C%BA%E7%9A%84beta%E3%80%81%E5%B8%82%E5%80%BC%E5%92%8C%E5%8A%A8%E9%87%8F%E4%B8%89%E5%9B%A0%E5%AD%90/</url>
    <content><![CDATA[<p>本文先介绍了因子分析研究的方法，然后聚焦于加密货币市场，对该市场的三个重要因子（beta、市值和动量）进行分析，并利用它们构建投资组合、进行回测，以验证是否能够获得显著且稳定的收益，最后进行总结。</p>
<span id="more"></span>
<h2 id="引文">引文</h2>
<p>虽然关于因子投资的文章和书籍汗牛充栋，但相信大多数人看过那些资料之后、对如何运用因子进行交易仍然是一头雾水。</p>
<p>正因如此，才有了本文的写作动机：期望读者能够通过本文，了解到如何真正的利用因子进行投资。</p>
<p>当然，因子投资的应用方法肯定千差万别，本文阐述的仅仅只是其中一种。</p>
<blockquote>
<p><font color="red"><strong>声明：</strong></font></p>
<p><font color="red"><strong>鉴于本人水平有限，错谬之处在所难免，望读者海涵。文中的观点和结论不构成投资建议，读者需自行甄别。</strong></font></p>
</blockquote>
<h2 id="前言">前言</h2>
<p>多因子投资在股票市场上一直是主流的方法，但是在加密市场中可以查到的公开讨论文章数量较少。不过，这并不意味着多因子投资方法在加密货币市场不适用。</p>
<p>加密市场各币种之间具有较高的相关性，表现出同涨同跌的特征。这种特征实际上很适合构建多空组合，赚取相对收益。多因子分析是筛选出截面相对优劣的绝佳方法。</p>
<p>另外，在加密货币市场中有很多做空工具，如永续合约和杠杆交易等，能够获取到因子多空对冲收益。这一点是加密市场适合做多因子交易的又一个优势。</p>
<p>加密市场与股票市场一样，可以构建出很多因子（可以参见LUCIDA的文章<a href="https://medium.com/@Lucida_and_Falcon/lucida-用多因子模型去选赛道-选币种-c514fec4d8b9">见此处</a>）。限于篇幅，本文只对Liu(2019)等人提出的3因子模型（原文参见<a href="https://www.nber.org/system/files/working_papers/w25882/w25882.pdf">此处</a>）中的beta、市值（size）和动量（mom）3个因子进行测试，探究这3个因子是否可以构建出具有显著超额收益的组合。其中动量因子只测试1日动量（mom_1）和1周（7天）动量（mom_7）两种。</p>
<p>本文的重点不在于提出多因子模型或验证多因子模型的有效性，而在于弄清楚是否可以利用上述3个因子获得真实可交易、稳定且显著的收益。粗俗的讲，我们的目的是赚钱，是尽量在承担相同风险下、更稳定的赚取更多的收益，而不在于解释市场。</p>
<p>本文首先将会对上述3因子进行统计分析，进而进行单因子及双因子排序分组测试，然后根据分组表现选择投资组合，接着择优进行考虑了交易成本的回测，最后得出结论。</p>
<h2 id="分析方法">分析方法</h2>
<p>现将本文用到的因子分析方法集中阐述如下，后文会适时的根据下面介绍的方法进行分析测试。</p>
<h3 id="因子统计分析">因子统计分析</h3>
<p>对所研究因子的IC/IR值、因子值统计量、因子相关性等进行分析。</p>
<p>这些统计可以让我们对研究对象有个大概的把握。</p>
<h3 id="单因子排序">单因子排序</h3>
<p>根据单因子值在截面上的相对大小，按照从小到大的顺序，对币种进行分组，总共分成10组。</p>
<p>用次期收益率根据市值和等权重两种加权方法进行组合，得到每组的收益率时间序列。</p>
<p>展示出每组的期望收益率情况，作出单因子散点线性回归图，检查因子与收益率之间的关系。</p>
<h3 id="双因子排序">双因子排序</h3>
<p>通过控制其中一个因子的分组，对另一个因子进行二次排序，即可得到条件双排的分组。</p>
<p>由于双排需要更多的合约数量，只需分成<span class="math inline">\(5\times 5\)</span>的双排分组即可。</p>
<p>双排后，作出各组通过等权重及市值加权两种方式的收益率期望的对比图，并适时有选择性的筛选一些重点组作出时序图。</p>
<h3 id="投资组合选择">投资组合选择</h3>
<p>在完成单、双排分析后，就需要挑选出投资组合，以构建多空组合。</p>
<p>本文会优先挑选收益率期望值相对较高和较低的组合，做多（long）截面期望收益率较高组合、做空（short）较低组合，来构建市场中性的多空组合。</p>
<p>再通过统计分析，验证这种组合的收益率是否具有显著溢价。</p>
<p>要是在这种情况下，因子组合的表现不佳，足以说明该因子不能直接被用于获得超额收益。</p>
<p>如果选择的组合表现优异，则可以用其组建因子收益率。可以进一步验证这种组合是否对截面各组具有很好的区分度。如果区分较好，则对它的暴露高低会反映组合期望收益率大小。不过限于篇幅，本文不进行这样的讨论。</p>
<h3 id="模拟交易回测">模拟交易回测</h3>
<p>在不考虑任何交易成本时，如果组合表现优异，还需要对其进行考虑了交易成本（包括手续费和滑点）的回测，本文进行的回测还会考虑资金费率对持仓的影响。</p>
<p>在回测时采用复利滚动建仓，这样更能测试出任意时刻资金的收益和回撤情况。</p>
<h2 id="数据说明">数据说明</h2>
<ol type="1">
<li>市值数据来源于<a href="https://coinmarketcap.com">coinmarketcap</a>，用每日收盘时市值（以USD衡量）的对数作为当日的size因子值；</li>
<li>为了便于做空，标的范围及价格数据限定为币安USDT本位永续合约，包含了历史上已经下架的合约数据；</li>
<li>数据频率为日频，价格为币安永续合约的收盘价；</li>
<li>测试币种的范围选取规则为，选取每日在coinmarketcap市值排名前1000名的币，且该日在币安存在可交易U本位永续合约；</li>
<li>市场因子用BTC来代理，原因可以参见<a href="https://btcrainmaker.com/2023/09/14/加密市场的市场因子/">此处</a>；</li>
<li>本文将传统意义的无风险利率近似视为0，这样处理有两个原因：一是由于加密货币市场的收益率（绝对值）相对于无风险利率而言通常很大、无风险利率和0差不多；二是我们只关心收益，不关心相对无风险利率的超额收益；</li>
<li>将各合约与BTC收益率以30天为滚动窗口进行线性回归，回归系数beta即为滚动期末对应合约的beta因子值；</li>
<li>用1日收盘价格涨跌幅作为mom_1，7日收盘价涨跌幅作为mom_7。</li>
</ol>
<p>在进行因子分析之前，需要对数据有个大概了解，至少需要知道每日的交易池里有多少个币种（合约）。作出每日合约数量的时序图，如下：</p>
<figure>
<img src="每日合约数量分段时序图.png" alt="每日合约数量分段时序图">
<figcaption aria-hidden="true">每日合约数量分段时序图</figcaption>
</figure>
<p>上图左上第一张图为全时序的合约数量走势，后面3张分别展示了将全时间段等分成3段的合约数量走势。</p>
<p>可见符合条件的合约数量呈现增长趋势，大体上自2020年6月之后便有了25个以上的合约。</p>
<h2 id="因子统计分析-1">因子统计分析</h2>
<p>三因子的描述性统计值如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">             beta        size       mom_1       mom_7</span><br><span class="line">count  <span class="number">282147.000</span>  <span class="number">293893.000</span>  <span class="number">293517.000</span>  <span class="number">291106.000</span></span><br><span class="line">mean        <span class="number">1.213</span>      <span class="number">19.903</span>       <span class="number">0.001</span>       <span class="number">0.004</span></span><br><span class="line">std         <span class="number">0.510</span>       <span class="number">1.801</span>       <span class="number">0.066</span>       <span class="number">0.178</span></span><br><span class="line"><span class="built_in">min</span>        -<span class="number">3.541</span>      <span class="number">15.834</span>      -<span class="number">0.752</span>      -<span class="number">0.959</span></span><br><span class="line"><span class="number">25</span>%         <span class="number">0.918</span>      <span class="number">18.596</span>      -<span class="number">0.031</span>      -<span class="number">0.090</span></span><br><span class="line"><span class="number">50</span>%         <span class="number">1.187</span>      <span class="number">19.607</span>      -<span class="number">0.000</span>      -<span class="number">0.007</span></span><br><span class="line"><span class="number">75</span>%         <span class="number">1.506</span>      <span class="number">20.890</span>       <span class="number">0.029</span>       <span class="number">0.077</span></span><br><span class="line"><span class="built_in">max</span>         <span class="number">7.883</span>      <span class="number">28.374</span>       <span class="number">4.500</span>       <span class="number">5.592</span></span><br></pre></td></tr></table></figure>
<p>计算三个因子的秩IC（下文的IC值均为秩IC），时序值的描述性统计结果如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">           beta      size     mom_1     mom_7</span><br><span class="line">count  <span class="number">1923.000</span>  <span class="number">1953.000</span>  <span class="number">1952.000</span>  <span class="number">1946.000</span></span><br><span class="line">mean     -<span class="number">0.011</span>     <span class="number">0.018</span>    -<span class="number">0.036</span>    -<span class="number">0.044</span></span><br><span class="line">std       <span class="number">0.249</span>     <span class="number">0.251</span>     <span class="number">0.224</span>     <span class="number">0.240</span></span><br><span class="line"><span class="built_in">min</span>      -<span class="number">1.000</span>    -<span class="number">1.000</span>    -<span class="number">1.000</span>    -<span class="number">1.000</span></span><br><span class="line"><span class="number">25</span>%      -<span class="number">0.154</span>    -<span class="number">0.128</span>    -<span class="number">0.150</span>    -<span class="number">0.187</span></span><br><span class="line"><span class="number">50</span>%      -<span class="number">0.012</span>     <span class="number">0.011</span>    -<span class="number">0.037</span>    -<span class="number">0.055</span></span><br><span class="line"><span class="number">75</span>%       <span class="number">0.131</span>     <span class="number">0.161</span>     <span class="number">0.080</span>     <span class="number">0.081</span></span><br><span class="line"><span class="built_in">max</span>       <span class="number">1.000</span>     <span class="number">1.000</span>     <span class="number">1.000</span>     <span class="number">1.000</span></span><br></pre></td></tr></table></figure>
<p>IC、IC绝对值大于各临界值及IR值的汇总表如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">       |IC|&gt;<span class="number">0.02</span>  IC&gt;<span class="number">0.02</span>  |IC|&gt;<span class="number">0.05</span>  IC&gt;<span class="number">0.05</span>  |IC|&gt;<span class="number">0.1</span>  IC&gt;<span class="number">0.1</span>  |IC|&gt;<span class="number">0.2</span>  IC&gt;<span class="number">0.2</span>     IR</span><br><span class="line">beta       <span class="number">0.916</span>    <span class="number">0.431</span>      <span class="number">0.801</span>    <span class="number">0.381</span>     <span class="number">0.622</span>   <span class="number">0.296</span>     <span class="number">0.354</span>   <span class="number">0.165</span> -<span class="number">0.043</span></span><br><span class="line">size       <span class="number">0.937</span>    <span class="number">0.487</span>      <span class="number">0.814</span>    <span class="number">0.429</span>     <span class="number">0.632</span>   <span class="number">0.331</span>     <span class="number">0.353</span>   <span class="number">0.200</span>  <span class="number">0.071</span></span><br><span class="line">mom_1      <span class="number">0.915</span>    <span class="number">0.374</span>      <span class="number">0.774</span>    <span class="number">0.305</span>     <span class="number">0.564</span>   <span class="number">0.212</span>     <span class="number">0.261</span>   <span class="number">0.092</span> -<span class="number">0.159</span></span><br><span class="line">mom_7      <span class="number">0.933</span>    <span class="number">0.362</span>      <span class="number">0.816</span>    <span class="number">0.304</span>     <span class="number">0.627</span>   <span class="number">0.218</span>     <span class="number">0.341</span>   <span class="number">0.117</span> -<span class="number">0.184</span></span><br></pre></td></tr></table></figure>
<p>可见3个因子的IC绝对值大于0.02的比例较高，信息比率绝对值最大的为周动量mom_7。</p>
<p>作出IC值的累积和（cumsum）时序图如下：</p>
<figure>
<img src="三因子累积IC时序图.png" alt="三因子累积IC时序图">
<figcaption aria-hidden="true">三因子累积IC时序图</figcaption>
</figure>
<p>可见几个因子的累积IC值均表现出持续上升或下降的趋势，表明这几个因子预测能力持续有效。</p>
<p>用IC值衡量的三因子的相关性如下：</p>
<figure>
<img src="因子IC相关性热图.png" alt="因子IC相关性热图">
<figcaption aria-hidden="true">因子IC相关性热图</figcaption>
</figure>
<p>可见：</p>
<ol type="1">
<li>总体上这几个因子的IC相关性均较低；</li>
<li>beta因子与另几个因子呈现负IC相关性；</li>
<li>mom_1与mom_7表现出相对较高的正相关；</li>
<li>动量因子（mom_1、mom_7）与beta、size因子的相关性很低；</li>
<li>beta因子与size因子呈现出相对较高的负相关性。</li>
</ol>
<h2 id="单因子">单因子</h2>
<h3 id="beta因子">beta因子</h3>
<p>将每日的beta值按照从大到小的顺序排序，分组成10个组进行组合，即为因子单排组合。</p>
<p>下面将分成等权重和市值加权两种组内加权方式进行分析。顺便一提，对于后文讨论的双排、也会分成这两种加权方式进行分析。</p>
<h4 id="等权重加权">等权重加权</h4>
<p>B单因子等权重加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">           B1        B2       B3       B4       B5       B6       B7       B8       B9     B10      HML</span><br><span class="line">stat                                                                                                   </span><br><span class="line">mean   <span class="number">0.127</span>   <span class="number">0.201</span> **   <span class="number">0.116</span>    <span class="number">0.153</span>    <span class="number">0.144</span>    <span class="number">0.175</span>    <span class="number">0.174</span>   <span class="number">0.216</span> *   <span class="number">0.191</span>   <span class="number">0.206</span>    <span class="number">0.078</span> </span><br><span class="line">t     (<span class="number">1.259</span>)    (<span class="number">1.97</span>)  (<span class="number">1.149</span>)  (<span class="number">1.371</span>)  (<span class="number">1.291</span>)  (<span class="number">1.522</span>)  (<span class="number">1.515</span>)  (<span class="number">1.777</span>)  (<span class="number">1.613</span>)  (<span class="number">1.59</span>)  (<span class="number">1.003</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>表中的t值为Newey-West调整后的值（下同），<span class="math inline">\(HML=B10-B1\)</span>。</p>
</blockquote>
<p>作出散点图：</p>
<figure>
<img src="beta因子各组期望收益率-等权重加权.png" alt="等权重加权beta因子各组期望收益率">
<figcaption aria-hidden="true">等权重加权beta因子各组期望收益率</figcaption>
</figure>
<blockquote>
<p>上图中的红线是各组的因子值与其收益率均值的线性回归结果，图中还标注了回归函数、p值、<span class="math inline">\(R^2\)</span>值。后文类似图均如此。</p>
</blockquote>
<p>可见beta最小组也与BTC有0.56的相关性。各组的beta均值与期望收益率呈现出正相关性，这与CAPM模型描述的相似，但线性回归结果不是很显著。</p>
<p>各组时序表现情况如下：</p>
<figure>
<img src="beta因子各组收益率时序图-等权重加权.png" alt="等权重加权beta因子各组收益率时序图">
<figcaption aria-hidden="true">等权重加权beta因子各组收益率时序图</figcaption>
</figure>
<blockquote>
<p>上图中标注了每个组的收益统计情况，其中ann是复合年化收益率、MDD为测试期间的最大回撤、sharpe为测试时间内的夏普率。后文图中的这几个标注含义均如此。</p>
</blockquote>
<p>可见在上一轮牛市期间，B2和B8组表现出相对其他组更优异的收益。但是在熊市时，却都出现非常大的回撤。各分组的收益分层并不稳定。</p>
<h4 id="市值加权">市值加权</h4>
<p>B单因子市值加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">           B1       B2       B3       B4       B5       B6       B7       B8      B9      B10       HML</span><br><span class="line">stat                                                                                                   </span><br><span class="line">mean  <span class="number">0.159</span> *  <span class="number">0.187</span> *   <span class="number">0.146</span>    <span class="number">0.164</span>    <span class="number">0.163</span>    <span class="number">0.153</span>    <span class="number">0.133</span>   <span class="number">0.195</span> *  <span class="number">0.122</span>    <span class="number">0.101</span>    -<span class="number">0.058</span> </span><br><span class="line">t     (<span class="number">1.775</span>)  (<span class="number">1.917</span>)  (<span class="number">1.535</span>)  (<span class="number">1.585</span>)  (<span class="number">1.404</span>)  (<span class="number">1.348</span>)  (<span class="number">1.145</span>)  (<span class="number">1.646</span>)  (<span class="number">1.06</span>)  (<span class="number">0.821</span>)  (-<span class="number">0.632</span>)</span><br></pre></td></tr></table></figure>
<p>散点图如下：</p>
<figure>
<img src="beta因子各组期望收益率-市值加权.png" alt="市值加权beta因子各组期望收益率">
<figcaption aria-hidden="true">市值加权beta因子各组期望收益率</figcaption>
</figure>
<p>各组时序图如下：</p>
<figure>
<img src="beta因子各组收益率时序图-市值加权.png" alt="市值加权beta因子各组收益率时序图">
<figcaption aria-hidden="true">市值加权beta因子各组收益率时序图</figcaption>
</figure>
<h4 id="组合">组合</h4>
<p>可见在等权重与市值两种加权方式下，beta因子各组的期望收益率差异很大，一个呈正相关、另一个呈负相关，说明市值对beta因子有影响。</p>
<p>beta因子单排不论是市值还是等权重加权，均没有表现出稳定的收益分层。说明该因子是一个风险因子。</p>
<p>我们可以尝试在等权重组合里选择如下多空组合：</p>
<p><span class="math display">\[\begin{equation} \label{eq01}
port01_B=(B2+B8)/2-B3
\end{equation}\]</span></p>
<p>在不考虑交易成本时收益效果如下：</p>
<figure>
<img src="beta因子组合1收益时序图.png" alt="beta因子组合1收益时序图">
<figcaption aria-hidden="true">beta因子组合1收益时序图</figcaption>
</figure>
<p>可见虽然该组合各子组合的波动很大，但是多空组合后最大回撤显著降低。虽然正收益不是很稳定，但是该组合具有较显著的正收益，且在上述各分段时间内都具有正的夏普率，说明该因子具有一定的收益能力。</p>
<p>虽然，组合收益不及预期，但是我们仍然进行考虑了交易成本的回测，以观察beta因子的换手率。考虑了0.001交易成本及资金费率的组合1的表现如下：</p>
<figure>
<img src="beta因子组合1收益时序图-1倍杠杆0.001成本.png" alt="beta因子组合1收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">beta因子组合1收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<blockquote>
<p>上图中ann指的几何平均年化收益率、MDD指的最大回撤、sharpe指的夏普率、tv指的是组合日度再平衡的换手率、com指的考虑了滑点的总交易成本、fr指的是在回测区间内被收取的总资金费率值。后文图中标注均与此同。</p>
</blockquote>
<p>可见该因子组合的换手率较高，这符合逻辑，因为通过30日收益率回归得到的beta因子本身不够稳定，每日分组变化较大。长期来看，组合的收益几乎完全被成本磨损掉了。</p>
<h3 id="市值因子">市值因子</h3>
<p>在股票市场里，小市值一般具有相对大市值而言更高的期望收益率。我们将讨论加密市场的市值因子是否表现出与股票市场相似的特征。</p>
<p>仍然分为市值加权和等权重加权两种方法组合。</p>
<h4 id="等权重加权-1">等权重加权</h4>
<p>S单因子等权重加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">            S1        S2       S3       S4       S5       S6      S7       S8       S9      S10      HML</span><br><span class="line">stat                                                                                                    </span><br><span class="line">mean  <span class="number">0.284</span> **  <span class="number">0.251</span> **   <span class="number">0.076</span>    <span class="number">0.118</span>   <span class="number">0.193</span> *    <span class="number">0.13</span>   <span class="number">0.178</span>    <span class="number">0.102</span>    <span class="number">0.111</span>   <span class="number">0.157</span> *  -<span class="number">0.126</span> </span><br><span class="line">t      (<span class="number">2.142</span>)   (<span class="number">2.023</span>)  (<span class="number">0.625</span>)  (<span class="number">1.004</span>)  (<span class="number">1.774</span>)  (<span class="number">1.139</span>)  (<span class="number">1.49</span>)  (<span class="number">0.964</span>)  (<span class="number">1.106</span>)   (<span class="number">1.74</span>)  (-<span class="number">1.45</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望值散点图如下：</p>
<figure>
<img src="size因子各组期望收益率-等权重加权.png" alt="等权重加权size因子各组期望收益率">
<figcaption aria-hidden="true">等权重加权size因子各组期望收益率</figcaption>
</figure>
<p>可见等权重下，各组的size均值与期望收益率之间呈现负相关性，也就是说小市值的币种相较于大市值具有溢价，不过对这一相关性的线性回归不太显著。在市值最大S10组，出现有悖于线性拟合的正溢价，这与市值最大组内存在市场公认的优秀价值币有关系。</p>
<p>各组的时序图如下：</p>
<figure>
<img src="size因子各组收益率时序图-等权重加权.png" alt="等权重加权size因子各组收益率时序图">
<figcaption aria-hidden="true">等权重加权size因子各组收益率时序图</figcaption>
</figure>
<p>可见各组的分层现象并不稳定，如：S7组在20-21年间的相对表现很好，但是在21-23年间S7的相对表现就非常糟糕；S1组在20-21年间的表现一般，但是在22-25年间的相对表现就变得很好；S3组在20-21年及23-25年相对表现很差，但是在21-23年间的相对表现有很长一段时间不太差。</p>
<h4 id="市值加权-1">市值加权</h4>
<p>S单因子市值加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">           S1        S2       S3       S4       S5       S6       S7       S8       S9       S10       HML</span><br><span class="line">stat                                                                                                      </span><br><span class="line">mean  <span class="number">0.258</span> *  <span class="number">0.245</span> **   <span class="number">0.076</span>    <span class="number">0.122</span>   <span class="number">0.189</span> *   <span class="number">0.135</span>    <span class="number">0.182</span>    <span class="number">0.101</span>    <span class="number">0.118</span>   <span class="number">0.177</span> **   -<span class="number">0.081</span> </span><br><span class="line">t     (<span class="number">1.947</span>)   (<span class="number">1.976</span>)  (<span class="number">0.623</span>)  (<span class="number">1.038</span>)  (<span class="number">1.737</span>)  (<span class="number">1.186</span>)  (<span class="number">1.517</span>)  (<span class="number">0.956</span>)  (<span class="number">1.173</span>)   (<span class="number">2.276</span>)  (-<span class="number">0.859</span>)</span><br></pre></td></tr></table></figure>
<p>散点图如下：</p>
<figure>
<img src="size因子各组期望收益率-市值加权.png" alt="市值加权size因子各组期望收益率">
<figcaption aria-hidden="true">市值加权size因子各组期望收益率</figcaption>
</figure>
<p>可见市值因子在小市值区域有较显著的溢价。在市值最大的S10组，也具有较显著的正溢价（t值2.276），如前所述，这与经验相符，因为公认的价值币基本都在市值最大组的范围内。</p>
<p>各组时序图：</p>
<figure>
<img src="size因子各组收益率时序图-市值加权.png" alt="市值加权size因子各组收益率时序图">
<figcaption aria-hidden="true">市值加权size因子各组收益率时序图</figcaption>
</figure>
<p>可见，与等权重一样，各组的分层并不稳定。</p>
<h4 id="组合-1">组合</h4>
<p>与beta单因子分析一样，我们构建单size分组、等权重加权下、最优多空对冲投资组合，如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq02}
port02_S=S1-B3
\end{equation}\]</span></p>
<p>在不考虑交易成本时，该组合的表现如下：</p>
<figure>
<img src="size因子组合2收益时序图.png" alt="size因子组合2收益时序图">
<figcaption aria-hidden="true">size因子组合2收益时序图</figcaption>
</figure>
<p>可见组合2的效果较好，长期的几何平均年化收益率达到0.9、夏普率1.53、最大回撤0.37，这一组合似乎能够获得较显著稳健的收益。</p>
<p>我们进一步考虑交易成本为0.001（手续费及滑点）时，组合2的表现，结果如下：</p>
<figure>
<img src="size因子组合2收益时序图-1倍杠杆0.001成本.png" alt="size因子组合2收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">size因子组合2收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见组合2的换手率不高，该组合虽相较于0成本、0资金费率测试有所下降，但是总体而言仍然是比较好的，可以获得较稳定的正收益。</p>
<p>分段展示：</p>
<figure>
<img src="size因子组合2收益时序图-1倍杠杆0.001成本-分段.png" alt="size因子组合2收益时序图-1倍杠杆0.001成本-分段">
<figcaption aria-hidden="true">size因子组合2收益时序图-1倍杠杆0.001成本-分段</figcaption>
</figure>
<p>最近3年的逐年展示：</p>
<figure>
<img src="size因子组合2收益时序图-1倍杠杆0.001成本-逐年.png" alt="size因子组合2收益时序图-1倍杠杆0.001成本-逐年">
<figcaption aria-hidden="true">size因子组合2收益时序图-1倍杠杆0.001成本-逐年</figcaption>
</figure>
<p>对数展示：</p>
<figure>
<img src="size因子组合2收益时序图-1倍杠杆0.001成本-对数.png" alt="size因子组合2收益时序图-1倍杠杆0.001成本-对数">
<figcaption aria-hidden="true">size因子组合2收益时序图-1倍杠杆0.001成本-对数</figcaption>
</figure>
<p>上文中所采用的投资组合只是作为示例，已经可以看出即便是利用单市值因子就可以获得风险溢价。</p>
<h3 id="mom1因子">mom1因子</h3>
<p>动量因子是一个历史悠久的因子，广泛存在于各个市场，表现出优异的跨市场溢价能力。那么它在加密市场中是否也能大放异彩？我们对此进行研究。</p>
<p>通过上文IC分析可见，动量因子的IC累积值比beta和size因子的更稳定、持续、陡峭，似乎意味着它能够获得更显著的收益。我们先从1日动量开始。</p>
<h4 id="等权重加权-2">等权重加权</h4>
<p>M1_单因子等权重加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">         M1_1     M1_2     M1_3      M1_4      M1_5      M1_6      M1_7     M1_8     M1_9    M1_10      HML</span><br><span class="line">stat                                                                                                       </span><br><span class="line">mean    <span class="number">0.01</span>    <span class="number">0.18</span> *   <span class="number">0.106</span>   <span class="number">0.266</span> **  <span class="number">0.242</span> **  <span class="number">0.226</span> **  <span class="number">0.216</span> **    <span class="number">0.2</span> *   <span class="number">0.172</span>    <span class="number">0.031</span>    <span class="number">0.021</span> </span><br><span class="line">t     (<span class="number">0.084</span>)  (<span class="number">1.646</span>)  (<span class="number">0.954</span>)   (<span class="number">2.245</span>)    (<span class="number">2.26</span>)   (<span class="number">1.962</span>)   (<span class="number">2.021</span>)  (<span class="number">1.809</span>)  (<span class="number">1.471</span>)  (<span class="number">0.268</span>)  (<span class="number">0.279</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望值散点图如下：</p>
<figure>
<img src="mom1因子各组期望收益率-等权重加权.png" alt="mom1因子各组期望收益率-等权重加权">
<figcaption aria-hidden="true">mom1因子各组期望收益率-等权重加权</figcaption>
</figure>
<p>各组时序图：</p>
<figure>
<img src="mom1因子各组收益率时序图-等权重加权.png" alt="mom1因子各组收益率时序图-等权重加权">
<figcaption aria-hidden="true">mom1因子各组收益率时序图-等权重加权</figcaption>
</figure>
<p>可见1日动量因子的分层效应很显著，M1_4、M1_5组（中等动量组）在各时间段里基本上都处于表现很好的组，M1_1（动量最低组）、M1_10（动量最高组）的表现在各时间段的表现都处于最差组。说明在等权重加权下，1日动量表现出动量崩溃效应，这与很多其他市场中的结论一样。</p>
<h4 id="市值加权-2">市值加权</h4>
<p>M1_单因子市值加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">          M1_1      M1_2     M1_3      M1_4      M1_5     M1_6      M1_7     M1_8     M1_9    M1_10       HML</span><br><span class="line">stat                                                                                                         </span><br><span class="line">mean   -<span class="number">0.031</span>   <span class="number">0.201</span> **   <span class="number">0.042</span>   <span class="number">0.237</span> **  <span class="number">0.189</span> **  <span class="number">0.189</span> *  <span class="number">0.229</span> **   <span class="number">0.18</span> *  <span class="number">0.194</span> *  <span class="number">0.215</span> *  <span class="number">0.246</span> **</span><br><span class="line">t     (-<span class="number">0.242</span>)   (<span class="number">2.034</span>)  (<span class="number">0.399</span>)   (<span class="number">2.327</span>)   (<span class="number">2.005</span>)  (<span class="number">1.753</span>)   (<span class="number">2.386</span>)  (<span class="number">1.732</span>)  (<span class="number">1.663</span>)  (<span class="number">1.711</span>)   (<span class="number">2.289</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望值散点图如下：</p>
<figure>
<img src="mom1因子各组期望收益率-市值加权.png" alt="mom1因子各组期望收益率-市值加权">
<figcaption aria-hidden="true">mom1因子各组期望收益率-市值加权</figcaption>
</figure>
<p>可见在市值加权下，1日动量因子的表现与等权重加权的发生了变化，说明市值因子对动量因子有影响。但是在动量最小组（M1_1）、中等动量组（M1_4、M1_5等）的结论仍然成立，只是动量最大组（M1_10）的结论不成立了，没表现出显著的动量崩溃效应。</p>
<p>各组时序图：</p>
<figure>
<img src="mom1因子各组收益率时序图-市值加权.png" alt="mom1因子各组收益率时序图-市值加权">
<figcaption aria-hidden="true">mom1因子各组收益率时序图-市值加权</figcaption>
</figure>
<p>通过时序图可以看出在市值加权下，动量最高组M1_10在牛市阶段（20-21年）表现优异、好于其他组，呈现正的动量效应，但是在熊市（21末-23年）则表现很差。</p>
<h4 id="组合-2">组合</h4>
<p>对1日动量，我们以等权重加权分析为主。故本处以等权重方式构建投资组合，组合如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq03}
\begin{aligned}
port03_{M1}=&amp;(M1\_4+M1\_5)/2 \\
&amp;-(M1\_1+M1\_10)/2
\end{aligned}
\end{equation}\]</span></p>
<p>不考虑交易成本时的表现如下：</p>
<figure>
<img src="mom1因子组合3收益时序图.png" alt="mom1因子组合3收益时序图">
<figcaption aria-hidden="true">mom1因子组合3收益时序图</figcaption>
</figure>
<p>可见在不考虑交易成本时，1日动量因子的表现非常优异，具有显著、稳定的溢价，组合的长期年化收益率达到116%、最大回撤43%、夏普率2.14。</p>
<p>在考虑率0.001的交易成本和资金费率等因素后，组合3的表现如下：</p>
<figure>
<img src="mom1因子组合3收益时序图-1倍杠杆0.001成本.png" alt="mom1因子组合3收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">mom1因子组合3收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见，考虑了真实交易成本后，组合3的溢价能力消失。</p>
<p>产生这样结果的原因是1日动量因子的变化太剧烈、频繁，导致投资组合每日交易的换手率高达2.82，产生过高的交易成本，收益不能覆盖交易成本，最后发生亏损。这是一个典型的不考虑交易成本和考虑交易成本后结论完全不一样的例子。</p>
<p>由于最终效果不佳，没必要进一步作出分段图等。</p>
<h3 id="mom7因子">mom7因子</h3>
<p>上文对1日动量组合进行考虑了成本的测试，最终因为换手率过高，导致该因子组合不能直接在真实交易上获取稳定收益，促使我们思考通过更大周期的动量来降低换手率。因此本处对7日（1周）动量进行测试。</p>
<h4 id="等权重加权-3">等权重加权</h4>
<p>M7_单因子等权重加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">         M7_1     M7_2     M7_3     M7_4     M7_5     M7_6     M7_7    M7_8     M7_9    M7_10       HML</span><br><span class="line">stat                                                                                                   </span><br><span class="line">mean   <span class="number">0.033</span>    <span class="number">0.164</span>   <span class="number">0.205</span> *   <span class="number">0.177</span>   <span class="number">0.196</span> *    <span class="number">0.16</span>   <span class="number">0.22</span> **  <span class="number">0.138</span>    <span class="number">0.182</span>   <span class="number">0.217</span> *  <span class="number">0.184</span> **</span><br><span class="line">t     (<span class="number">0.284</span>)  (<span class="number">1.421</span>)  (<span class="number">1.814</span>)  (<span class="number">1.608</span>)  (<span class="number">1.737</span>)  (<span class="number">1.436</span>)   (<span class="number">1.97</span>)  (<span class="number">1.27</span>)  (<span class="number">1.605</span>)  (<span class="number">1.793</span>)   (<span class="number">2.124</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率散点图如下：</p>
<p><img src="mom7因子各组期望收益率-等权重加权.png" alt="mom7因子各组期望收益率-等权重加权">可见1周动量表现出正动量效应。</p>
<p>各组收益时序图：</p>
<figure>
<img src="mom7因子各组收益率时序图-等权重加权.png" alt="mom7因子各组收益率时序图-等权重加权">
<figcaption aria-hidden="true">mom7因子各组收益率时序图-等权重加权</figcaption>
</figure>
<p>由时序图可见：最高动量组在牛市（20-21）时表现很好，但是在熊市（21末-23初）和调整市（23-25）表现不佳；最低动量组基本全时段表现均垫底。等权重加权下该因子的分层不是很稳定。</p>
<h4 id="市值加权-3">市值加权</h4>
<p>M7_单因子市值加权各组期望收益率:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">          M7_1     M7_2     M7_3     M7_4     M7_5    M7_6      M7_7     M7_8      M7_9    M7_10        HML</span><br><span class="line">stat                                                                                                       </span><br><span class="line">mean   -<span class="number">0.046</span>    <span class="number">0.111</span>   <span class="number">0.179</span> *   <span class="number">0.155</span>   <span class="number">0.183</span> *  <span class="number">0.132</span>   <span class="number">0.215</span> **  <span class="number">0.199</span> *  <span class="number">0.269</span> **  <span class="number">0.29</span> **  <span class="number">0.336</span> ***</span><br><span class="line">t     (-<span class="number">0.366</span>)  (<span class="number">1.071</span>)  (<span class="number">1.723</span>)  (<span class="number">1.442</span>)  (<span class="number">1.892</span>)  (<span class="number">1.28</span>)   (<span class="number">2.151</span>)  (<span class="number">1.935</span>)   (<span class="number">2.298</span>)  (<span class="number">2.377</span>)    (<span class="number">2.944</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率散点图如下：</p>
<figure>
<img src="mom7因子各组期望收益率-市值加权.png" alt="mom7因子各组期望收益率-市值加权">
<figcaption aria-hidden="true">mom7因子各组期望收益率-市值加权</figcaption>
</figure>
<p>可见在市值加权下1周动量值与期望收益率的单调性非常好，表现出较显著的正动量效应。这一结论与等权重加权有一定的差异，说明市值对1周动量有影响。</p>
<p>各组收益时序图：</p>
<figure>
<img src="mom7因子各组收益率时序图-市值加权.png" alt="mom7因子各组收益率时序图-市值加权">
<figcaption aria-hidden="true">mom7因子各组收益率时序图-市值加权</figcaption>
</figure>
<p>可见1周动量最高的两组M7_9、M7_10仍然是在牛市时表现最好，在熊市时不佳；最低动量组M7_1在全时段几乎都垫底。</p>
<h4 id="组合-3">组合</h4>
<p>鉴于1周动量的市值加权比等权重加权表现更好，故采取组内市值加权法，选用如下投资组合：</p>
<p><span class="math display">\[\begin{equation} \label{eq04}
\begin{aligned}
port04_{M7}=&amp;(M7\_9+M7\_10)/2 \\ &amp;-M7\_1
\end{aligned}
\end{equation}\]</span></p>
<p>不考虑交易成本时，表现如下：</p>
<figure>
<img src="mom7因子组合4收益时序图.png" alt="mom7因子组合4收益时序图">
<figcaption aria-hidden="true">mom7因子组合4收益时序图</figcaption>
</figure>
<p>可见不考虑成本时，该组合具有显著的溢价，但是并不如不考虑成本时的1日动量稳定。长期复合年化收益率139%、最大回撤71%、夏普率1.48，可见最大回撤过大。</p>
<p>考虑0.001成本及资金费率时，表现如下：</p>
<figure>
<img src="mom7因子组合4收益时序图-1倍杠杆0.001成本.png" alt="mom7因子组合4收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">mom7因子组合4收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见1周动量的换手率虽然相较于1日动量有所下降，但是仍然太大，以至于组合收益不能抵消交易成本，使最终的表现较差。</p>
<h2 id="因子双排">因子双排</h2>
<p>本处总共进行beta-size、mom1-size、mom1-beta三种双排，选为控制变量的因子应该具有值更稳定的特性，不应该变动频繁、剧烈，故三种双排分别选择size、size、beta作为控制变量。</p>
<p>考虑到篇幅，本处不再进行7日动量与其他因子双排的展示。</p>
<h3 id="beta-size双排">beta-size双排</h3>
<p>上文关于beta因子在等权重加权和市值加权下表现不一样，可以通过控制size对beta进行二次分组，以抵消市值对因子组合的影响。我们分别作出等权重和市值两种加权方式下各组的表现，以验证双排是否可以起到这样的效果。</p>
<h4 id="等权重加权-4">等权重加权</h4>
<p>B-S各组等权重加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">              B1        B2       B3       B4         B5       HML</span><br><span class="line">S1/mean   <span class="number">0.185</span>     <span class="number">0.166</span>   <span class="number">0.271</span> *   <span class="number">0.109</span>   <span class="number">0.429</span> ***  <span class="number">0.244</span> **</span><br><span class="line">S1/t     (<span class="number">1.472</span>)    (<span class="number">1.23</span>)  (<span class="number">1.881</span>)  (<span class="number">0.755</span>)    (<span class="number">2.584</span>)   (<span class="number">2.282</span>)</span><br><span class="line">S2/mean   <span class="number">0.159</span>     <span class="number">0.189</span>    <span class="number">0.046</span>    <span class="number">0.104</span>       <span class="number">0.09</span>    -<span class="number">0.069</span> </span><br><span class="line">S2/t      (<span class="number">1.29</span>)   (<span class="number">1.398</span>)  (<span class="number">0.367</span>)  (<span class="number">0.772</span>)    (<span class="number">0.647</span>)  (-<span class="number">0.759</span>)</span><br><span class="line">S3/mean   <span class="number">0.148</span>     <span class="number">0.169</span>    <span class="number">0.117</span>    <span class="number">0.184</span>      <span class="number">0.197</span>     <span class="number">0.049</span> </span><br><span class="line">S3/t     (<span class="number">1.287</span>)   (<span class="number">1.473</span>)   (<span class="number">0.95</span>)  (<span class="number">1.492</span>)    (<span class="number">1.513</span>)   (<span class="number">0.595</span>)</span><br><span class="line">S4/mean   <span class="number">0.115</span>     <span class="number">0.165</span>    <span class="number">0.009</span>    <span class="number">0.124</span>     <span class="number">0.287</span> *    <span class="number">0.172</span> </span><br><span class="line">S4/t     (<span class="number">0.988</span>)    (<span class="number">1.41</span>)  (<span class="number">0.075</span>)  (<span class="number">1.069</span>)    (<span class="number">1.841</span>)   (<span class="number">1.498</span>)</span><br><span class="line">S5/mean   <span class="number">0.137</span>   <span class="number">0.201</span> **   <span class="number">0.189</span>    <span class="number">0.135</span>      <span class="number">0.094</span>    -<span class="number">0.044</span> </span><br><span class="line">S5/t     (<span class="number">1.574</span>)   (<span class="number">1.994</span>)  (<span class="number">1.624</span>)   (<span class="number">1.24</span>)    (<span class="number">0.804</span>)  (-<span class="number">0.537</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>表中的t值为Newey-West调整后的值（下同），各S组的HML计算为：<span class="math inline">\(HML=B5-B1\)</span>，后文与此同。</p>
</blockquote>
<p>可见在双排下，由于有了更精细的划分，此时出现了S1/B5这样具有显著正溢价的分组。</p>
<p>各组期望收益率对比图：</p>
<figure>
<img src="beta-size因子各组期望收益率-等权重加权.png" alt="beta-size因子各组期望收益率-等权重加权">
<figcaption aria-hidden="true">beta-size因子各组期望收益率-等权重加权</figcaption>
</figure>
<p>可见S4/B3组的期望收益率最低，其次为S2/B3。期望收益率最高的为S1/B5组，这一组相当于叠加了小市值溢价和高beta溢价。</p>
<p>重点组时序图如下：</p>
<figure>
<img src="beta-size因子重点组收益率时序图-等权重加权.png" alt="beta-size因子重点组收益率时序图-等权重加权">
<figcaption aria-hidden="true">beta-size因子重点组收益率时序图-等权重加权</figcaption>
</figure>
<p>可以看出：</p>
<ol type="1">
<li>S1/B5组相较于其他组在大多数时候具有正溢价，说明小市值的高beta组具有正溢价；</li>
<li>S4/B5组虽然在上一轮牛市时相对表现很优异，但是在接下来的熊市时相对表现变得很差；</li>
<li>S/B3和S4/B3组在牛市时（20-22）大幅跑输其他几组，在熊市时（22-23）也远不及S1/B5组，在熊市转化为牛市（23年之后）时表现又相对较差。</li>
</ol>
<h4 id="市值加权-4">市值加权</h4>
<p>B-S各组市值加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">              B1         B2       B3       B4        B5       HML</span><br><span class="line">S1/mean   <span class="number">0.166</span>      <span class="number">0.132</span>   <span class="number">0.243</span> *   <span class="number">0.116</span>   <span class="number">0.395</span> **  <span class="number">0.229</span> **</span><br><span class="line">S1/t     (<span class="number">1.333</span>)    (<span class="number">0.998</span>)  (<span class="number">1.682</span>)  (<span class="number">0.801</span>)     (<span class="number">2.4</span>)   (<span class="number">2.235</span>)</span><br><span class="line">S2/mean   <span class="number">0.149</span>      <span class="number">0.213</span>    <span class="number">0.033</span>    <span class="number">0.096</span>     <span class="number">0.098</span>    -<span class="number">0.051</span> </span><br><span class="line">S2/t     (<span class="number">1.238</span>)     (<span class="number">1.58</span>)  (<span class="number">0.265</span>)  (<span class="number">0.709</span>)   (<span class="number">0.704</span>)   (-<span class="number">0.55</span>)</span><br><span class="line">S3/mean   <span class="number">0.143</span>       <span class="number">0.18</span>    <span class="number">0.122</span>    <span class="number">0.173</span>     <span class="number">0.193</span>     <span class="number">0.051</span> </span><br><span class="line">S3/t     (<span class="number">1.238</span>)    (<span class="number">1.556</span>)  (<span class="number">0.984</span>)  (<span class="number">1.403</span>)    (<span class="number">1.47</span>)   (<span class="number">0.622</span>)</span><br><span class="line">S4/mean   <span class="number">0.119</span>      <span class="number">0.167</span>    <span class="number">0.007</span>     <span class="number">0.13</span>    <span class="number">0.245</span> *    <span class="number">0.125</span> </span><br><span class="line">S4/t     (<span class="number">1.028</span>)    (<span class="number">1.432</span>)  (<span class="number">0.058</span>)  (<span class="number">1.121</span>)   (<span class="number">1.666</span>)   (<span class="number">1.203</span>)</span><br><span class="line">S5/mean  <span class="number">0.167</span> *  <span class="number">0.272</span> ***  <span class="number">0.215</span> *  <span class="number">0.203</span> *    <span class="number">0.056</span>    -<span class="number">0.111</span> </span><br><span class="line">S5/t     (<span class="number">1.904</span>)    (<span class="number">2.607</span>)  (<span class="number">1.945</span>)  (<span class="number">1.901</span>)   (<span class="number">0.493</span>)  (-<span class="number">1.272</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率对比图：</p>
<figure>
<img src="beta-size因子各组期望收益率-市值加权.png" alt="beta-size因子各组期望收益率-市值加权">
<figcaption aria-hidden="true">beta-size因子各组期望收益率-市值加权</figcaption>
</figure>
<p>可见经过双排后，各组在市值加权与等权重加权下的期望收益率已经大致相同了。此时，仍然是S1/B5组具有最优秀的正溢价，S4/B3、S2/B3的期望收益最低。在小市值S1组，最高beta的组出现显著的正溢价；而在最高市值的S5组，beta最高的组反而表现最糟糕。</p>
<p>重点组如下：</p>
<figure>
<img src="beta-size因子重点组收益率时序图-市值加权.png" alt="beta-size因子重点组收益率时序图-市值加权">
<figcaption aria-hidden="true">beta-size因子重点组收益率时序图-市值加权</figcaption>
</figure>
<p>由时序图可见市值加权与等权重加权略有差异，但是S1/B5组相对而言在各时段均处于相对优秀的位置，S4/B3、S2/B3组仍然相对表现较差。</p>
<h4 id="组合-4">组合</h4>
<p>如上讨论，选择等权重加权下期望收益率最大落差组合进行测试：</p>
<p><span class="math display">\[\begin{equation} \label{eq05}
\begin{aligned}
port05_{BS}=&amp;S1/B5 \\ &amp;-(S4/B3+S2/B3)/2
\end{aligned}
\end{equation}\]</span></p>
<p>不考虑交易成本时，收益表现如下：</p>
<figure>
<img src="beta-size因子组合5收益时序图.png" alt="beta-size因子组合5收益时序图">
<figcaption aria-hidden="true">beta-size因子组合5收益时序图</figcaption>
</figure>
<p>可见该组合的收益显著且较稳定，长期复合年化收益2.73、最大回撤0.42、夏普率2.0，表现较优异。</p>
<p>考虑成本后，效果如下：</p>
<figure>
<img src="beta-size因子组合5收益时序图-1倍杠杆0.001成本.png" alt="beta-size因子组合5收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">beta-size因子组合5收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见在考虑交易成本后，长期来看该组合仍然能够获得正溢价，但是最大回撤有些大。</p>
<p>分段展示：</p>
<figure>
<img src="beta-size因子组合5收益时序图-1倍杠杆0.001成本-分段.png" alt="beta-size因子组合5收益时序图-1倍杠杆0.001成本-分段">
<figcaption aria-hidden="true">beta-size因子组合5收益时序图-1倍杠杆0.001成本-分段</figcaption>
</figure>
<p>可见组合在各时间段均有正收益。</p>
<h3 id="mom1-size双排">mom1-size双排</h3>
<p>1日动量单排时组合3由于换手率太高最终表现不佳，如果将它与市值因子双排进行更细的分组，是否可以得到换手率与收益率平衡的组合？</p>
<p>仍然分成等权重和市值加权两种方式罗列各组的期望收益率情况。</p>
<h4 id="等权重加权-5">等权重加权</h4>
<p>M1_-S各组等权重加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">             M1_1     M1_2      M1_3       M1_4      M1_5        HML</span><br><span class="line">S1/mean   <span class="number">0.35</span> **   <span class="number">0.197</span>   <span class="number">0.346</span> **  <span class="number">0.373</span> ***    <span class="number">0.076</span>   -<span class="number">0.273</span> **</span><br><span class="line">S1/t      (<span class="number">2.461</span>)  (<span class="number">1.446</span>)   (<span class="number">2.551</span>)    (<span class="number">2.637</span>)   (<span class="number">0.541</span>)   (-<span class="number">2.454</span>)</span><br><span class="line">S2/mean    <span class="number">0.043</span>    <span class="number">0.196</span>     <span class="number">0.193</span>      <span class="number">0.197</span>    -<span class="number">0.098</span>     -<span class="number">0.141</span> </span><br><span class="line">S2/t      (<span class="number">0.329</span>)   (<span class="number">1.47</span>)   (<span class="number">1.487</span>)    (<span class="number">1.563</span>)  (-<span class="number">0.714</span>)   (-<span class="number">1.494</span>)</span><br><span class="line">S3/mean    <span class="number">0.067</span>     <span class="number">0.18</span>   <span class="number">0.273</span> **     <span class="number">0.119</span>      <span class="number">0.12</span>      <span class="number">0.054</span> </span><br><span class="line">S3/t      (<span class="number">0.559</span>)  (<span class="number">1.478</span>)   (<span class="number">2.333</span>)    (<span class="number">1.024</span>)   (<span class="number">0.895</span>)    (<span class="number">0.583</span>)</span><br><span class="line">S4/mean   -<span class="number">0.057</span>   <span class="number">0.241</span> *   <span class="number">0.218</span> *     <span class="number">0.115</span>     <span class="number">0.188</span>    <span class="number">0.246</span> **</span><br><span class="line">S4/t     (-<span class="number">0.485</span>)  (<span class="number">1.744</span>)   (<span class="number">1.777</span>)    (<span class="number">1.011</span>)   (<span class="number">1.334</span>)    (<span class="number">2.415</span>)</span><br><span class="line">S5/mean    <span class="number">0.105</span>    <span class="number">0.132</span>    <span class="number">0.172</span> *     <span class="number">0.091</span>    <span class="number">0.183</span> *     <span class="number">0.078</span> </span><br><span class="line">S5/t      (<span class="number">0.999</span>)  (<span class="number">1.302</span>)   (<span class="number">1.704</span>)    (<span class="number">0.919</span>)   (<span class="number">1.666</span>)    (<span class="number">1.101</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率对比图：</p>
<figure>
<img src="mom1-size因子各组期望收益率-等权重加权.png" alt="mom1-size因子各组期望收益率-等权重加权">
<figcaption aria-hidden="true">mom1-size因子各组期望收益率-等权重加权</figcaption>
</figure>
<p>可见：</p>
<ol type="1">
<li>在市值最大S5组内，细分各1日动量组的期望收益均处于大体相当的较高水平；</li>
<li>大市值S5组的1日动量表现出与市值较小的S1、S2组不一样的特征，S5组呈现出正动量效应，而小市值则出现动量崩溃，具有相对较高溢价的动量组出现在中间区域；</li>
<li>最小市值S1组在最低动量组出现较高溢价，这或许是因为小市值的超跌反弹较强。</li>
</ol>
<p>重点收益组时序图：</p>
<figure>
<img src="mom1-size因子重点组收益率时序图-等权重加权.png" alt="mom1-size因子重点组收益率时序图-等权重加权">
<figcaption aria-hidden="true">mom1-size因子重点组收益率时序图-等权重加权</figcaption>
</figure>
<p>可见重点组的分层显著、稳定，明显分化出优劣两个区间。S1/M1_1、S1/M1_3、S1/M1_4组在上图中的各时间段均表现相对优异，S4/M1_1、S2/M1_5则在各时间段均表现相对较差。</p>
<h4 id="市值加权-5">市值加权</h4>
<p>M1_-S各组市值加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">             M1_1     M1_2      M1_3       M1_4      M1_5        HML</span><br><span class="line">S1/mean  <span class="number">0.301</span> **   <span class="number">0.181</span>    <span class="number">0.34</span> **  <span class="number">0.376</span> ***    <span class="number">0.044</span>   -<span class="number">0.256</span> **</span><br><span class="line">S1/t      (<span class="number">2.138</span>)  (<span class="number">1.314</span>)   (<span class="number">2.522</span>)    (<span class="number">2.643</span>)   (<span class="number">0.313</span>)   (-<span class="number">2.167</span>)</span><br><span class="line">S2/mean    <span class="number">0.017</span>    <span class="number">0.195</span>     <span class="number">0.195</span>      <span class="number">0.207</span>    -<span class="number">0.085</span>     -<span class="number">0.102</span> </span><br><span class="line">S2/t      (<span class="number">0.127</span>)  (<span class="number">1.454</span>)   (<span class="number">1.501</span>)    (<span class="number">1.625</span>)  (-<span class="number">0.621</span>)   (-<span class="number">1.056</span>)</span><br><span class="line">S3/mean    <span class="number">0.078</span>    <span class="number">0.182</span>   <span class="number">0.275</span> **     <span class="number">0.107</span>     <span class="number">0.121</span>      <span class="number">0.043</span> </span><br><span class="line">S3/t      (<span class="number">0.647</span>)  (<span class="number">1.497</span>)    (<span class="number">2.33</span>)    (<span class="number">0.923</span>)   (<span class="number">0.886</span>)    (<span class="number">0.453</span>)</span><br><span class="line">S4/mean   -<span class="number">0.062</span>   <span class="number">0.227</span> *   <span class="number">0.214</span> *     <span class="number">0.129</span>     <span class="number">0.177</span>    <span class="number">0.239</span> **</span><br><span class="line">S4/t     (-<span class="number">0.519</span>)  (<span class="number">1.776</span>)   (<span class="number">1.737</span>)    (<span class="number">1.136</span>)   (<span class="number">1.295</span>)    (<span class="number">2.443</span>)</span><br><span class="line">S5/mean    <span class="number">0.123</span>    <span class="number">0.118</span>     <span class="number">0.147</span>     <span class="number">0.189</span> *  <span class="number">0.254</span> **     <span class="number">0.131</span> </span><br><span class="line">S5/t      (<span class="number">1.177</span>)  (<span class="number">1.241</span>)   (<span class="number">1.537</span>)    (<span class="number">1.898</span>)   (<span class="number">2.173</span>)    (<span class="number">1.595</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率对比图：</p>
<figure>
<img src="mom1-size因子各组期望收益率-市值加权.png" alt="mom1-size因子各组期望收益率-市值加权">
<figcaption aria-hidden="true">mom1-size因子各组期望收益率-市值加权</figcaption>
</figure>
<p>可见在市值加权与等权重加权的效果差不多。</p>
<p>重点组的收益时序图如下：</p>
<figure>
<img src="mom1-size因子重点组收益率时序图-市值加权.png" alt="mom1-size因子重点组收益率时序图-市值加权">
<figcaption aria-hidden="true">mom1-size因子重点组收益率时序图-市值加权</figcaption>
</figure>
<p>可见此时，S1/M1_1组的表现不及等权重加权时，虽然也属于相对表现较优组，但是不那么优异了。其余结论与等权重加权差不多。</p>
<h4 id="组合-5">组合</h4>
<p>我们可以选择等权重加权的如下组合，研究其盈利能力：</p>
<p><span class="math display">\[\begin{equation} \label{eq06}
\begin{aligned}
port06_{MS}=&amp;(S1/M1\_1+S1/M1\_3 \\
&amp;+S1/M1\_4)/3 \\
&amp;-(S4/M1\_1+S2/M1\_5)/2
\end{aligned}
\end{equation}\]</span></p>
<p>不考虑交易成本时，该组合的表现如下：</p>
<figure>
<img src="mom1-size因子组合6收益时序图.png" alt="mom1-size因子组合6收益时序图">
<figcaption aria-hidden="true">mom1-size因子组合6收益时序图</figcaption>
</figure>
<p>上述结果非常好，长期夏普率达到了3.22、复合年化收益率3.37、最大回撤0.43。这显示出在不考虑交易成本时，动量+市值因子可以组合出非常好的投资效果。</p>
<p>考虑了交易成本后，效果如下：</p>
<figure>
<img src="mom1-size因子组合6收益时序图-1倍杠杆0.001成本.png" alt="mom1-size因子组合6收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">mom1-size因子组合6收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见，该组合的换手率太高、达到了日平均2.45倍资金的调仓率，在考虑交易成本时会产生巨大的收益损耗，造成理论上可以有很好表现的投资组合、在实际交易中会表现的非常糟糕。换手率越高，对交易成本越敏感，交易成本的些许增加都会导致最终结果大相径庭。</p>
<p>这显示1日动量因子虽然具有理论上的显著、稳定溢价，但是由于其值极度不稳定，会因过高的换手率导致最终几乎不能直接获得这种收益。</p>
<h3 id="mom1-beta双排">mom1-beta双排</h3>
<p>如上流程，分成等权重和市值两种加权进行双排结果罗列。</p>
<h4 id="等权重加权-6">等权重加权</h4>
<p>M1_-B各组等权重加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">            M1_1      M1_2      M1_3      M1_4      M1_5       HML</span><br><span class="line">B1/mean   <span class="number">0.071</span>     <span class="number">0.169</span>     <span class="number">0.164</span>   <span class="number">0.241</span> **    <span class="number">0.177</span>     <span class="number">0.106</span> </span><br><span class="line">B1/t     (<span class="number">0.642</span>)   (<span class="number">1.641</span>)    (<span class="number">1.56</span>)   (<span class="number">2.234</span>)   (<span class="number">1.409</span>)   (<span class="number">1.133</span>)</span><br><span class="line">B2/mean   <span class="number">0.124</span>    <span class="number">0.214</span> *     <span class="number">0.15</span>    <span class="number">0.27</span> **   -<span class="number">0.012</span>   -<span class="number">0.136</span> *</span><br><span class="line">B2/t      (<span class="number">1.05</span>)   (<span class="number">1.874</span>)   (<span class="number">1.354</span>)   (<span class="number">2.468</span>)  (-<span class="number">0.102</span>)  (-<span class="number">1.873</span>)</span><br><span class="line">B3/mean   <span class="number">0.136</span>     <span class="number">0.179</span>    <span class="number">0.213</span> *   <span class="number">0.207</span> *    <span class="number">0.135</span>    -<span class="number">0.001</span> </span><br><span class="line">B3/t     (<span class="number">1.078</span>)   (<span class="number">1.467</span>)   (<span class="number">1.798</span>)   (<span class="number">1.664</span>)   (<span class="number">1.043</span>)  (-<span class="number">0.007</span>)</span><br><span class="line">B4/mean   <span class="number">0.171</span>    <span class="number">0.205</span> *  <span class="number">0.335</span> **    <span class="number">0.144</span>     <span class="number">0.169</span>    -<span class="number">0.002</span> </span><br><span class="line">B4/t     (<span class="number">1.372</span>)   (<span class="number">1.685</span>)   (<span class="number">2.545</span>)   (<span class="number">1.144</span>)   (<span class="number">1.247</span>)  (-<span class="number">0.021</span>)</span><br><span class="line">B5/mean    <span class="number">0.14</span>   <span class="number">0.327</span> **   <span class="number">0.232</span> *   <span class="number">0.214</span> *    <span class="number">0.087</span>    -<span class="number">0.053</span> </span><br><span class="line">B5/t     (<span class="number">1.009</span>)    (<span class="number">2.08</span>)   (<span class="number">1.797</span>)   (<span class="number">1.682</span>)   (<span class="number">0.614</span>)  (-<span class="number">0.499</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率对比图：</p>
<figure>
<img src="mom1-beta因子各组期望收益率-等权重加权.png" alt="mom1-beta因子各组期望收益率-等权重加权">
<figcaption aria-hidden="true">mom1-beta因子各组期望收益率-等权重加权</figcaption>
</figure>
<p>可见等权重加权下，相较于BTC波动较低的B2组的动量崩溃最严重，相较于BTC波动最高的B5组里的最高动量组没有更高的溢价，期望收益率最高组出现在次高波动中等动量组B4/M1_3，接着为最高波动次低动量组B5/M1_2。B3组在动量二次分组下各组的期望收益区别最小。最低beta的B1组呈现出一定的正动量效应。</p>
<p>重点组收益时序图如下：</p>
<figure>
<img src="mom1-beta因子重点组收益率时序图-等权重加权.png" alt="mom1-beta因子重点组收益率时序图-等权重加权">
<figcaption aria-hidden="true">mom1-beta因子重点组收益率时序图-等权重加权</figcaption>
</figure>
<p>可见在各时间段内，重点组合里均分化出明显相对优秀和拙劣的两个区域，这种分化在时间序列上较稳定。</p>
<h4 id="市值加权-6">市值加权</h4>
<p>M1_-B各组市值加权收益率期望表:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">            M1_1     M1_2       M1_3       M1_4     M1_5      HML</span><br><span class="line">B1/mean   <span class="number">0.095</span>    <span class="number">0.163</span>     <span class="number">0.192</span> *  <span class="number">0.303</span> ***   <span class="number">0.135</span>     <span class="number">0.04</span> </span><br><span class="line">B1/t     (<span class="number">0.889</span>)  (<span class="number">1.591</span>)    (<span class="number">1.874</span>)    (<span class="number">2.622</span>)  (<span class="number">1.073</span>)  (<span class="number">0.355</span>)</span><br><span class="line">B2/mean   <span class="number">0.148</span>    <span class="number">0.161</span>      <span class="number">0.078</span>    <span class="number">0.29</span> ***   <span class="number">0.129</span>   -<span class="number">0.019</span> </span><br><span class="line">B2/t     (<span class="number">1.331</span>)  (<span class="number">1.412</span>)    (<span class="number">0.728</span>)    (<span class="number">2.722</span>)  (<span class="number">1.004</span>)  (-<span class="number">0.18</span>)</span><br><span class="line">B3/mean   <span class="number">0.103</span>    <span class="number">0.162</span>      <span class="number">0.173</span>       <span class="number">0.13</span>    <span class="number">0.188</span>    <span class="number">0.084</span> </span><br><span class="line">B3/t     (<span class="number">0.786</span>)  (<span class="number">1.376</span>)    (<span class="number">1.526</span>)     (<span class="number">1.07</span>)  (<span class="number">1.358</span>)  (<span class="number">0.752</span>)</span><br><span class="line">B4/mean   <span class="number">0.116</span>    <span class="number">0.175</span>   <span class="number">0.358</span> ***     <span class="number">0.108</span>   <span class="number">0.279</span> *   <span class="number">0.163</span> </span><br><span class="line">B4/t     (<span class="number">0.962</span>)  (<span class="number">1.435</span>)    (<span class="number">2.754</span>)     (<span class="number">0.83</span>)  (<span class="number">1.709</span>)   (<span class="number">1.23</span>)</span><br><span class="line">B5/mean  -<span class="number">0.019</span>   <span class="number">0.271</span> *     <span class="number">0.191</span>      <span class="number">0.141</span>    <span class="number">0.037</span>    <span class="number">0.056</span> </span><br><span class="line">B5/t     (-<span class="number">0.12</span>)   (<span class="number">1.86</span>)    (<span class="number">1.457</span>)    (<span class="number">1.115</span>)  (<span class="number">0.242</span>)  (<span class="number">0.397</span>)</span><br></pre></td></tr></table></figure>
<p>各组期望收益率对比图：</p>
<figure>
<img src="mom1-beta因子各组期望收益率-市值加权.png" alt="mom1-beta因子各组期望收益率-市值加权">
<figcaption aria-hidden="true">mom1-beta因子各组期望收益率-市值加权</figcaption>
</figure>
<p>可见：</p>
<ol type="1">
<li>市值加权与等权重加权的各组期望收益率差异较大，说明市值对这两个因子有影响；</li>
<li>期望收益率最低为B5/M1_1组，最高期望收益率仍然为B4/M1_3组；</li>
<li>仍然有中等beta的B3组在动量二次分组下、各组的期望收益区别最小的结论；</li>
<li>相较于等权重加权，最低beta的B1组此时正动量效应被减弱，最高动量组出现崩溃现象，说明低beta的大市值币种在高动量时表现不佳；</li>
<li>最高beta组在动量最低组表现出一定的负溢价，且比等权重加权时表现更糟糕，说明相较于BTC具有更高波动的大市值币种、在下跌时有更恐慌的表现。</li>
</ol>
<p>重点组收益时序图如下：</p>
<figure>
<img src="mom1-beta因子重点组收益率时序图-市值加权.png" alt="mom1-beta因子重点组收益率时序图-市值加权">
<figcaption aria-hidden="true">mom1-beta因子重点组收益率时序图-市值加权</figcaption>
</figure>
<p>可见在时间序列上，重点组内也分化出了相对优秀和拙劣的两个区域。</p>
<h4 id="组合-6">组合</h4>
<p>我们采用组内市值加权的方式构建投资组合，采用最大落差组合，形式如下：</p>
<p><span class="math display">\[\begin{equation} \label{eq07}
port07_{MB}=B4/M1\_3-B5/M1\_1
\end{equation}\]</span></p>
<p>不考虑交易成本时，组合的表现如下：</p>
<figure>
<img src="mom1-beta因子组合7收益时序图.png" alt="mom1-beta因子组合7收益时序图">
<figcaption aria-hidden="true">mom1-beta因子组合7收益时序图</figcaption>
</figure>
<p>考虑成本后：</p>
<figure>
<img src="mom1-beta因子组合7收益时序图-1倍杠杆0.001成本.png" alt="mom1-beta因子组合7收益时序图-1倍杠杆0.001成本">
<figcaption aria-hidden="true">mom1-beta因子组合7收益时序图-1倍杠杆0.001成本</figcaption>
</figure>
<p>可见在不考虑交易成本时，该组合能有正溢价，但是一旦考虑成本，就会发现该组合的换手率过高，盈利完全覆盖不了成本。利用beta-mom1进行双排的换手率极高，由图可见，组合7的日均调仓资金达到3.42倍的比例。</p>
<h2 id="总结">总结</h2>
<p>本文较详细的分析了3个重要因子在加密市场的表现情况，经过冗长繁杂的分析，可以得出如下结论：</p>
<ol type="1">
<li>通过单因子分析，发现在3个因子中，考虑了交易成本后，只有市值因子可以获得较显著、稳定的收益；</li>
<li>小市值区域相较于其他市值区域表现出较高的溢价，同时在大市值区域也有正溢价；</li>
<li>市值因子本身在截面上较稳定，利用它构建的组合换手率低，对交易成本不敏感；</li>
<li>beta因子在等权重加权下、在一定程度上符合CAPM模型规律，但是在市值加权下结论就完全不一样，该因子相较于市值而言不是很稳定，每日换手率较高、对交易成本敏感；</li>
<li>动量因子在不考虑交易成本时表现非常优秀，但是由于其值的不稳定性、决定了用其构建的组合换手率非常高，收益很难抵消交易成本，最终表现较平庸；</li>
<li>在其他市场中的一些结论，如小市值溢价、短期动量崩溃效应、CAPM模型关于收益率差异的描述与实际情况不合等，在加密市场仍然成立，反映出主流因子具有普适性；</li>
<li>通过beta-size双排分析可见，小市值组在高beta区域出现显著的正溢价，而大市值组在高beta区域表现反而比低beta区域更糟糕；</li>
<li>通过mom1-size双排分析可见，1日动量因子在小市值区域和大市值区域的表现是非常不一样的，小市值出现动量崩溃和超跌反弹，但是大市值却呈现正动量效应，不能用大市值的正动量方法交易小市值币种，也不应该用小市值的超跌反弹交易大市值币种；</li>
<li>通过mom1-beta双排分析可见，市值对这两个因子具有很大影响，不同加权方式的结论有较大差异，但是仍然可见高beta组在高动量区域出现显著的动量崩溃，高beta组在中低动量时有较高溢价，次高beta组在中等动量时具有较高溢价；</li>
<li>相较于BTC具有更高波动（beta）的大市值币种、在下跌（低动量）时有更恐慌的表现，低beta的大市值币种在高动量时表现不佳；</li>
<li>通过双排组合的收益分析可见，beta-size因子可以获得较显著的溢价，mom1-size虽然在没有交易成本时的表现很惊艳、但是考虑了交易成本后表现变得糟糕，同样的还有mom1-beta双排组合，说明交易成本的分析对选择真正可交易的因子具有至关重要的意义；</li>
<li>利用二次排序，可以更精细的区分出截面上表现优秀和糟糕的组合，可以发现在不同控制组里、相同因子下是否具有不同的表现等；</li>
<li>等等。</li>
</ol>
<p>全文完！谢谢阅读！</p>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>加密货币</tag>
        <tag>因子</tag>
      </tags>
  </entry>
  <entry>
    <title>BTC均衡价格模型及预测值echarts图</title>
    <url>/2025/01/10/BTC%E5%9D%87%E8%A1%A1%E4%BB%B7%E6%A0%BC%E6%A8%A1%E5%9E%8B%E5%8F%8A%E9%A2%84%E6%B5%8B%E5%80%BCecharts%E5%9B%BE/</url>
    <content><![CDATA[<p>本文展示1月频率的BTC已实现价格、均衡价格及预测价格的Echarts图。</p>
<span id="more"></span>
<h2 id="模型1月价格图">模型1月价格图</h2>
<script type="text/javascript" src="https://assets.pyecharts.org/assets/v5/echarts.min.js"></script>
<div id="echarts7994" style="width: 100%;height: 400px;margin: 0 auto"></div>
<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('echarts7994'));

        // 指定图表的配置项和数据
        var option = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "aria": {
        "enabled": false
    },
    "color": [
        "#5470c6",
        "#91cc75",
        "#fac858",
        "#ee6666",
        "#73c0de",
        "#3ba272",
        "#fc8452",
        "#9a60b4",
        "#ea7ccc"
    ],
    "series": [
        {
            "type": "line",
            "name": "BTC realized price",
            "connectNulls": false,
            "xAxisIndex": 0,
            "symbolSize": 4,
            "showSymbol": true,
            "smooth": true,
            "clip": true,
            "step": false,
            "stackStrategy": "samesign",
            "data": [
                [
                    "2010-07-31T00:00:00",
                    0.07
                ],
                [
                    "2010-08-31T00:00:00",
                    0.07
                ],
                [
                    "2010-09-30T00:00:00",
                    0.06
                ],
                [
                    "2010-10-31T00:00:00",
                    0.19
                ],
                [
                    "2010-11-30T00:00:00",
                    0.22
                ],
                [
                    "2010-12-31T00:00:00",
                    0.3
                ],
                [
                    "2011-01-31T00:00:00",
                    0.52
                ],
                [
                    "2011-02-28T00:00:00",
                    0.87
                ],
                [
                    "2011-03-31T00:00:00",
                    0.79
                ],
                [
                    "2011-04-30T00:00:00",
                    3.44
                ],
                [
                    "2011-05-31T00:00:00",
                    8.78
                ],
                [
                    "2011-06-30T00:00:00",
                    16.16
                ],
                [
                    "2011-07-31T00:00:00",
                    13.43
                ],
                [
                    "2011-08-31T00:00:00",
                    9.05
                ],
                [
                    "2011-09-30T00:00:00",
                    5.09
                ],
                [
                    "2011-10-31T00:00:00",
                    3.32
                ],
                [
                    "2011-11-30T00:00:00",
                    2.97
                ],
                [
                    "2011-12-31T00:00:00",
                    4.61
                ],
                [
                    "2012-01-31T00:00:00",
                    5.55
                ],
                [
                    "2012-02-29T00:00:00",
                    4.96
                ],
                [
                    "2012-03-31T00:00:00",
                    4.89
                ],
                [
                    "2012-04-30T00:00:00",
                    4.99
                ],
                [
                    "2012-05-31T00:00:00",
                    5.18
                ],
                [
                    "2012-06-30T00:00:00",
                    6.68
                ],
                [
                    "2012-07-31T00:00:00",
                    9.33
                ],
                [
                    "2012-08-31T00:00:00",
                    10.76
                ],
                [
                    "2012-09-30T00:00:00",
                    12.49
                ],
                [
                    "2012-10-31T00:00:00",
                    11.1
                ],
                [
                    "2012-11-30T00:00:00",
                    12.61
                ],
                [
                    "2012-12-31T00:00:00",
                    13.53
                ],
                [
                    "2013-01-31T00:00:00",
                    20.27
                ],
                [
                    "2013-02-28T00:00:00",
                    32.03
                ],
                [
                    "2013-03-31T00:00:00",
                    92.52
                ],
                [
                    "2013-04-30T00:00:00",
                    139.0
                ],
                [
                    "2013-05-31T00:00:00",
                    129.0
                ],
                [
                    "2013-06-30T00:00:00",
                    96.61
                ],
                [
                    "2013-07-31T00:00:00",
                    106.09
                ],
                [
                    "2013-08-31T00:00:00",
                    135.35
                ],
                [
                    "2013-09-30T00:00:00",
                    133.0
                ],
                [
                    "2013-10-31T00:00:00",
                    204.0
                ],
                [
                    "2013-11-30T00:00:00",
                    1129.43
                ],
                [
                    "2013-12-31T00:00:00",
                    754.01
                ],
                [
                    "2014-01-31T00:00:00",
                    829.92
                ],
                [
                    "2014-02-28T00:00:00",
                    549.26
                ],
                [
                    "2014-03-31T00:00:00",
                    457.0
                ],
                [
                    "2014-04-30T00:00:00",
                    447.64
                ],
                [
                    "2014-05-31T00:00:00",
                    623.68
                ],
                [
                    "2014-06-30T00:00:00",
                    639.8
                ],
                [
                    "2014-07-31T00:00:00",
                    586.23
                ],
                [
                    "2014-08-31T00:00:00",
                    477.76
                ],
                [
                    "2014-09-30T00:00:00",
                    386.94
                ],
                [
                    "2014-10-31T00:00:00",
                    338.32
                ],
                [
                    "2014-11-30T00:00:00",
                    378.05
                ],
                [
                    "2014-12-31T00:00:00",
                    320.19
                ],
                [
                    "2015-01-31T00:00:00",
                    217.46
                ],
                [
                    "2015-02-28T00:00:00",
                    254.26
                ],
                [
                    "2015-03-31T00:00:00",
                    244.22
                ],
                [
                    "2015-04-30T00:00:00",
                    236.15
                ],
                [
                    "2015-05-31T00:00:00",
                    230.19
                ],
                [
                    "2015-06-30T00:00:00",
                    263.07
                ],
                [
                    "2015-07-31T00:00:00",
                    284.65
                ],
                [
                    "2015-08-31T00:00:00",
                    230.06
                ],
                [
                    "2015-09-30T00:00:00",
                    236.06
                ],
                [
                    "2015-10-31T00:00:00",
                    314.17
                ],
                [
                    "2015-11-30T00:00:00",
                    377.32
                ],
                [
                    "2015-12-31T00:00:00",
                    430.57
                ],
                [
                    "2016-01-31T00:00:00",
                    368.77
                ],
                [
                    "2016-02-29T00:00:00",
                    437.7
                ],
                [
                    "2016-03-31T00:00:00",
                    416.73
                ],
                [
                    "2016-04-30T00:00:00",
                    448.32
                ],
                [
                    "2016-05-31T00:00:00",
                    531.39
                ],
                [
                    "2016-06-30T00:00:00",
                    673.34
                ],
                [
                    "2016-07-31T00:00:00",
                    624.68
                ],
                [
                    "2016-08-31T00:00:00",
                    575.47
                ],
                [
                    "2016-09-30T00:00:00",
                    609.73
                ],
                [
                    "2016-10-31T00:00:00",
                    700.97
                ],
                [
                    "2016-11-30T00:00:00",
                    745.69
                ],
                [
                    "2016-12-31T00:00:00",
                    963.74
                ],
                [
                    "2017-01-31T00:00:00",
                    970.4
                ],
                [
                    "2017-02-28T00:00:00",
                    1179.97
                ],
                [
                    "2017-03-31T00:00:00",
                    1071.79
                ],
                [
                    "2017-04-30T00:00:00",
                    1347.89
                ],
                [
                    "2017-05-31T00:00:00",
                    2286.41
                ],
                [
                    "2017-06-30T00:00:00",
                    2480.84
                ],
                [
                    "2017-07-31T00:00:00",
                    2875.34
                ],
                [
                    "2017-08-31T00:00:00",
                    4703.39
                ],
                [
                    "2017-09-30T00:00:00",
                    4338.71
                ],
                [
                    "2017-10-31T00:00:00",
                    6468.4
                ],
                [
                    "2017-11-30T00:00:00",
                    10233.6
                ],
                [
                    "2017-12-31T00:00:00",
                    14156.4
                ],
                [
                    "2018-01-31T00:00:00",
                    10221.1
                ],
                [
                    "2018-02-28T00:00:00",
                    10397.9
                ],
                [
                    "2018-03-31T00:00:00",
                    6973.53
                ],
                [
                    "2018-04-30T00:00:00",
                    9240.55
                ],
                [
                    "2018-05-31T00:00:00",
                    7494.17
                ],
                [
                    "2018-06-30T00:00:00",
                    6404.0
                ],
                [
                    "2018-07-31T00:00:00",
                    7780.44
                ],
                [
                    "2018-08-31T00:00:00",
                    7037.58
                ],
                [
                    "2018-09-30T00:00:00",
                    6625.56
                ],
                [
                    "2018-10-31T00:00:00",
                    6317.61
                ],
                [
                    "2018-11-30T00:00:00",
                    4017.27
                ],
                [
                    "2018-12-31T00:00:00",
                    3742.7
                ],
                [
                    "2019-01-31T00:00:00",
                    3457.79
                ],
                [
                    "2019-02-28T00:00:00",
                    3854.79
                ],
                [
                    "2019-03-31T00:00:00",
                    4105.4
                ],
                [
                    "2019-04-30T00:00:00",
                    5350.73
                ],
                [
                    "2019-05-31T00:00:00",
                    8574.5
                ],
                [
                    "2019-06-30T00:00:00",
                    10817.16
                ],
                [
                    "2019-07-31T00:00:00",
                    10085.63
                ],
                [
                    "2019-08-31T00:00:00",
                    9630.66
                ],
                [
                    "2019-09-30T00:00:00",
                    8293.87
                ],
                [
                    "2019-10-31T00:00:00",
                    9199.58
                ],
                [
                    "2019-11-30T00:00:00",
                    7569.63
                ],
                [
                    "2019-12-31T00:00:00",
                    7193.6
                ],
                [
                    "2020-01-31T00:00:00",
                    9350.53
                ],
                [
                    "2020-02-29T00:00:00",
                    8599.51
                ],
                [
                    "2020-03-31T00:00:00",
                    6438.64
                ],
                [
                    "2020-04-30T00:00:00",
                    8658.55
                ],
                [
                    "2020-05-31T00:00:00",
                    9461.06
                ],
                [
                    "2020-06-30T00:00:00",
                    9137.99
                ],
                [
                    "2020-07-31T00:00:00",
                    11323.47
                ],
                [
                    "2020-08-31T00:00:00",
                    11680.82
                ],
                [
                    "2020-09-30T00:00:00",
                    10784.49
                ],
                [
                    "2020-10-31T00:00:00",
                    13780.99
                ],
                [
                    "2020-11-30T00:00:00",
                    19625.84
                ],
                [
                    "2020-12-31T00:00:00",
                    29001.72
                ],
                [
                    "2021-01-31T00:00:00",
                    33114.36
                ],
                [
                    "2021-02-28T00:00:00",
                    45137.77
                ],
                [
                    "2021-03-31T00:00:00",
                    58918.83
                ],
                [
                    "2021-04-30T00:00:00",
                    57750.18
                ],
                [
                    "2021-05-31T00:00:00",
                    37332.85
                ],
                [
                    "2021-06-30T00:00:00",
                    35040.84
                ],
                [
                    "2021-07-31T00:00:00",
                    41626.2
                ],
                [
                    "2021-08-31T00:00:00",
                    47166.69
                ],
                [
                    "2021-09-30T00:00:00",
                    43790.9
                ],
                [
                    "2021-10-31T00:00:00",
                    61318.96
                ],
                [
                    "2021-11-30T00:00:00",
                    57005.43
                ],
                [
                    "2021-12-31T00:00:00",
                    46306.45
                ],
                [
                    "2022-01-31T00:00:00",
                    38483.13
                ],
                [
                    "2022-02-28T00:00:00",
                    43193.23
                ],
                [
                    "2022-03-31T00:00:00",
                    45538.68
                ],
                [
                    "2022-04-30T00:00:00",
                    37714.88
                ],
                [
                    "2022-05-31T00:00:00",
                    31792.31
                ],
                [
                    "2022-06-30T00:00:00",
                    19784.73
                ],
                [
                    "2022-07-31T00:00:00",
                    23336.9
                ],
                [
                    "2022-08-31T00:00:00",
                    20049.76
                ],
                [
                    "2022-09-30T00:00:00",
                    19431.79
                ],
                [
                    "2022-10-31T00:00:00",
                    20495.77
                ],
                [
                    "2022-11-30T00:00:00",
                    17168.57
                ],
                [
                    "2022-12-31T00:00:00",
                    16547.5
                ],
                [
                    "2023-01-31T00:00:00",
                    23139.28
                ],
                [
                    "2023-02-28T00:00:00",
                    23147.35
                ],
                [
                    "2023-03-31T00:00:00",
                    28478.48
                ],
                [
                    "2023-04-30T00:00:00",
                    29268.81
                ],
                [
                    "2023-05-31T00:00:00",
                    27219.66
                ],
                [
                    "2023-06-30T00:00:00",
                    30477.25
                ],
                [
                    "2023-07-31T00:00:00",
                    29230.11
                ],
                [
                    "2023-08-31T00:00:00",
                    25931.47
                ],
                [
                    "2023-09-30T00:00:00",
                    26967.92
                ],
                [
                    "2023-10-31T00:00:00",
                    34667.78
                ],
                [
                    "2023-11-30T00:00:00",
                    37712.75
                ],
                [
                    "2023-12-31T00:00:00",
                    42265.19
                ],
                [
                    "2024-01-31T00:00:00",
                    42582.61
                ],
                [
                    "2024-02-29T00:00:00",
                    61198.38
                ],
                [
                    "2024-03-31T00:00:00",
                    71333.65
                ],
                [
                    "2024-04-30T00:00:00",
                    60636.86
                ],
                [
                    "2024-05-31T00:00:00",
                    67491.42
                ],
                [
                    "2024-06-30T00:00:00",
                    62678.29
                ],
                [
                    "2024-07-31T00:00:00",
                    64619.25
                ],
                [
                    "2024-08-31T00:00:00",
                    58969.9
                ],
                [
                    "2024-09-30T00:00:00",
                    63329.5
                ],
                [
                    "2024-10-31T00:00:00",
                    70215.19
                ],
                [
                    "2024-11-30T00:00:00",
                    96449.06
                ],
                [
                    "2024-12-31T00:00:00",
                    93429.2
                ],
                [
                    "2025-01-31T00:00:00",
                    92484.04
                ],
                [
                    "2025-02-28T00:00:00",
                    null
                ],
                [
                    "2025-03-31T00:00:00",
                    null
                ],
                [
                    "2025-04-30T00:00:00",
                    null
                ],
                [
                    "2025-05-31T00:00:00",
                    null
                ],
                [
                    "2025-06-30T00:00:00",
                    null
                ],
                [
                    "2025-07-31T00:00:00",
                    null
                ],
                [
                    "2025-08-31T00:00:00",
                    null
                ],
                [
                    "2025-09-30T00:00:00",
                    null
                ],
                [
                    "2025-10-31T00:00:00",
                    null
                ],
                [
                    "2025-11-30T00:00:00",
                    null
                ],
                [
                    "2025-12-31T00:00:00",
                    null
                ],
                [
                    "2026-01-31T00:00:00",
                    null
                ],
                [
                    "2026-02-28T00:00:00",
                    null
                ],
                [
                    "2026-03-31T00:00:00",
                    null
                ],
                [
                    "2026-04-30T00:00:00",
                    null
                ],
                [
                    "2026-05-31T00:00:00",
                    null
                ],
                [
                    "2026-06-30T00:00:00",
                    null
                ],
                [
                    "2026-07-31T00:00:00",
                    null
                ],
                [
                    "2026-08-31T00:00:00",
                    null
                ],
                [
                    "2026-09-30T00:00:00",
                    null
                ],
                [
                    "2026-10-31T00:00:00",
                    null
                ],
                [
                    "2026-11-30T00:00:00",
                    null
                ],
                [
                    "2026-12-31T00:00:00",
                    null
                ],
                [
                    "2027-01-31T00:00:00",
                    null
                ],
                [
                    "2027-02-28T00:00:00",
                    null
                ],
                [
                    "2027-03-31T00:00:00",
                    null
                ],
                [
                    "2027-04-30T00:00:00",
                    null
                ],
                [
                    "2027-05-31T00:00:00",
                    null
                ],
                [
                    "2027-06-30T00:00:00",
                    null
                ],
                [
                    "2027-07-31T00:00:00",
                    null
                ],
                [
                    "2027-08-31T00:00:00",
                    null
                ],
                [
                    "2027-09-30T00:00:00",
                    null
                ],
                [
                    "2027-10-31T00:00:00",
                    null
                ],
                [
                    "2027-11-30T00:00:00",
                    null
                ],
                [
                    "2027-12-31T00:00:00",
                    null
                ],
                [
                    "2028-01-31T00:00:00",
                    null
                ],
                [
                    "2028-02-29T00:00:00",
                    null
                ],
                [
                    "2028-03-31T00:00:00",
                    null
                ]
            ],
            "hoverAnimation": true,
            "label": {
                "show": false,
                "margin": 8,
                "valueAnimation": false
            },
            "logBase": 10,
            "seriesLayoutBy": "column",
            "lineStyle": {
                "show": true,
                "width": 1,
                "opacity": 1,
                "curveness": 0,
                "type": "solid"
            },
            "areaStyle": {
                "opacity": 0
            },
            "zlevel": 0,
            "z": 0
        },
        {
            "type": "line",
            "name": "Model fitted price",
            "connectNulls": false,
            "xAxisIndex": 0,
            "symbolSize": 4,
            "showSymbol": true,
            "smooth": true,
            "clip": true,
            "step": false,
            "stackStrategy": "samesign",
            "data": [
                [
                    "2010-07-31T00:00:00",
                    0.18
                ],
                [
                    "2010-08-31T00:00:00",
                    0.28
                ],
                [
                    "2010-09-30T00:00:00",
                    0.43
                ],
                [
                    "2010-10-31T00:00:00",
                    0.51
                ],
                [
                    "2010-11-30T00:00:00",
                    0.67
                ],
                [
                    "2010-12-31T00:00:00",
                    0.98
                ],
                [
                    "2011-01-31T00:00:00",
                    1.1
                ],
                [
                    "2011-02-28T00:00:00",
                    1.7
                ],
                [
                    "2011-03-31T00:00:00",
                    1.51
                ],
                [
                    "2011-04-30T00:00:00",
                    1.87
                ],
                [
                    "2011-05-31T00:00:00",
                    3.65
                ],
                [
                    "2011-06-30T00:00:00",
                    4.72
                ],
                [
                    "2011-07-31T00:00:00",
                    5.44
                ],
                [
                    "2011-08-31T00:00:00",
                    6.08
                ],
                [
                    "2011-09-30T00:00:00",
                    7.11
                ],
                [
                    "2011-10-31T00:00:00",
                    6.02
                ],
                [
                    "2011-11-30T00:00:00",
                    5.04
                ],
                [
                    "2011-12-31T00:00:00",
                    5.45
                ],
                [
                    "2012-01-31T00:00:00",
                    5.75
                ],
                [
                    "2012-02-29T00:00:00",
                    5.32
                ],
                [
                    "2012-03-31T00:00:00",
                    5.78
                ],
                [
                    "2012-04-30T00:00:00",
                    5.52
                ],
                [
                    "2012-05-31T00:00:00",
                    6.72
                ],
                [
                    "2012-06-30T00:00:00",
                    7.19
                ],
                [
                    "2012-07-31T00:00:00",
                    7.76
                ],
                [
                    "2012-08-31T00:00:00",
                    7.91
                ],
                [
                    "2012-09-30T00:00:00",
                    7.74
                ],
                [
                    "2012-10-31T00:00:00",
                    8.78
                ],
                [
                    "2012-11-30T00:00:00",
                    9.74
                ],
                [
                    "2012-12-31T00:00:00",
                    13.04
                ],
                [
                    "2013-01-31T00:00:00",
                    11.91
                ],
                [
                    "2013-02-28T00:00:00",
                    13.54
                ],
                [
                    "2013-03-31T00:00:00",
                    16.97
                ],
                [
                    "2013-04-30T00:00:00",
                    21.62
                ],
                [
                    "2013-05-31T00:00:00",
                    20.84
                ],
                [
                    "2013-06-30T00:00:00",
                    28.33
                ],
                [
                    "2013-07-31T00:00:00",
                    28.1
                ],
                [
                    "2013-08-31T00:00:00",
                    33.21
                ],
                [
                    "2013-09-30T00:00:00",
                    56.02
                ],
                [
                    "2013-10-31T00:00:00",
                    66.84
                ],
                [
                    "2013-11-30T00:00:00",
                    94.85
                ],
                [
                    "2013-12-31T00:00:00",
                    111.65
                ],
                [
                    "2014-01-31T00:00:00",
                    140.69
                ],
                [
                    "2014-02-28T00:00:00",
                    175.0
                ],
                [
                    "2014-03-31T00:00:00",
                    195.32
                ],
                [
                    "2014-04-30T00:00:00",
                    282.14
                ],
                [
                    "2014-05-31T00:00:00",
                    298.17
                ],
                [
                    "2014-06-30T00:00:00",
                    382.88
                ],
                [
                    "2014-07-31T00:00:00",
                    361.35
                ],
                [
                    "2014-08-31T00:00:00",
                    363.43
                ],
                [
                    "2014-09-30T00:00:00",
                    459.84
                ],
                [
                    "2014-10-31T00:00:00",
                    413.55
                ],
                [
                    "2014-11-30T00:00:00",
                    476.97
                ],
                [
                    "2014-12-31T00:00:00",
                    499.42
                ],
                [
                    "2015-01-31T00:00:00",
                    475.27
                ],
                [
                    "2015-02-28T00:00:00",
                    557.72
                ],
                [
                    "2015-03-31T00:00:00",
                    540.23
                ],
                [
                    "2015-04-30T00:00:00",
                    592.4
                ],
                [
                    "2015-05-31T00:00:00",
                    556.17
                ],
                [
                    "2015-06-30T00:00:00",
                    574.95
                ],
                [
                    "2015-07-31T00:00:00",
                    572.94
                ],
                [
                    "2015-08-31T00:00:00",
                    570.05
                ],
                [
                    "2015-09-30T00:00:00",
                    617.74
                ],
                [
                    "2015-10-31T00:00:00",
                    635.65
                ],
                [
                    "2015-11-30T00:00:00",
                    632.03
                ],
                [
                    "2015-12-31T00:00:00",
                    795.17
                ],
                [
                    "2016-01-31T00:00:00",
                    711.24
                ],
                [
                    "2016-02-29T00:00:00",
                    989.08
                ],
                [
                    "2016-03-31T00:00:00",
                    1001.13
                ],
                [
                    "2016-04-30T00:00:00",
                    972.12
                ],
                [
                    "2016-05-31T00:00:00",
                    1119.03
                ],
                [
                    "2016-06-30T00:00:00",
                    1020.18
                ],
                [
                    "2016-07-31T00:00:00",
                    1628.51
                ],
                [
                    "2016-08-31T00:00:00",
                    1830.41
                ],
                [
                    "2016-09-30T00:00:00",
                    1825.2
                ],
                [
                    "2016-10-31T00:00:00",
                    1822.7
                ],
                [
                    "2016-11-30T00:00:00",
                    1934.14
                ],
                [
                    "2016-12-31T00:00:00",
                    1990.97
                ],
                [
                    "2017-01-31T00:00:00",
                    2145.25
                ],
                [
                    "2017-02-28T00:00:00",
                    2114.28
                ],
                [
                    "2017-03-31T00:00:00",
                    2417.47
                ],
                [
                    "2017-04-30T00:00:00",
                    2318.75
                ],
                [
                    "2017-05-31T00:00:00",
                    2087.46
                ],
                [
                    "2017-06-30T00:00:00",
                    2469.52
                ],
                [
                    "2017-07-31T00:00:00",
                    2914.54
                ],
                [
                    "2017-08-31T00:00:00",
                    2580.3
                ],
                [
                    "2017-09-30T00:00:00",
                    3454.7
                ],
                [
                    "2017-10-31T00:00:00",
                    3661.68
                ],
                [
                    "2017-11-30T00:00:00",
                    3145.56
                ],
                [
                    "2017-12-31T00:00:00",
                    3348.72
                ],
                [
                    "2018-01-31T00:00:00",
                    4808.84
                ],
                [
                    "2018-02-28T00:00:00",
                    4839.74
                ],
                [
                    "2018-03-31T00:00:00",
                    5797.73
                ],
                [
                    "2018-04-30T00:00:00",
                    5478.73
                ],
                [
                    "2018-05-31T00:00:00",
                    5331.63
                ],
                [
                    "2018-06-30T00:00:00",
                    6482.47
                ],
                [
                    "2018-07-31T00:00:00",
                    6711.05
                ],
                [
                    "2018-08-31T00:00:00",
                    6810.82
                ],
                [
                    "2018-09-30T00:00:00",
                    6792.1
                ],
                [
                    "2018-10-31T00:00:00",
                    6845.73
                ],
                [
                    "2018-11-30T00:00:00",
                    9225.11
                ],
                [
                    "2018-12-31T00:00:00",
                    6573.56
                ],
                [
                    "2019-01-31T00:00:00",
                    6669.58
                ],
                [
                    "2019-02-28T00:00:00",
                    6969.83
                ],
                [
                    "2019-03-31T00:00:00",
                    7487.41
                ],
                [
                    "2019-04-30T00:00:00",
                    7370.86
                ],
                [
                    "2019-05-31T00:00:00",
                    8403.75
                ],
                [
                    "2019-06-30T00:00:00",
                    7610.45
                ],
                [
                    "2019-07-31T00:00:00",
                    7539.77
                ],
                [
                    "2019-08-31T00:00:00",
                    8177.61
                ],
                [
                    "2019-09-30T00:00:00",
                    10507.68
                ],
                [
                    "2019-10-31T00:00:00",
                    10764.92
                ],
                [
                    "2019-11-30T00:00:00",
                    11010.34
                ],
                [
                    "2019-12-31T00:00:00",
                    10100.21
                ],
                [
                    "2020-01-31T00:00:00",
                    10866.3
                ],
                [
                    "2020-02-29T00:00:00",
                    11230.02
                ],
                [
                    "2020-03-31T00:00:00",
                    9867.44
                ],
                [
                    "2020-04-30T00:00:00",
                    11552.53
                ],
                [
                    "2020-05-31T00:00:00",
                    16892.51
                ],
                [
                    "2020-06-30T00:00:00",
                    17724.71
                ],
                [
                    "2020-07-31T00:00:00",
                    16693.23
                ],
                [
                    "2020-08-31T00:00:00",
                    17807.37
                ],
                [
                    "2020-09-30T00:00:00",
                    18053.52
                ],
                [
                    "2020-10-31T00:00:00",
                    20920.0
                ],
                [
                    "2020-11-30T00:00:00",
                    21686.43
                ],
                [
                    "2020-12-31T00:00:00",
                    17260.05
                ],
                [
                    "2021-01-31T00:00:00",
                    19977.32
                ],
                [
                    "2021-02-28T00:00:00",
                    21957.13
                ],
                [
                    "2021-03-31T00:00:00",
                    19474.2
                ],
                [
                    "2021-04-30T00:00:00",
                    20606.99
                ],
                [
                    "2021-05-31T00:00:00",
                    21724.61
                ],
                [
                    "2021-06-30T00:00:00",
                    28722.75
                ],
                [
                    "2021-07-31T00:00:00",
                    18243.3
                ],
                [
                    "2021-08-31T00:00:00",
                    20984.04
                ],
                [
                    "2021-09-30T00:00:00",
                    19259.88
                ],
                [
                    "2021-10-31T00:00:00",
                    23578.27
                ],
                [
                    "2021-11-30T00:00:00",
                    24543.96
                ],
                [
                    "2021-12-31T00:00:00",
                    23585.12
                ],
                [
                    "2022-01-31T00:00:00",
                    25348.02
                ],
                [
                    "2022-02-28T00:00:00",
                    24722.96
                ],
                [
                    "2022-03-31T00:00:00",
                    27003.35
                ],
                [
                    "2022-04-30T00:00:00",
                    26087.93
                ],
                [
                    "2022-05-31T00:00:00",
                    26730.03
                ],
                [
                    "2022-06-30T00:00:00",
                    23974.14
                ],
                [
                    "2022-07-31T00:00:00",
                    25671.84
                ],
                [
                    "2022-08-31T00:00:00",
                    27638.2
                ],
                [
                    "2022-09-30T00:00:00",
                    25190.88
                ],
                [
                    "2022-10-31T00:00:00",
                    26475.84
                ],
                [
                    "2022-11-30T00:00:00",
                    30903.09
                ],
                [
                    "2022-12-31T00:00:00",
                    28462.51
                ],
                [
                    "2023-01-31T00:00:00",
                    35162.64
                ],
                [
                    "2023-02-28T00:00:00",
                    33513.72
                ],
                [
                    "2023-03-31T00:00:00",
                    33937.29
                ],
                [
                    "2023-04-30T00:00:00",
                    33244.0
                ],
                [
                    "2023-05-31T00:00:00",
                    34575.17
                ],
                [
                    "2023-06-30T00:00:00",
                    32915.14
                ],
                [
                    "2023-07-31T00:00:00",
                    36730.61
                ],
                [
                    "2023-08-31T00:00:00",
                    36983.62
                ],
                [
                    "2023-09-30T00:00:00",
                    38846.99
                ],
                [
                    "2023-10-31T00:00:00",
                    37393.32
                ],
                [
                    "2023-11-30T00:00:00",
                    41148.43
                ],
                [
                    "2023-12-31T00:00:00",
                    32369.76
                ],
                [
                    "2024-01-31T00:00:00",
                    43572.45
                ],
                [
                    "2024-02-29T00:00:00",
                    44933.13
                ],
                [
                    "2024-03-31T00:00:00",
                    46318.08
                ],
                [
                    "2024-04-30T00:00:00",
                    58225.28
                ],
                [
                    "2024-05-31T00:00:00",
                    67453.55
                ],
                [
                    "2024-06-30T00:00:00",
                    83929.47
                ],
                [
                    "2024-07-31T00:00:00",
                    78743.92
                ],
                [
                    "2024-08-31T00:00:00",
                    77167.37
                ],
                [
                    "2024-09-30T00:00:00",
                    81070.69
                ],
                [
                    "2024-10-31T00:00:00",
                    72425.64
                ],
                [
                    "2024-11-30T00:00:00",
                    76203.8
                ],
                [
                    "2024-12-31T00:00:00",
                    93497.89
                ],
                [
                    "2025-01-31T00:00:00",
                    83444.42
                ],
                [
                    "2025-02-28T00:00:00",
                    null
                ],
                [
                    "2025-03-31T00:00:00",
                    null
                ],
                [
                    "2025-04-30T00:00:00",
                    null
                ],
                [
                    "2025-05-31T00:00:00",
                    null
                ],
                [
                    "2025-06-30T00:00:00",
                    null
                ],
                [
                    "2025-07-31T00:00:00",
                    null
                ],
                [
                    "2025-08-31T00:00:00",
                    null
                ],
                [
                    "2025-09-30T00:00:00",
                    null
                ],
                [
                    "2025-10-31T00:00:00",
                    null
                ],
                [
                    "2025-11-30T00:00:00",
                    null
                ],
                [
                    "2025-12-31T00:00:00",
                    null
                ],
                [
                    "2026-01-31T00:00:00",
                    null
                ],
                [
                    "2026-02-28T00:00:00",
                    null
                ],
                [
                    "2026-03-31T00:00:00",
                    null
                ],
                [
                    "2026-04-30T00:00:00",
                    null
                ],
                [
                    "2026-05-31T00:00:00",
                    null
                ],
                [
                    "2026-06-30T00:00:00",
                    null
                ],
                [
                    "2026-07-31T00:00:00",
                    null
                ],
                [
                    "2026-08-31T00:00:00",
                    null
                ],
                [
                    "2026-09-30T00:00:00",
                    null
                ],
                [
                    "2026-10-31T00:00:00",
                    null
                ],
                [
                    "2026-11-30T00:00:00",
                    null
                ],
                [
                    "2026-12-31T00:00:00",
                    null
                ],
                [
                    "2027-01-31T00:00:00",
                    null
                ],
                [
                    "2027-02-28T00:00:00",
                    null
                ],
                [
                    "2027-03-31T00:00:00",
                    null
                ],
                [
                    "2027-04-30T00:00:00",
                    null
                ],
                [
                    "2027-05-31T00:00:00",
                    null
                ],
                [
                    "2027-06-30T00:00:00",
                    null
                ],
                [
                    "2027-07-31T00:00:00",
                    null
                ],
                [
                    "2027-08-31T00:00:00",
                    null
                ],
                [
                    "2027-09-30T00:00:00",
                    null
                ],
                [
                    "2027-10-31T00:00:00",
                    null
                ],
                [
                    "2027-11-30T00:00:00",
                    null
                ],
                [
                    "2027-12-31T00:00:00",
                    null
                ],
                [
                    "2028-01-31T00:00:00",
                    null
                ],
                [
                    "2028-02-29T00:00:00",
                    null
                ],
                [
                    "2028-03-31T00:00:00",
                    null
                ]
            ],
            "hoverAnimation": true,
            "label": {
                "show": false,
                "margin": 8,
                "valueAnimation": false
            },
            "logBase": 10,
            "seriesLayoutBy": "column",
            "lineStyle": {
                "show": true,
                "width": 1,
                "opacity": 1,
                "curveness": 0,
                "type": "solid"
            },
            "areaStyle": {
                "opacity": 0
            },
            "zlevel": 0,
            "z": 0
        },
        {
            "type": "line",
            "name": "Model predicted price",
            "connectNulls": false,
            "xAxisIndex": 0,
            "symbolSize": 4,
            "showSymbol": true,
            "smooth": true,
            "clip": true,
            "step": false,
            "stackStrategy": "samesign",
            "data": [
                [
                    "2010-07-31T00:00:00",
                    null
                ],
                [
                    "2010-08-31T00:00:00",
                    null
                ],
                [
                    "2010-09-30T00:00:00",
                    null
                ],
                [
                    "2010-10-31T00:00:00",
                    null
                ],
                [
                    "2010-11-30T00:00:00",
                    null
                ],
                [
                    "2010-12-31T00:00:00",
                    null
                ],
                [
                    "2011-01-31T00:00:00",
                    null
                ],
                [
                    "2011-02-28T00:00:00",
                    null
                ],
                [
                    "2011-03-31T00:00:00",
                    null
                ],
                [
                    "2011-04-30T00:00:00",
                    null
                ],
                [
                    "2011-05-31T00:00:00",
                    null
                ],
                [
                    "2011-06-30T00:00:00",
                    null
                ],
                [
                    "2011-07-31T00:00:00",
                    null
                ],
                [
                    "2011-08-31T00:00:00",
                    null
                ],
                [
                    "2011-09-30T00:00:00",
                    null
                ],
                [
                    "2011-10-31T00:00:00",
                    null
                ],
                [
                    "2011-11-30T00:00:00",
                    null
                ],
                [
                    "2011-12-31T00:00:00",
                    null
                ],
                [
                    "2012-01-31T00:00:00",
                    null
                ],
                [
                    "2012-02-29T00:00:00",
                    null
                ],
                [
                    "2012-03-31T00:00:00",
                    null
                ],
                [
                    "2012-04-30T00:00:00",
                    null
                ],
                [
                    "2012-05-31T00:00:00",
                    null
                ],
                [
                    "2012-06-30T00:00:00",
                    null
                ],
                [
                    "2012-07-31T00:00:00",
                    null
                ],
                [
                    "2012-08-31T00:00:00",
                    null
                ],
                [
                    "2012-09-30T00:00:00",
                    null
                ],
                [
                    "2012-10-31T00:00:00",
                    null
                ],
                [
                    "2012-11-30T00:00:00",
                    null
                ],
                [
                    "2012-12-31T00:00:00",
                    null
                ],
                [
                    "2013-01-31T00:00:00",
                    null
                ],
                [
                    "2013-02-28T00:00:00",
                    null
                ],
                [
                    "2013-03-31T00:00:00",
                    null
                ],
                [
                    "2013-04-30T00:00:00",
                    null
                ],
                [
                    "2013-05-31T00:00:00",
                    null
                ],
                [
                    "2013-06-30T00:00:00",
                    null
                ],
                [
                    "2013-07-31T00:00:00",
                    null
                ],
                [
                    "2013-08-31T00:00:00",
                    null
                ],
                [
                    "2013-09-30T00:00:00",
                    null
                ],
                [
                    "2013-10-31T00:00:00",
                    null
                ],
                [
                    "2013-11-30T00:00:00",
                    null
                ],
                [
                    "2013-12-31T00:00:00",
                    null
                ],
                [
                    "2014-01-31T00:00:00",
                    null
                ],
                [
                    "2014-02-28T00:00:00",
                    null
                ],
                [
                    "2014-03-31T00:00:00",
                    null
                ],
                [
                    "2014-04-30T00:00:00",
                    null
                ],
                [
                    "2014-05-31T00:00:00",
                    null
                ],
                [
                    "2014-06-30T00:00:00",
                    null
                ],
                [
                    "2014-07-31T00:00:00",
                    null
                ],
                [
                    "2014-08-31T00:00:00",
                    null
                ],
                [
                    "2014-09-30T00:00:00",
                    null
                ],
                [
                    "2014-10-31T00:00:00",
                    null
                ],
                [
                    "2014-11-30T00:00:00",
                    null
                ],
                [
                    "2014-12-31T00:00:00",
                    null
                ],
                [
                    "2015-01-31T00:00:00",
                    null
                ],
                [
                    "2015-02-28T00:00:00",
                    null
                ],
                [
                    "2015-03-31T00:00:00",
                    null
                ],
                [
                    "2015-04-30T00:00:00",
                    null
                ],
                [
                    "2015-05-31T00:00:00",
                    null
                ],
                [
                    "2015-06-30T00:00:00",
                    null
                ],
                [
                    "2015-07-31T00:00:00",
                    null
                ],
                [
                    "2015-08-31T00:00:00",
                    null
                ],
                [
                    "2015-09-30T00:00:00",
                    null
                ],
                [
                    "2015-10-31T00:00:00",
                    null
                ],
                [
                    "2015-11-30T00:00:00",
                    null
                ],
                [
                    "2015-12-31T00:00:00",
                    null
                ],
                [
                    "2016-01-31T00:00:00",
                    null
                ],
                [
                    "2016-02-29T00:00:00",
                    null
                ],
                [
                    "2016-03-31T00:00:00",
                    null
                ],
                [
                    "2016-04-30T00:00:00",
                    null
                ],
                [
                    "2016-05-31T00:00:00",
                    null
                ],
                [
                    "2016-06-30T00:00:00",
                    null
                ],
                [
                    "2016-07-31T00:00:00",
                    null
                ],
                [
                    "2016-08-31T00:00:00",
                    null
                ],
                [
                    "2016-09-30T00:00:00",
                    null
                ],
                [
                    "2016-10-31T00:00:00",
                    null
                ],
                [
                    "2016-11-30T00:00:00",
                    null
                ],
                [
                    "2016-12-31T00:00:00",
                    null
                ],
                [
                    "2017-01-31T00:00:00",
                    null
                ],
                [
                    "2017-02-28T00:00:00",
                    null
                ],
                [
                    "2017-03-31T00:00:00",
                    null
                ],
                [
                    "2017-04-30T00:00:00",
                    null
                ],
                [
                    "2017-05-31T00:00:00",
                    null
                ],
                [
                    "2017-06-30T00:00:00",
                    null
                ],
                [
                    "2017-07-31T00:00:00",
                    null
                ],
                [
                    "2017-08-31T00:00:00",
                    null
                ],
                [
                    "2017-09-30T00:00:00",
                    null
                ],
                [
                    "2017-10-31T00:00:00",
                    null
                ],
                [
                    "2017-11-30T00:00:00",
                    null
                ],
                [
                    "2017-12-31T00:00:00",
                    null
                ],
                [
                    "2018-01-31T00:00:00",
                    null
                ],
                [
                    "2018-02-28T00:00:00",
                    null
                ],
                [
                    "2018-03-31T00:00:00",
                    null
                ],
                [
                    "2018-04-30T00:00:00",
                    null
                ],
                [
                    "2018-05-31T00:00:00",
                    null
                ],
                [
                    "2018-06-30T00:00:00",
                    null
                ],
                [
                    "2018-07-31T00:00:00",
                    null
                ],
                [
                    "2018-08-31T00:00:00",
                    null
                ],
                [
                    "2018-09-30T00:00:00",
                    null
                ],
                [
                    "2018-10-31T00:00:00",
                    null
                ],
                [
                    "2018-11-30T00:00:00",
                    null
                ],
                [
                    "2018-12-31T00:00:00",
                    null
                ],
                [
                    "2019-01-31T00:00:00",
                    null
                ],
                [
                    "2019-02-28T00:00:00",
                    null
                ],
                [
                    "2019-03-31T00:00:00",
                    null
                ],
                [
                    "2019-04-30T00:00:00",
                    null
                ],
                [
                    "2019-05-31T00:00:00",
                    null
                ],
                [
                    "2019-06-30T00:00:00",
                    null
                ],
                [
                    "2019-07-31T00:00:00",
                    null
                ],
                [
                    "2019-08-31T00:00:00",
                    null
                ],
                [
                    "2019-09-30T00:00:00",
                    null
                ],
                [
                    "2019-10-31T00:00:00",
                    null
                ],
                [
                    "2019-11-30T00:00:00",
                    null
                ],
                [
                    "2019-12-31T00:00:00",
                    null
                ],
                [
                    "2020-01-31T00:00:00",
                    null
                ],
                [
                    "2020-02-29T00:00:00",
                    null
                ],
                [
                    "2020-03-31T00:00:00",
                    null
                ],
                [
                    "2020-04-30T00:00:00",
                    null
                ],
                [
                    "2020-05-31T00:00:00",
                    null
                ],
                [
                    "2020-06-30T00:00:00",
                    null
                ],
                [
                    "2020-07-31T00:00:00",
                    null
                ],
                [
                    "2020-08-31T00:00:00",
                    null
                ],
                [
                    "2020-09-30T00:00:00",
                    null
                ],
                [
                    "2020-10-31T00:00:00",
                    null
                ],
                [
                    "2020-11-30T00:00:00",
                    null
                ],
                [
                    "2020-12-31T00:00:00",
                    null
                ],
                [
                    "2021-01-31T00:00:00",
                    null
                ],
                [
                    "2021-02-28T00:00:00",
                    null
                ],
                [
                    "2021-03-31T00:00:00",
                    null
                ],
                [
                    "2021-04-30T00:00:00",
                    null
                ],
                [
                    "2021-05-31T00:00:00",
                    null
                ],
                [
                    "2021-06-30T00:00:00",
                    null
                ],
                [
                    "2021-07-31T00:00:00",
                    null
                ],
                [
                    "2021-08-31T00:00:00",
                    null
                ],
                [
                    "2021-09-30T00:00:00",
                    null
                ],
                [
                    "2021-10-31T00:00:00",
                    null
                ],
                [
                    "2021-11-30T00:00:00",
                    null
                ],
                [
                    "2021-12-31T00:00:00",
                    null
                ],
                [
                    "2022-01-31T00:00:00",
                    null
                ],
                [
                    "2022-02-28T00:00:00",
                    null
                ],
                [
                    "2022-03-31T00:00:00",
                    null
                ],
                [
                    "2022-04-30T00:00:00",
                    null
                ],
                [
                    "2022-05-31T00:00:00",
                    null
                ],
                [
                    "2022-06-30T00:00:00",
                    null
                ],
                [
                    "2022-07-31T00:00:00",
                    null
                ],
                [
                    "2022-08-31T00:00:00",
                    null
                ],
                [
                    "2022-09-30T00:00:00",
                    null
                ],
                [
                    "2022-10-31T00:00:00",
                    null
                ],
                [
                    "2022-11-30T00:00:00",
                    null
                ],
                [
                    "2022-12-31T00:00:00",
                    null
                ],
                [
                    "2023-01-31T00:00:00",
                    null
                ],
                [
                    "2023-02-28T00:00:00",
                    null
                ],
                [
                    "2023-03-31T00:00:00",
                    null
                ],
                [
                    "2023-04-30T00:00:00",
                    null
                ],
                [
                    "2023-05-31T00:00:00",
                    null
                ],
                [
                    "2023-06-30T00:00:00",
                    null
                ],
                [
                    "2023-07-31T00:00:00",
                    null
                ],
                [
                    "2023-08-31T00:00:00",
                    null
                ],
                [
                    "2023-09-30T00:00:00",
                    null
                ],
                [
                    "2023-10-31T00:00:00",
                    null
                ],
                [
                    "2023-11-30T00:00:00",
                    null
                ],
                [
                    "2023-12-31T00:00:00",
                    null
                ],
                [
                    "2024-01-31T00:00:00",
                    null
                ],
                [
                    "2024-02-29T00:00:00",
                    null
                ],
                [
                    "2024-03-31T00:00:00",
                    null
                ],
                [
                    "2024-04-30T00:00:00",
                    null
                ],
                [
                    "2024-05-31T00:00:00",
                    null
                ],
                [
                    "2024-06-30T00:00:00",
                    null
                ],
                [
                    "2024-07-31T00:00:00",
                    null
                ],
                [
                    "2024-08-31T00:00:00",
                    null
                ],
                [
                    "2024-09-30T00:00:00",
                    null
                ],
                [
                    "2024-10-31T00:00:00",
                    null
                ],
                [
                    "2024-11-30T00:00:00",
                    null
                ],
                [
                    "2024-12-31T00:00:00",
                    null
                ],
                [
                    "2025-01-31T00:00:00",
                    86902.04
                ],
                [
                    "2025-02-28T00:00:00",
                    88700.81
                ],
                [
                    "2025-03-31T00:00:00",
                    90735.77
                ],
                [
                    "2025-04-30T00:00:00",
                    92749.53
                ],
                [
                    "2025-05-31T00:00:00",
                    94877.38
                ],
                [
                    "2025-06-30T00:00:00",
                    96983.05
                ],
                [
                    "2025-07-31T00:00:00",
                    99208.02
                ],
                [
                    "2025-08-31T00:00:00",
                    101484.04
                ],
                [
                    "2025-09-30T00:00:00",
                    103736.34
                ],
                [
                    "2025-10-31T00:00:00",
                    106116.24
                ],
                [
                    "2025-11-30T00:00:00",
                    108471.35
                ],
                [
                    "2025-12-31T00:00:00",
                    110959.88
                ],
                [
                    "2026-01-31T00:00:00",
                    113505.51
                ],
                [
                    "2026-02-28T00:00:00",
                    115854.94
                ],
                [
                    "2026-03-31T00:00:00",
                    118512.87
                ],
                [
                    "2026-04-30T00:00:00",
                    121143.1
                ],
                [
                    "2026-05-31T00:00:00",
                    123922.35
                ],
                [
                    "2026-06-30T00:00:00",
                    126672.63
                ],
                [
                    "2026-07-31T00:00:00",
                    129578.74
                ],
                [
                    "2026-08-31T00:00:00",
                    132551.51
                ],
                [
                    "2026-09-30T00:00:00",
                    135493.31
                ],
                [
                    "2026-10-31T00:00:00",
                    138601.78
                ],
                [
                    "2026-11-30T00:00:00",
                    141677.86
                ],
                [
                    "2026-12-31T00:00:00",
                    144928.21
                ],
                [
                    "2027-01-31T00:00:00",
                    148253.13
                ],
                [
                    "2027-02-28T00:00:00",
                    151321.8
                ],
                [
                    "2027-03-31T00:00:00",
                    154793.41
                ],
                [
                    "2027-04-30T00:00:00",
                    158228.84
                ],
                [
                    "2027-05-31T00:00:00",
                    161858.9
                ],
                [
                    "2027-06-30T00:00:00",
                    165451.14
                ],
                [
                    "2027-07-31T00:00:00",
                    169246.89
                ],
                [
                    "2027-08-31T00:00:00",
                    173129.73
                ],
                [
                    "2027-09-30T00:00:00",
                    176972.11
                ],
                [
                    "2027-10-31T00:00:00",
                    181032.17
                ],
                [
                    "2027-11-30T00:00:00",
                    185049.94
                ],
                [
                    "2027-12-31T00:00:00",
                    189295.32
                ],
                [
                    "2028-01-31T00:00:00",
                    193638.11
                ],
                [
                    "2028-02-29T00:00:00",
                    197790.87
                ],
                [
                    "2028-03-31T00:00:00",
                    201589.69
                ]
            ],
            "hoverAnimation": true,
            "label": {
                "show": false,
                "margin": 8,
                "valueAnimation": false
            },
            "logBase": 10,
            "seriesLayoutBy": "column",
            "lineStyle": {
                "show": true,
                "width": 1,
                "opacity": 1,
                "curveness": 0,
                "type": "solid"
            },
            "areaStyle": {
                "opacity": 0
            },
            "zlevel": 0,
            "z": 0
        }
    ],
    "legend": [
        {
            "data": [
                "BTC realized price",
                "Model fitted price",
                "Model predicted price"
            ],
            "selected": {},
            "show": true,
            "left": "15%",
            "top": "15%",
            "orient": "vertical",
            "padding": 5,
            "itemGap": 10,
            "itemWidth": 25,
            "itemHeight": 14,
            "backgroundColor": "transparent",
            "borderColor": "#ccc",
            "borderRadius": 0,
            "pageButtonItemGap": 5,
            "pageButtonPosition": "end",
            "pageFormatter": "{current}/{total}",
            "pageIconColor": "#2f4554",
            "pageIconInactiveColor": "#aaa",
            "pageIconSize": 15,
            "animationDurationUpdate": 800,
            "selector": false,
            "selectorPosition": "auto",
            "selectorItemGap": 7,
            "selectorButtonGap": 10
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "axis",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "cross"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "enterable": false,
        "confine": false,
        "appendToBody": false,
        "transitionDuration": 0.4,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5,
        "order": "seriesAsc"
    },
    "xAxis": [
        {
            "type": "time",
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": true,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            },
            "animation": true,
            "animationThreshold": 2000,
            "animationDuration": 1000,
            "animationEasing": "cubicOut",
            "animationDelay": 0,
            "animationDurationUpdate": 300,
            "animationEasingUpdate": "cubicOut",
            "animationDelayUpdate": 0,
            "data": [
                "2010-07-31T00:00:00",
                "2010-08-31T00:00:00",
                "2010-09-30T00:00:00",
                "2010-10-31T00:00:00",
                "2010-11-30T00:00:00",
                "2010-12-31T00:00:00",
                "2011-01-31T00:00:00",
                "2011-02-28T00:00:00",
                "2011-03-31T00:00:00",
                "2011-04-30T00:00:00",
                "2011-05-31T00:00:00",
                "2011-06-30T00:00:00",
                "2011-07-31T00:00:00",
                "2011-08-31T00:00:00",
                "2011-09-30T00:00:00",
                "2011-10-31T00:00:00",
                "2011-11-30T00:00:00",
                "2011-12-31T00:00:00",
                "2012-01-31T00:00:00",
                "2012-02-29T00:00:00",
                "2012-03-31T00:00:00",
                "2012-04-30T00:00:00",
                "2012-05-31T00:00:00",
                "2012-06-30T00:00:00",
                "2012-07-31T00:00:00",
                "2012-08-31T00:00:00",
                "2012-09-30T00:00:00",
                "2012-10-31T00:00:00",
                "2012-11-30T00:00:00",
                "2012-12-31T00:00:00",
                "2013-01-31T00:00:00",
                "2013-02-28T00:00:00",
                "2013-03-31T00:00:00",
                "2013-04-30T00:00:00",
                "2013-05-31T00:00:00",
                "2013-06-30T00:00:00",
                "2013-07-31T00:00:00",
                "2013-08-31T00:00:00",
                "2013-09-30T00:00:00",
                "2013-10-31T00:00:00",
                "2013-11-30T00:00:00",
                "2013-12-31T00:00:00",
                "2014-01-31T00:00:00",
                "2014-02-28T00:00:00",
                "2014-03-31T00:00:00",
                "2014-04-30T00:00:00",
                "2014-05-31T00:00:00",
                "2014-06-30T00:00:00",
                "2014-07-31T00:00:00",
                "2014-08-31T00:00:00",
                "2014-09-30T00:00:00",
                "2014-10-31T00:00:00",
                "2014-11-30T00:00:00",
                "2014-12-31T00:00:00",
                "2015-01-31T00:00:00",
                "2015-02-28T00:00:00",
                "2015-03-31T00:00:00",
                "2015-04-30T00:00:00",
                "2015-05-31T00:00:00",
                "2015-06-30T00:00:00",
                "2015-07-31T00:00:00",
                "2015-08-31T00:00:00",
                "2015-09-30T00:00:00",
                "2015-10-31T00:00:00",
                "2015-11-30T00:00:00",
                "2015-12-31T00:00:00",
                "2016-01-31T00:00:00",
                "2016-02-29T00:00:00",
                "2016-03-31T00:00:00",
                "2016-04-30T00:00:00",
                "2016-05-31T00:00:00",
                "2016-06-30T00:00:00",
                "2016-07-31T00:00:00",
                "2016-08-31T00:00:00",
                "2016-09-30T00:00:00",
                "2016-10-31T00:00:00",
                "2016-11-30T00:00:00",
                "2016-12-31T00:00:00",
                "2017-01-31T00:00:00",
                "2017-02-28T00:00:00",
                "2017-03-31T00:00:00",
                "2017-04-30T00:00:00",
                "2017-05-31T00:00:00",
                "2017-06-30T00:00:00",
                "2017-07-31T00:00:00",
                "2017-08-31T00:00:00",
                "2017-09-30T00:00:00",
                "2017-10-31T00:00:00",
                "2017-11-30T00:00:00",
                "2017-12-31T00:00:00",
                "2018-01-31T00:00:00",
                "2018-02-28T00:00:00",
                "2018-03-31T00:00:00",
                "2018-04-30T00:00:00",
                "2018-05-31T00:00:00",
                "2018-06-30T00:00:00",
                "2018-07-31T00:00:00",
                "2018-08-31T00:00:00",
                "2018-09-30T00:00:00",
                "2018-10-31T00:00:00",
                "2018-11-30T00:00:00",
                "2018-12-31T00:00:00",
                "2019-01-31T00:00:00",
                "2019-02-28T00:00:00",
                "2019-03-31T00:00:00",
                "2019-04-30T00:00:00",
                "2019-05-31T00:00:00",
                "2019-06-30T00:00:00",
                "2019-07-31T00:00:00",
                "2019-08-31T00:00:00",
                "2019-09-30T00:00:00",
                "2019-10-31T00:00:00",
                "2019-11-30T00:00:00",
                "2019-12-31T00:00:00",
                "2020-01-31T00:00:00",
                "2020-02-29T00:00:00",
                "2020-03-31T00:00:00",
                "2020-04-30T00:00:00",
                "2020-05-31T00:00:00",
                "2020-06-30T00:00:00",
                "2020-07-31T00:00:00",
                "2020-08-31T00:00:00",
                "2020-09-30T00:00:00",
                "2020-10-31T00:00:00",
                "2020-11-30T00:00:00",
                "2020-12-31T00:00:00",
                "2021-01-31T00:00:00",
                "2021-02-28T00:00:00",
                "2021-03-31T00:00:00",
                "2021-04-30T00:00:00",
                "2021-05-31T00:00:00",
                "2021-06-30T00:00:00",
                "2021-07-31T00:00:00",
                "2021-08-31T00:00:00",
                "2021-09-30T00:00:00",
                "2021-10-31T00:00:00",
                "2021-11-30T00:00:00",
                "2021-12-31T00:00:00",
                "2022-01-31T00:00:00",
                "2022-02-28T00:00:00",
                "2022-03-31T00:00:00",
                "2022-04-30T00:00:00",
                "2022-05-31T00:00:00",
                "2022-06-30T00:00:00",
                "2022-07-31T00:00:00",
                "2022-08-31T00:00:00",
                "2022-09-30T00:00:00",
                "2022-10-31T00:00:00",
                "2022-11-30T00:00:00",
                "2022-12-31T00:00:00",
                "2023-01-31T00:00:00",
                "2023-02-28T00:00:00",
                "2023-03-31T00:00:00",
                "2023-04-30T00:00:00",
                "2023-05-31T00:00:00",
                "2023-06-30T00:00:00",
                "2023-07-31T00:00:00",
                "2023-08-31T00:00:00",
                "2023-09-30T00:00:00",
                "2023-10-31T00:00:00",
                "2023-11-30T00:00:00",
                "2023-12-31T00:00:00",
                "2024-01-31T00:00:00",
                "2024-02-29T00:00:00",
                "2024-03-31T00:00:00",
                "2024-04-30T00:00:00",
                "2024-05-31T00:00:00",
                "2024-06-30T00:00:00",
                "2024-07-31T00:00:00",
                "2024-08-31T00:00:00",
                "2024-09-30T00:00:00",
                "2024-10-31T00:00:00",
                "2024-11-30T00:00:00",
                "2024-12-31T00:00:00",
                "2025-01-31T00:00:00",
                "2025-02-28T00:00:00",
                "2025-03-31T00:00:00",
                "2025-04-30T00:00:00",
                "2025-05-31T00:00:00",
                "2025-06-30T00:00:00",
                "2025-07-31T00:00:00",
                "2025-08-31T00:00:00",
                "2025-09-30T00:00:00",
                "2025-10-31T00:00:00",
                "2025-11-30T00:00:00",
                "2025-12-31T00:00:00",
                "2026-01-31T00:00:00",
                "2026-02-28T00:00:00",
                "2026-03-31T00:00:00",
                "2026-04-30T00:00:00",
                "2026-05-31T00:00:00",
                "2026-06-30T00:00:00",
                "2026-07-31T00:00:00",
                "2026-08-31T00:00:00",
                "2026-09-30T00:00:00",
                "2026-10-31T00:00:00",
                "2026-11-30T00:00:00",
                "2026-12-31T00:00:00",
                "2027-01-31T00:00:00",
                "2027-02-28T00:00:00",
                "2027-03-31T00:00:00",
                "2027-04-30T00:00:00",
                "2027-05-31T00:00:00",
                "2027-06-30T00:00:00",
                "2027-07-31T00:00:00",
                "2027-08-31T00:00:00",
                "2027-09-30T00:00:00",
                "2027-10-31T00:00:00",
                "2027-11-30T00:00:00",
                "2027-12-31T00:00:00",
                "2028-01-31T00:00:00",
                "2028-02-29T00:00:00",
                "2028-03-31T00:00:00"
            ]
        }
    ],
    "yAxis": [
        {
            "type": "log",
            "name": "Price/USD",
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": true,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            },
            "animation": true,
            "animationThreshold": 2000,
            "animationDuration": 1000,
            "animationEasing": "cubicOut",
            "animationDelay": 0,
            "animationDurationUpdate": 300,
            "animationEasingUpdate": "cubicOut",
            "animationDelayUpdate": 0
        }
    ],
    "title": [
        {
            "show": true,
            "text": "BTC monthly price",
            "target": "blank",
            "subtarget": "blank",
            "left": "center",
            "top": "top",
            "padding": 5,
            "itemGap": 10,
            "textAlign": "auto",
            "textVerticalAlign": "auto",
            "triggerEvent": false
        }
    ],
    "dataZoom": {
        "show": true,
        "type": "slider",
        "showDetail": true,
        "showDataShadow": true,
        "realtime": true,
        "start": 0,
        "end": 100,
        "orient": "horizontal",
        "zoomLock": false,
        "filterMode": "filter"
    }
};

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
</script>
]]></content>
      <categories>
        <category>投资</category>
      </categories>
      <tags>
        <tag>bitcoin</tag>
        <tag>模型</tag>
      </tags>
  </entry>
</search>
